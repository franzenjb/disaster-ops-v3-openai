(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{7558:(e,t,a)=>{Promise.resolve().then(a.bind(a,9480))},9480:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>ek});var s=a(5155),r=a(2115),n=a(8661),i=a.n(n);let o={operation:{drNumber:"DR 220-25",name:"FLOCOM",type:"Hurricane Response",events:"Hurricane Helene and Milton",operationalPeriod:{number:27,start:"Oct 20, 2024 - 06:00",end:"Oct 21, 2024 - 05:59"},preparedBy:"Alyson Gordon",preparedByTitle:"Information & Planning Manager",approvedBy:"Betsy Witthohn",approvedByTitle:"Job Director"},shelteringFacilities:[{id:"shelter-1",name:"Central High School Shelter",type:"Managed Client Shelter",address:"123 Main St, Tampa, FL 33607",county:"Hillsborough",capacity:{maximum:250,current:187},personnel:{required:12,have:10,gap:2},positions:[{code:"SHEL-MN",title:"Shelter Manager",required:1,have:1,gap:0},{code:"SHEL-SV",title:"Shelter Supervisor",required:2,have:2,gap:0},{code:"SHEL-SA",title:"Shelter Associate",required:8,have:6,gap:2},{code:"DHS-SV",title:"Health Services",required:1,have:1,gap:0}],assets:[{type:"Cots",unit:"each",required:200,have:187,gap:0},{type:"Blankets",unit:"each",required:400,have:374,gap:26},{type:"Comfort Kits",unit:"each",required:200,have:150,gap:50},{type:"ADA Cots",unit:"each",required:20,have:20,gap:0}]},{id:"shelter-2",name:"First Baptist Church",type:"Partner Managed Shelter",address:"456 Oak Ave, St. Petersburg, FL 33701",county:"Pinellas",capacity:{maximum:150,current:92},personnel:{required:8,have:8,gap:0},positions:[{code:"SHEL-MN",title:"Shelter Manager",required:1,have:1,gap:0},{code:"SHEL-SA",title:"Shelter Associate",required:6,have:6,gap:0},{code:"DMH-SA",title:"Mental Health",required:1,have:1,gap:0}],assets:[{type:"Cots",unit:"each",required:150,have:150,gap:0},{type:"Blankets",unit:"each",required:300,have:280,gap:20},{type:"Comfort Kits",unit:"each",required:150,have:100,gap:50}]}],feedingFacilities:[{id:"feeding-1",name:"Central Kitchen",type:"Fixed Feeding Site",address:"789 Kitchen Way, Tampa, FL 33607",county:"Hillsborough",mealsPerDay:5e3,personnel:{required:15,have:14,gap:1},positions:[{code:"MC-MN",title:"Kitchen Manager",required:1,have:1,gap:0},{code:"MC-SV",title:"Kitchen Supervisor",required:2,have:2,gap:0},{code:"MC-SA",title:"Food Service Worker",required:12,have:11,gap:1}],assets:[{type:"Cambros",unit:"each",required:20,have:20,gap:0},{type:"Serving Tables",unit:"each",required:6,have:6,gap:0},{type:"Hand Wash Stations",unit:"each",required:4,have:4,gap:0}]},{id:"feeding-2",name:"Mobile Feeding Unit 1",type:"Mobile Feeding Route",address:"Staging at Central Kitchen",county:"Hillsborough",route:"North County Route",mealsPerDay:1500,personnel:{required:4,have:4,gap:0},positions:[{code:"MC-SV",title:"ERV Team Lead",required:1,have:1,gap:0},{code:"MC-SA",title:"ERV Team Member",required:3,have:3,gap:0}],assets:[{type:"ERV (Emergency Response Vehicle)",unit:"vehicle",required:1,have:1,gap:0},{type:"Cambros",unit:"each",required:6,have:6,gap:0},{type:"Coolers",unit:"each",required:2,have:2,gap:0}]}],contacts:{command:[{name:"Betsy Witthohn",title:"Job Director",phone:"707-481-4379",email:"Betsy.Witthohn@redcross.org"},{name:"Robert Bryan",title:"Acting Director",phone:"505-228-3885",email:"Rob.Bryan2@redcross.org"},{name:"Ryan Lock",title:"RCCO",phone:"850-354-2342",email:"Ryan.Lock3@redcross.org"},{name:"Candi Collyer",title:"SEOC Principal",phone:"209-968-1884",email:"Candi.Collyer@redcross.org"}],operations:[{name:"Marguerite Adams",title:"HQ DHS MN",phone:"225-573-9079",email:"Marguerite.adams4@redcross.org"},{name:"Alec Cecil",title:"HQ DMH MN",phone:"914-582-0050",email:"Alec.cecil@redcross.org"},{name:"Laura Dean",title:"HQ Recovery MN",phone:"315-945-3792",email:"Laura.Dean2@redcross.org"}],logistics:[{name:"Chuck Bennett",title:"HQ LOG GEN MN",phone:"503-428-0315",email:"Chuck.bennett@redcross.org"},{name:"Chris Murphy",title:"HQ Transportation Manager",phone:"909-451-8027",email:"Chris.murphy@redcross.org"},{name:"Stan Thompson",title:"DST Chief",phone:"512-965-4644",email:"Stan.Thompson@redcross.org"}],emergencyLines:[{name:"24 Hour / Lodging",phone:"707-889-8136",note:"Emergencies Only!"},{name:"24 Hour / Staff Health",phone:"225-573-9079",contact:"Marguerite Adams"},{name:"24 Hour / Staff Mental Health",phone:"914-582-0050",contact:"Alec Cecil"},{name:"24 Hour / Staffing",phone:"571-562-1867"},{name:"24 Hour / Transportation",phone:"571-562-1827"},{name:"24 Hour / DST Helpline",phone:"512-965-4644"}]},governmentFacilities:[{id:"gov-1",name:"County EOC Liaison",type:"Government Liaison",address:"601 E Kennedy Blvd, Tampa, FL 33602",county:"Hillsborough",personnel:{required:2,have:2,gap:0},positions:[{code:"GOV-LN",title:"Government Liaison",required:2,have:2,gap:0}],assets:[]}],damageAssessmentFacilities:[{id:"da-1",name:"Damage Assessment Team Base",type:"Assessment Center",address:"501 E Kennedy Blvd, Tampa, FL 33602",county:"Hillsborough",personnel:{required:4,have:3,gap:1},positions:[{code:"DA-MN",title:"DA Manager",required:1,have:1,gap:0},{code:"DA-TM",title:"DA Team Member",required:3,have:2,gap:1}],assets:[{type:"Tablets",unit:"each",required:4,have:4,gap:0},{type:"Vehicles",unit:"each",required:2,have:2,gap:0}]}],distributionFacilities:[{id:"dist-1",name:"Central Distribution Center",type:"Distribution Center",address:"701 N Florida Ave, Tampa, FL 33602",county:"Hillsborough",itemsPerDay:5e3,personnel:{required:6,have:5,gap:1},positions:[{code:"DIST-MN",title:"Distribution Manager",required:1,have:1,gap:0},{code:"DIST-TM",title:"Distribution Team",required:5,have:4,gap:1}],assets:[{type:"Box Trucks",unit:"each",required:3,have:3,gap:0},{type:"Pallets",unit:"each",required:50,have:45,gap:5}]}],individualCareFacilities:[{id:"idc-1",name:"Client Services Center",type:"Service Center",address:"801 N Tampa St, Tampa, FL 33602",county:"Hillsborough",clientsPerDay:150,personnel:{required:8,have:7,gap:1},positions:[{code:"IDC-MN",title:"IDC Manager",required:1,have:1,gap:0},{code:"IDC-CW",title:"Case Worker",required:7,have:6,gap:1}],assets:[{type:"Workstations",unit:"each",required:8,have:8,gap:0},{type:"Client Forms",unit:"sets",required:200,have:180,gap:20}]}],workSites:[{facility:"Florida State EOC",type:"EOC",county:"Leon County",address:"2555 Shumard Oak Blvd",zip:"32399",poc:"Ryan Lock",phone:"(850) 354-2342"},{facility:"HQ - DRO HQ",type:"DRO HQ",county:"Hillsborough County",address:"3310 W. Main St.",zip:"33607",poc:"Chuck Bennett",phone:"503-428-0315"},{facility:"Tallahassee",type:"NFL Worksite",county:"Leon County",address:"1115 Easterwood Dr.",zip:"32311",poc:"Michelene Holland",phone:"(561) 232-9226"},{facility:"TPA Basecamp",type:"Shelter",county:"Hillsborough County",address:"4232 N Westshore Blvd",zip:"33614",poc:"Carolyn Manson",phone:"(941) 228-0761"}],dailySchedule:[{time:"09:15 AM",event:"Priorities Meeting",location:"HQ Leadership Room",audience:"DRO Leadership Team"},{time:"10:00 AM",event:"Stand Up",location:"HQ Leadership Room / Microsoft Teams",audience:"All Workforce"},{time:"11:30 AM",event:"Recovery Leadership",location:"Microsoft Teams",audience:"DRO Dir, REC Mgr, REC SV/Data"},{time:"01:00 PM",event:"Tactics",location:"HQ Leadership Room",audience:"Operations Leadership & IP Mgr"},{time:"02:00 PM",event:"Recovery Meeting",location:"Microsoft Teams",audience:"All Recovery"},{time:"04:00 PM",event:"Planning Meeting",location:"HQ Leadership Room",audience:"Director, AD LTR, & All Activity Leads"},{time:"06:00 PM",event:"IAP Distributed",location:"Email",audience:"All assigned staff in Volunteer Connection"}],statistics:{totalPersonnelDeployed:41,totalPersonnelRequired:44,totalPersonnelGap:3,activeShelters:2,shelterCapacityTotal:400,shelterOccupancyTotal:279,mealsPerDayCapacity:6500,activeFeedingSites:2,totalFacilities:8},priorities:["Life safety and immediate needs","Sheltering operations","Feeding operations","Distribution of emergency supplies","Client casework and recovery planning","Community partnerships"],directorsMessage:"Hello Team FLOCOM,\n\nWelcome to all the new responders joining this operation. Many thanks to you, and to those who are continuing to serve the people of Florida. It's been a long time since Helene first hit in September.\n\nPlease remember our clients are now going into a holiday season that will not be like what they have had in the past. Their homes won't be put back together. They've lost precious items they use for their holiday celebrations. We need to live up to our promise to provide hope and comfort.\n\nWith gratitude,\nBetsy Witthohn, Job Director"};var l=a(2020);function d(e){let{drNumber:t="220-25",operationName:a="FLOCOM",operationalPeriod:n={number:27,start:"20/10/2024 18:00",end:"21/10/2024 17:59"},preparedBy:i={name:"Gary Pelletier",title:"Information & Planning"},approvedBy:o={name:"Virginia Mewborn",title:"DRO Director"},onPhotoUpdate:d}=e,[c,p]=(0,r.useState)(null),[h,m]=(0,r.useState)(),[g,u]=(0,r.useState)(),[x,b]=(0,r.useState)(null),[y,f]=(0,r.useState)(""),[j,v]=(0,r.useState)(!1),N=(0,r.useRef)(null),C=(0,r.useRef)(null),[w]=(0,r.useState)({directorsIntent:!0,incidentPriorities:!0,statusOfPrevious:!0,contactRoster:!0,incidentOpenAction:!0,incidentOrgChart:!0,workAssignment:!0,workSites:!0,dailySchedule:!0,generalMessage:!0}),S=(0,r.useCallback)(async()=>{if(!g||!N.current)return;let e=N.current,t=document.createElement("canvas"),a=t.getContext("2d");if(!a)return;let s=e.naturalWidth/e.width,r=e.naturalHeight/e.height;return t.width=g.width,t.height=g.height,a.drawImage(e,g.x*s,g.y*r,g.width*s,g.height*r,0,0,g.width,g.height),new Promise(e=>{t.toBlob(t=>{t&&e(URL.createObjectURL(t))},"image/jpeg",.95)})},[g]),D=async()=>{let e=await S();e&&(b(e),v(!1),d&&d(e,y))};return(0,s.jsxs)("div",{className:"bg-white p-8",style:{minHeight:"11in"},children:[(0,s.jsx)("table",{className:"w-full border-2 border-black mb-4",children:(0,s.jsx)("tbody",{children:(0,s.jsxs)("tr",{children:[(0,s.jsxs)("td",{className:"border-2 border-black p-2",children:[(0,s.jsx)("div",{className:"text-sm",children:"Incident Name:"}),(0,s.jsx)("div",{className:"font-bold",children:a})]}),(0,s.jsxs)("td",{className:"border-2 border-black p-2",children:[(0,s.jsx)("div",{className:"text-sm",children:"DR Number"}),(0,s.jsx)("div",{className:"font-bold",children:t})]}),(0,s.jsxs)("td",{className:"border-2 border-black p-2",children:[(0,s.jsx)("div",{className:"text-sm",children:"Operational Period"}),(0,s.jsxs)("div",{className:"font-bold",children:[n.start," to ",n.end]})]})]})})}),(0,s.jsx)("div",{className:"text-center mb-6",children:(0,s.jsxs)("h1",{className:"text-3xl font-bold mb-2",children:["Incident Action Plan [#",n.number,"]"]})}),(0,s.jsxs)("div",{className:"border-2 border-gray-300 mb-6 bg-gray-50",style:{minHeight:"300px"},children:[!x&&!j&&(0,s.jsx)("div",{className:"flex items-center justify-center h-full p-8",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-gray-500 mb-4",children:"Operation Photo"}),(0,s.jsx)("input",{ref:C,type:"file",accept:"image/*",onChange:e=>{if(e.target.files&&e.target.files.length>0){let t=new FileReader;t.addEventListener("load",()=>{p(t.result),v(!0)}),t.readAsDataURL(e.target.files[0])}},className:"hidden",id:"photo-upload"}),(0,s.jsx)("label",{htmlFor:"photo-upload",className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 cursor-pointer inline-block",children:"Upload Photo"})]})}),j&&c&&(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)(l.Ay,{crop:h,onChange:e=>m(e),onComplete:e=>u(e),aspect:16/9,children:(0,s.jsx)("img",{ref:N,src:c,alt:"Upload",style:{maxWidth:"100%",maxHeight:"400px"}})}),(0,s.jsxs)("div",{className:"mt-4 flex justify-center space-x-2",children:[(0,s.jsx)("button",{onClick:D,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Apply Crop"}),(0,s.jsx)("button",{onClick:()=>{v(!1),p(null)},className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:"Cancel"})]})]}),x&&(0,s.jsxs)("div",{children:[(0,s.jsx)("img",{src:x,alt:"Operation",className:"w-full object-cover",style:{maxHeight:"350px"}}),(0,s.jsxs)("div",{className:"p-2 bg-white border-t",children:[(0,s.jsx)("input",{type:"text",placeholder:"Add caption...",value:y,onChange:e=>f(e.target.value),onBlur:()=>{d&&d(x,y)},onKeyDown:e=>{"Enter"===e.key&&d&&d(x,y)},className:"w-full p-2 border rounded mb-2"}),(0,s.jsx)("button",{onClick:()=>{b(null),p(null),f(""),C.current&&(C.current.value="")},className:"text-red-600 hover:text-red-800 text-sm",children:"Remove Photo"})]})]})]}),(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)("table",{className:"w-full",children:(0,s.jsx)("tbody",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"w-1/2 pr-4",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-200",children:[(0,s.jsx)("td",{className:"p-2 font-bold",colSpan:2,children:"Documents Included:"}),(0,s.jsx)("td",{className:"p-2 font-bold text-center",children:"Y/N"})]})}),(0,s.jsxs)("tbody",{children:[(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{colSpan:2,className:"p-1 underline text-blue-600",children:"Director's Intent/Message"}),(0,s.jsx)("td",{className:"p-1 text-center",children:w.directorsIntent?"Y":"N"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{colSpan:2,className:"p-1 underline text-blue-600",children:"Incident Priorities and Objectives"}),(0,s.jsx)("td",{className:"p-1 text-center",children:w.incidentPriorities?"Y":"N"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{colSpan:2,className:"p-1 underline text-blue-600",children:"Status of Previous Operating Period's Objectives"}),(0,s.jsx)("td",{className:"p-1 text-center",children:w.statusOfPrevious?"Y":"N"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{colSpan:2,className:"p-1 underline text-blue-600",children:"Contact Roster DRO HQ"}),(0,s.jsx)("td",{className:"p-1 text-center",children:w.contactRoster?"Y":"N"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{colSpan:2,className:"p-1 underline text-blue-600",children:"Incident Open Action Tracker"}),(0,s.jsx)("td",{className:"p-1 text-center",children:w.incidentOpenAction?"Y":"N"})]})]})]})}),(0,s.jsx)("td",{className:"w-1/2 pl-4",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-200",children:[(0,s.jsx)("td",{className:"p-2 font-bold",colSpan:2,children:"Documents Included:"}),(0,s.jsx)("td",{className:"p-2 font-bold text-center",children:"Y/N"})]})}),(0,s.jsxs)("tbody",{children:[(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{colSpan:2,className:"p-1 underline text-blue-600",children:"Incident Organization Chart"}),(0,s.jsx)("td",{className:"p-1 text-center",children:w.incidentOrgChart?"Y":"N"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{colSpan:2,className:"p-1 underline text-blue-600",children:"Work Assignment"}),(0,s.jsx)("td",{className:"p-1 text-center",children:w.workAssignment?"Y":"N"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{colSpan:2,className:"p-1 underline text-blue-600",children:"Work Sites"}),(0,s.jsx)("td",{className:"p-1 text-center",children:w.workSites?"Y":"N"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{colSpan:2,className:"p-1 underline text-blue-600",children:"Daily Schedule"}),(0,s.jsx)("td",{className:"p-1 text-center",children:w.dailySchedule?"Y":"N"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{colSpan:2,className:"p-1 underline text-blue-600",children:"General Message"}),(0,s.jsx)("td",{className:"p-1 text-center",children:w.generalMessage?"Y":"N"})]})]})]})})]})})})}),(0,s.jsx)("table",{className:"w-full border-2 border-black",children:(0,s.jsx)("tbody",{children:(0,s.jsxs)("tr",{className:"bg-gray-200",children:[(0,s.jsxs)("td",{className:"border-r-2 border-black p-2 w-1/2",children:[(0,s.jsx)("div",{className:"font-bold",children:"Prepared By:"}),(0,s.jsx)("div",{children:i.name}),(0,s.jsx)("div",{className:"text-sm",children:i.title})]}),(0,s.jsxs)("td",{className:"p-2 w-1/2",children:[(0,s.jsx)("div",{className:"font-bold",children:"Approved By:"}),(0,s.jsx)("div",{children:o.name}),(0,s.jsx)("div",{className:"text-sm",children:o.title})]})]})})})]})}function c(e){let{initialContent:t="",onChange:a}=e,n=(0,r.useRef)(null),[i,o]=(0,r.useState)(t);(0,r.useEffect)(()=>{n.current&&t&&(n.current.innerHTML=t)},[]);let l=(e,t)=>{document.execCommand(e,!1,t),d()},d=()=>{if(n.current){let e=n.current.innerHTML;o(e),a&&a(e)}};return(0,s.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,s.jsxs)("div",{className:"bg-gray-50 border-b p-2 flex flex-wrap gap-1",children:[(0,s.jsxs)("div",{className:"flex gap-1 border-r pr-2",children:[(0,s.jsx)("button",{onClick:()=>l("bold"),className:"p-2 hover:bg-gray-200 rounded font-bold",title:"Bold",children:"B"}),(0,s.jsx)("button",{onClick:()=>l("italic"),className:"p-2 hover:bg-gray-200 rounded italic",title:"Italic",children:"I"}),(0,s.jsx)("button",{onClick:()=>l("underline"),className:"p-2 hover:bg-gray-200 rounded underline",title:"Underline",children:"U"}),(0,s.jsx)("button",{onClick:()=>l("strikeThrough"),className:"p-2 hover:bg-gray-200 rounded line-through",title:"Strikethrough",children:"S"})]}),(0,s.jsx)("div",{className:"flex gap-1 border-r pr-2",children:(0,s.jsxs)("select",{onChange:e=>l("formatBlock",e.target.value),className:"px-2 py-1 border rounded",children:[(0,s.jsx)("option",{value:"p",children:"Normal"}),(0,s.jsx)("option",{value:"h1",children:"Heading 1"}),(0,s.jsx)("option",{value:"h2",children:"Heading 2"}),(0,s.jsx)("option",{value:"h3",children:"Heading 3"}),(0,s.jsx)("option",{value:"h4",children:"Heading 4"})]})}),(0,s.jsxs)("div",{className:"flex gap-1 border-r pr-2",children:[(0,s.jsx)("button",{onClick:()=>l("justifyLeft"),className:"p-2 hover:bg-gray-200 rounded",title:"Align Left",children:"⬅"}),(0,s.jsx)("button",{onClick:()=>l("justifyCenter"),className:"p-2 hover:bg-gray-200 rounded",title:"Center",children:"⬌"}),(0,s.jsx)("button",{onClick:()=>l("justifyRight"),className:"p-2 hover:bg-gray-200 rounded",title:"Align Right",children:"➡"})]}),(0,s.jsxs)("div",{className:"flex gap-1 border-r pr-2",children:[(0,s.jsx)("button",{onClick:()=>l("insertUnorderedList"),className:"p-2 hover:bg-gray-200 rounded",title:"Bullet List",children:"• ─"}),(0,s.jsx)("button",{onClick:()=>l("insertOrderedList"),className:"p-2 hover:bg-gray-200 rounded",title:"Numbered List",children:"1. ─"})]}),(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)("button",{onClick:()=>{let e=prompt("Enter link URL:");e&&l("createLink",e)},className:"p-2 hover:bg-gray-200 rounded text-blue-600",title:"Insert Link",children:"\uD83D\uDD17"}),(0,s.jsx)("button",{onClick:()=>{let e=prompt("Enter image URL:");e&&l("insertImage",e)},className:"p-2 hover:bg-gray-200 rounded",title:"Insert Image",children:"\uD83D\uDDBC️"}),(0,s.jsx)("button",{onClick:()=>l("removeFormat"),className:"p-2 hover:bg-gray-200 rounded text-red-600",title:"Clear Formatting",children:"✕"})]})]}),(0,s.jsx)("div",{ref:n,contentEditable:!0,className:"p-4 min-h-[400px] focus:outline-none",onInput:d,suppressContentEditableWarning:!0,dangerouslySetInnerHTML:{__html:t||"\n          <h2>Director's Intent</h2>\n          <p>Our primary focus for this operational period is to:</p>\n          <ul>\n            <li>Ensure the safety and well-being of all affected residents</li>\n            <li>Maintain efficient shelter operations across all sites</li>\n            <li>Coordinate with local authorities for resource distribution</li>\n            <li>Prepare for potential escalation of operations</li>\n          </ul>\n          <p><strong>Remember:</strong> We are here to serve with compassion and efficiency. Every action we take impacts those who need us most.</p>\n        "}})]})}function p(e){let{initialContent:t="",onContentChange:a}=e,[n,i]=(0,r.useState)(t);return(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Director's Message"}),(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)(c,{initialContent:n,onChange:e=>{i(e),a&&a(e)}})}),(0,s.jsxs)("div",{className:"mt-4 flex justify-end space-x-2",children:[(0,s.jsx)("button",{onClick:()=>{let e=window.open("","_blank");e&&(e.document.write("\n              <html>\n                <head>\n                  <title>Director's Message</title>\n                  <style>\n                    body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }\n                    h2 { color: #333; }\n                    ul { margin: 10px 0; }\n                    li { margin: 5px 0; }\n                  </style>\n                </head>\n                <body>\n                  ".concat(n,"\n                </body>\n              </html>\n            ")),e.document.close(),e.print())},className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:"Print Preview"}),(0,s.jsx)("button",{onClick:()=>{localStorage.setItem("directorsMessage",n),alert("Message saved!")},className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Save Message"})]})]})}a(8108);class h{getData(){let e=localStorage.getItem(this.storageKey);return e?JSON.parse(e):{facilities:[],assignments:[]}}saveData(e){localStorage.setItem(this.storageKey,JSON.stringify(e))}createFacility(e){let t={...e,id:Math.random().toString(36).substr(2,9),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},a=this.getData();return a.facilities.push(t),this.saveData(a),t}getFacilities(){return this.getData().facilities||[]}updateFacility(e,t){let a=this.getData(),s=a.facilities.findIndex(t=>t.id===e);return -1===s?null:(a.facilities[s]={...a.facilities[s],...t,updatedAt:new Date().toISOString()},this.saveData(a),a.facilities[s])}deleteFacility(e){let t=this.getData(),a=t.facilities.length;return t.facilities=t.facilities.filter(t=>t.id!==e),t.facilities.length<a&&(this.saveData(t),!0)}createWorkAssignment(e){let t=this.getData(),a={...e,id:Math.random().toString(36).substr(2,9),createdAt:new Date().toISOString()};return t.assignments||(t.assignments=[]),t.assignments.push(a),this.saveData(t),a.id}getWorkAssignments(){return this.getData().assignments||[]}getWorkAssignment(e){return(this.getData().assignments||[]).find(t=>t.facilityId===e)||null}clearAll(){localStorage.removeItem(this.storageKey)}exportData(){return this.getData()}importData(e){this.saveData(e)}saveContactRoster(e){let t=this.getData();t.contactRoster=e,this.saveData(t)}getContactRoster(){return this.getData().contactRoster||[]}saveAppendices(e){let t=this.getData();t.appendices=e,this.saveData(t)}getAppendices(){return this.getData().appendices||[]}saveReferences(e){let t=this.getData();t.references=e,this.saveData(t)}getReferences(){return this.getData().references||[]}saveDailySchedule(e){let t=this.getData();t.dailySchedule=e,this.saveData(t)}getDailySchedule(){return this.getData().dailySchedule||[]}savePriorities(e){let t=this.getData();t.priorities=e,this.saveData(t)}getPriorities(){return this.getData().priorities||[]}saveObjectives(e){let t=this.getData();t.objectives=e,this.saveData(t)}getObjectives(){return this.getData().objectives||[]}constructor(){this.storageKey="disaster_ops_data"}}let m=new h;function g(){let[e,t]=(0,r.useState)([]);return(0,r.useEffect)(()=>{let e=m.getFacilities().filter(e=>"Staff Shelter"===e.type||"Responder Shelter"===e.type).map(e=>({resourceId:e.name,leaderName:"TBD",leaderContact:"TBD",nightLeaderName:"TBD",nightLeaderContact:"TBD",totalPersons:"TBD",reportingLocation:"".concat(e.address,"\n").concat(e.county||""," County"),reportingTime:"Day – 07:00\n\nNight – 19:00",workAssignment:"Operate responder sheltering for assigned responders at location"}));0===e.length?t([{resourceId:"Adventure Island Base Camp",leaderName:"Sherry Garza-Lopez",leaderContact:"(213-735-4683)",nightLeaderName:"Sherry Garza-Lopez",nightLeaderContact:"(213-735-4683)",totalPersons:"SH/SV – 1\nSH/SA – 2",reportingLocation:"10001 McKinley Dr\nTampa, FL 33612\nHillsborough County",reportingTime:"Day – 07:00\n\nNight – 19:00",workAssignment:"Operate responder sheltering for assigned responders at location"},{resourceId:"Red Cross of Southwest Florida Staff Shelter",leaderName:"Joyce Cook",leaderContact:"(815-579-2893)",nightLeaderName:"Joyce Cook",nightLeaderContact:"(815-579-2893)",totalPersons:"SH/SV – 1\nSH/SA – 3",reportingLocation:"2001 Cantu CT\nSarasota, FL 34232\nSarasota County",reportingTime:"Day – 07:00\n\nNight – 19:00",workAssignment:"Operate responder sheltering for assigned responders at location"}]):t(e)},[]),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("div",{className:"border-2 border-black bg-gray-200 p-2 font-bold",children:"DRO – Sheltering Resources"}),(0,s.jsxs)("table",{className:"w-full border-collapse border-2 border-black",children:[(0,s.jsxs)("thead",{children:[(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"border-2 border-black p-2 text-left",rowSpan:2,children:"Resource ID"}),(0,s.jsx)("th",{className:"border-2 border-black p-2 text-left",rowSpan:2,children:"Leader Name & Contact Information"}),(0,s.jsx)("th",{className:"border-2 border-black p-2 text-center",rowSpan:2,children:"Total # of Persons"}),(0,s.jsx)("th",{className:"border-2 border-black p-2 text-center",colSpan:2,children:"Reporting"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"border-2 border-black p-2 text-center",children:"Location"}),(0,s.jsx)("th",{className:"border-2 border-black p-2 text-center",children:"Time"})]})]}),(0,s.jsx)("tbody",{children:e.map((e,t)=>(0,s.jsxs)(r.Fragment,{children:[(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"border-2 border-black p-2 align-top font-bold",rowSpan:2,children:e.resourceId}),(0,s.jsxs)("td",{className:"border-2 border-black p-2 whitespace-pre-wrap",children:["• Day – ",e.leaderName,(0,s.jsx)("br",{}),e.leaderContact,(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),"• Night – ",e.nightLeaderName,(0,s.jsx)("br",{}),e.nightLeaderContact]}),(0,s.jsx)("td",{className:"border-2 border-black p-2 text-center whitespace-pre-wrap",children:e.totalPersons}),(0,s.jsx)("td",{className:"border-2 border-black p-2 whitespace-pre-wrap",children:e.reportingLocation}),(0,s.jsx)("td",{className:"border-2 border-black p-2 text-center whitespace-pre-wrap",children:e.reportingTime})]}),(0,s.jsx)("tr",{children:(0,s.jsxs)("td",{colSpan:4,className:"border-2 border-black p-2 bg-gray-100",children:[(0,s.jsx)("div",{className:"font-bold",children:"Work Assignment"}),(0,s.jsx)("div",{children:e.workAssignment})]})})]},t))})]})]})}function u(){return(0,s.jsxs)("div",{className:"p-4 space-y-6",children:[(0,s.jsx)("div",{className:"bg-gray-600 text-white p-2",children:(0,s.jsx)("h2",{className:"text-lg font-bold",children:"DRO – Feeding"})}),(0,s.jsxs)("div",{className:"bg-gray-50 p-3 border border-gray-300",children:[(0,s.jsx)("h3",{className:"font-bold mb-2",children:"Operations Leadership"}),(0,s.jsx)("p",{children:"AD Operations – Jennifer Carkner (509-859-2374)"}),(0,s.jsx)("p",{children:"HQ Mass Care Chief – Brenda Bridges (760-987-5452)"}),(0,s.jsx)("p",{children:"HQ Feeding Manager – Jamie Bonner (518-569-5038)"})]}),(0,s.jsxs)("div",{className:"border border-black",children:[(0,s.jsx)("div",{className:"bg-gray-200 p-2 border-b border-black",children:(0,s.jsx)("h3",{className:"font-bold",children:"DRO – Feeding Resources"})}),(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-black",children:[(0,s.jsx)("th",{className:"border-r border-black p-2 text-left bg-gray-100 w-1/5",children:"Resource ID"}),(0,s.jsx)("th",{className:"border-r border-black p-2 text-left bg-gray-100 w-1/4",children:"Leader Name & Contact Information"}),(0,s.jsx)("th",{className:"border-r border-black p-2 text-left bg-gray-100 w-1/6",children:"Total # of Persons"}),(0,s.jsx)("th",{className:"border-r border-black p-2 text-left bg-gray-100 w-1/4",children:"Reporting Location"}),(0,s.jsx)("th",{className:"p-2 text-left bg-gray-100",children:"Reporting Time"})]})}),(0,s.jsx)("tbody",{children:[{resourceId:"ERV 11181",crew:[{name:"Jake Gonzales"},{name:"Ben Knight"}],personnel:"FF/SA-ERV – 2",reportingLocation:"BRG - Church of the Palms\n3224 Bee Ridge Rd.\nSarasota Fl",reportingTime:"09:00",workAssignment:"***VEHICLE IS OUT OF SERVICE with a broken part.*** Crew, report to the kitchen at 9AM to pick up meals and deliver on a route to be assigned by your kitchen manager. The kitchen manager at BRG today is Dianne Heard (610-416-5238)."},{resourceId:"ERV 31082",crew:[{name:"Greg Camacho"},{name:"**Please sign the sign-in sheet"}],personnel:"FF/SA-ERV – 2",reportingLocation:"BRG - Church of the Palms\n3224 Bee Ridge Rd.\nSarasota Fl",reportingTime:"09:00",workAssignment:"Report to the kitchen at 9AM to pick up meals and deliver to clients on a route to be assigned by your kitchen manager. The kitchen manager at BRG today is Dianne Heard (610-416-5238)."},{resourceId:"ERV 34076",crew:[{name:"Blackshear, Kenneth"},{name:"Horning, James"},{name:"Ohno, Rosa"}],personnel:"FF/SA-ERV – 2",reportingLocation:"Stand by for Assignment",reportingTime:"10:30",workAssignment:"Stand by for assignment details from District 4 Feeding Coordinator"},{resourceId:"ERV 16619",crew:[{name:"Fredericksen, Rick"},{name:"Fredericksen, Jackie"}],personnel:"FF/SA-ERV – 2",reportingLocation:"Stand by for Assignment",reportingTime:"11:00",workAssignment:"Stand by for assignment details from District 4 Feeding Coordinator"},{resourceId:"ERV 34084",crew:[{name:"Traversa, Janice"},{name:"Crowell, John"}],personnel:"FF/SA-ERV – 2",reportingLocation:"Stand by for Assignment",reportingTime:"10:30",workAssignment:"Stand by for assignment details from District 4 Feeding Coordinator"}].map((e,t)=>(0,s.jsxs)(r.Fragment,{children:[(0,s.jsxs)("tr",{className:"border-b border-black",children:[(0,s.jsx)("td",{className:"border-r border-black p-2 align-top",rowSpan:2,children:(0,s.jsx)("div",{className:"font-semibold",children:e.resourceId})}),(0,s.jsx)("td",{className:"border-r border-black p-2",children:e.crew.map((e,t)=>(0,s.jsxs)("div",{className:"text-sm",children:["• ",e.name]},t))}),(0,s.jsx)("td",{className:"border-r border-black p-2 text-center",children:e.personnel}),(0,s.jsx)("td",{className:"border-r border-black p-2",children:(0,s.jsx)("div",{className:"text-xs whitespace-pre-wrap",children:e.reportingLocation})}),(0,s.jsx)("td",{className:"p-2 text-center",children:e.reportingTime})]}),(0,s.jsx)("tr",{className:"border-b border-black bg-gray-50",children:(0,s.jsxs)("td",{colSpan:4,className:"p-2",children:[(0,s.jsx)("div",{className:"font-semibold",children:"Work Assignment"}),(0,s.jsx)("div",{className:"text-sm",children:e.workAssignment})]})})]},t))})]})]}),(0,s.jsxs)("div",{className:"mt-8 border-t-2 border-black pt-4 flex justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-bold",children:"Prepared By:"})," Gary Pelletier",(0,s.jsx)("br",{}),"Information & Planning"]}),(0,s.jsx)("div",{className:"text-right",children:"Page 22 of 53"})]})]})}function x(){let[e,t]=(0,r.useState)([]);(0,r.useEffect)(()=>{t(m.getFacilities().filter(e=>"Feeding"===e.type||"Kitchen"===e.type||"ERV"===e.type).map(e=>{let t=m.getWorkAssignment(e.id);return{id:e.id,name:e.name,type:e.type,county:e.county||"Unknown",address:e.address,mealsPerDay:(null==t?void 0:t.mealsPerDay)||500,staffRequired:(null==t?void 0:t.staffRequired)||4,staffAssigned:(null==t?void 0:t.staffAssigned)||0}}))},[]);let a=e.length>0?e:[{id:"1",name:"ERV Unit 247",type:"Mobile",county:"Hillsborough",address:"",mealsPerDay:500,staffRequired:4,staffAssigned:3},{id:"2",name:"Community Center Kitchen",type:"Fixed",county:"Pinellas",address:"",mealsPerDay:750,staffRequired:6,staffAssigned:6}];return(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Work Assignments - Feeding"}),(0,s.jsxs)("table",{className:"w-full border-collapse",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-red-600 text-white",children:[(0,s.jsx)("th",{className:"border border-black p-2 text-left",children:"Site/Unit"}),(0,s.jsx)("th",{className:"border border-black p-2 text-center",children:"Type"}),(0,s.jsx)("th",{className:"border border-black p-2 text-center",children:"County"}),(0,s.jsx)("th",{className:"border border-black p-2 text-center",children:"Meals/Day"}),(0,s.jsx)("th",{className:"border border-black p-2 text-center",children:"Staff Req"}),(0,s.jsx)("th",{className:"border border-black p-2 text-center",children:"Staff Have"}),(0,s.jsx)("th",{className:"border border-black p-2 text-center",children:"Gap"})]})}),(0,s.jsx)("tbody",{children:a.map((e,t)=>{let a=(e.staffRequired||0)-(e.staffAssigned||0);return(0,s.jsxs)("tr",{className:t%2==0?"":"bg-gray-50",children:[(0,s.jsx)("td",{className:"border border-black p-2",children:e.name}),(0,s.jsx)("td",{className:"border border-black p-2 text-center",children:e.type}),(0,s.jsx)("td",{className:"border border-black p-2 text-center",children:e.county}),(0,s.jsx)("td",{className:"border border-black p-2 text-center",children:e.mealsPerDay||0}),(0,s.jsx)("td",{className:"border border-black p-2 text-center",children:e.staffRequired||0}),(0,s.jsx)("td",{className:"border border-black p-2 text-center",children:e.staffAssigned||0}),(0,s.jsx)("td",{className:"border border-black p-2 text-center font-bold ".concat(a>0?"text-red-600":""),children:a})]},e.id)})})]}),(0,s.jsx)("div",{className:"text-right mt-4 text-sm text-gray-600",children:"8 pages"})]})}function b(){return(0,s.jsxs)("div",{className:"p-4 space-y-6",children:[(0,s.jsx)("div",{className:"bg-gray-600 text-white p-2",children:(0,s.jsx)("h2",{className:"text-lg font-bold",children:"DRO – Government Operations"})}),(0,s.jsxs)("div",{className:"bg-gray-50 p-3 border border-gray-300",children:[(0,s.jsx)("h3",{className:"font-bold mb-2",children:"External Relations Leadership"}),(0,s.jsx)("p",{children:"AD External Relations – Sandi Hughes (615-663-6884)"})]}),(0,s.jsxs)("div",{className:"border border-black",children:[(0,s.jsx)("div",{className:"bg-gray-200 p-2 border-b border-black",children:(0,s.jsx)("h3",{className:"font-bold",children:"DRO – Government Operations Resources"})}),(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-black",children:[(0,s.jsx)("th",{className:"border-r border-black p-2 text-left bg-gray-100 w-1/4",children:"Resource ID"}),(0,s.jsx)("th",{className:"border-r border-black p-2 text-left bg-gray-100 w-1/4",children:"Leader Name & Contact Information"}),(0,s.jsx)("th",{className:"border-r border-black p-2 text-left bg-gray-100 w-1/6",children:"Total # of Persons"}),(0,s.jsx)("th",{className:"border-r border-black p-2 text-left bg-gray-100 w-1/4",children:"Reporting Location"}),(0,s.jsx)("th",{className:"p-2 text-left bg-gray-100",children:"Reporting Time"})]})}),(0,s.jsx)("tbody",{children:[{location:"Sarasota EOC",type:"(Virtual)",leader:"Michael Bunch",phone:"(615)417-3790",personnel:"",address:"6050 Porter Way, Sarasota, FL",assignment:"Staff EOC"},{location:"Hillsborough EOC",type:"(In-Person)",leader:"Jose Bueno",phone:"(813-295-4249)",personnel:"GO/SA – 1",address:"9450 E Columbus Drive, Tampa, FL 33619",assignment:"Staff EOC"},{location:"FL State EOC",type:"(In-Person)",leader:"Ryan Lock",phone:"(850-354-2342)",additionalStaff:[{name:"Candi Collyer",phone:"(209-968-1884)"}],personnel:"GO/SA – 1",address:"2555 Shumard Oak Blvd, Tallahassee, FL, 32399",assignment:"Staff EOC"},{location:"Citrus EOC",type:"(In-Person)",leader:"Randall Yeoman",phone:"(931-625-4261)",personnel:"GO/SA – 1",address:"3549 Saunders Way, Lecanto, FL 34461",assignment:"Staff EOC"}].map((e,t)=>{var a;return(0,s.jsxs)(r.Fragment,{children:[(0,s.jsxs)("tr",{className:"border-b border-black",children:[(0,s.jsxs)("td",{className:"border-r border-black p-2 align-top",rowSpan:2,children:[(0,s.jsx)("div",{className:"font-semibold",children:e.location}),(0,s.jsx)("div",{className:"text-sm",children:e.type})]}),(0,s.jsxs)("td",{className:"border-r border-black p-2",children:[(0,s.jsxs)("div",{children:["• ",e.leader]}),(0,s.jsx)("div",{className:"text-sm",children:e.phone}),null==(a=e.additionalStaff)?void 0:a.map((e,t)=>(0,s.jsxs)("div",{className:"mt-1",children:[(0,s.jsxs)("div",{children:["• ",e.name]}),(0,s.jsx)("div",{className:"text-sm",children:e.phone})]},t))]}),(0,s.jsx)("td",{className:"border-r border-black p-2 text-center",children:e.personnel}),(0,s.jsx)("td",{className:"border-r border-black p-2",children:(0,s.jsx)("div",{className:"text-sm",children:e.address})}),(0,s.jsx)("td",{className:"p-2 text-center"})]}),(0,s.jsx)("tr",{className:"border-b border-black bg-gray-50",children:(0,s.jsxs)("td",{colSpan:4,className:"p-2",children:[(0,s.jsx)("div",{className:"font-semibold",children:"Work Assignment"}),(0,s.jsx)("div",{children:e.assignment})]})})]},t)})})]})]})]})}function y(){return(0,s.jsxs)("div",{className:"p-4 space-y-6",children:[(0,s.jsx)("div",{className:"bg-gray-600 text-white p-2",children:(0,s.jsx)("h2",{className:"text-lg font-bold",children:"DRO – Damage Assessment"})}),(0,s.jsxs)("div",{className:"bg-gray-50 p-3 border border-gray-300",children:[(0,s.jsx)("h3",{className:"font-bold mb-2",children:"Operations Leadership"}),(0,s.jsx)("p",{children:"AD Operations – Jennifer Carkner (509-859-2374)"}),(0,s.jsx)("p",{children:"HQ Mass Care Chief – Brenda Bridges (760-987-5452)"}),(0,s.jsx)("p",{children:"Lead DA – Lee Seaman (720-237-3856)"})]}),(0,s.jsxs)("div",{className:"border border-black",children:[(0,s.jsx)("div",{className:"bg-gray-200 p-2 border-b border-black",children:(0,s.jsx)("h3",{className:"font-bold",children:"DRO – Damage Assessment Resources"})}),(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-black",children:[(0,s.jsx)("th",{className:"border-r border-black p-2 text-left bg-gray-100 w-1/5",children:"Resource ID"}),(0,s.jsx)("th",{className:"border-r border-black p-2 text-left bg-gray-100 w-2/5",children:"Leader Name & Contact Information"}),(0,s.jsx)("th",{className:"border-r border-black p-2 text-left bg-gray-100 w-1/5",children:"Total # of Persons"}),(0,s.jsx)("th",{className:"border-r border-black p-2 text-left bg-gray-100 w-1/4",children:"Reporting Location"}),(0,s.jsx)("th",{className:"p-2 text-left bg-gray-100",children:"Reporting Time"})]})}),(0,s.jsx)("tbody",{children:[{teamId:"Team 1",leader:"Steve Cotter",phone:"305-731-9239",personnel:{supervisors:1,assessors:2},county:"Columbia County",assignment:"Conducting Detailed Damage Assessment Observe utilizing DA workforce in Taylor county."},{teamId:"Team 2",leader:"Terry Hyde",phone:"830-743-7841",personnel:{supervisors:1,assessors:3,ebvLcv:10},county:"Sarasota County",assignment:"Conducting Detailed Damage Assessment Observe utilizing DA workforce in Taylor county."},{teamId:"Team 3",leader:"Bob Farr",phone:"231-388-0089",personnel:{supervisors:1,assessors:3},county:"St. Lucie County",assignment:""},{teamId:"Team 4",leader:"Jerry Salesburg",phone:"407-399-1572",personnel:{supervisors:1,assessors:1},county:"Palm Beach",assignment:"Conduct Detailed Damage Assessment Observe utilizing DA Workforce, LCV, and EBV workforce in Citrus, Pasco and Hernando counties."},{teamId:"Team 5",leader:"Lee Seaman",phone:"720-237-3856",personnel:{supervisors:1,assessors:3,ebvLcv:10},county:"Pinellas County",assignment:""},{teamId:"Team 6",leader:"Gary Dolser",phone:"720-771-3121",personnel:{supervisors:1,assessors:2,ebvLcv:10},county:"Hillsborough County",assignment:""}].map((e,t)=>(0,s.jsxs)(r.Fragment,{children:[(0,s.jsxs)("tr",{className:"border-b border-black",children:[(0,s.jsx)("td",{className:"border-r border-black p-2 align-top",rowSpan:2,children:(0,s.jsx)("div",{className:"font-semibold",children:e.teamId})}),(0,s.jsx)("td",{className:"border-r border-black p-2",children:(0,s.jsxs)("div",{children:["• ",e.leader," ",e.phone]})}),(0,s.jsxs)("td",{className:"border-r border-black p-2",children:[(0,s.jsxs)("div",{className:"text-sm",children:["DA/SV – ",e.personnel.supervisors]}),(0,s.jsxs)("div",{className:"text-sm",children:["DA/SA – ",e.personnel.assessors]}),e.personnel.ebvLcv&&(0,s.jsxs)("div",{className:"text-sm",children:["EBV/LCV – ",e.personnel.ebvLcv]})]}),(0,s.jsx)("td",{className:"border-r border-black p-2",children:e.county}),(0,s.jsx)("td",{className:"p-2"})]}),(0,s.jsx)("tr",{className:"border-b border-black bg-gray-50",children:(0,s.jsxs)("td",{colSpan:4,className:"p-2",children:[(0,s.jsx)("div",{className:"font-semibold",children:"Work Assignment"}),(0,s.jsx)("div",{children:e.assignment||"Conducting Detailed Damage Assessment"})]})})]},t))})]})]})]})}function f(){return(0,s.jsxs)("div",{className:"p-4 space-y-6",children:[(0,s.jsx)("div",{className:"bg-gray-600 text-white p-2",children:(0,s.jsx)("h2",{className:"text-lg font-bold",children:"DRO – Distribution of Emergency Supplies"})}),(0,s.jsxs)("div",{className:"bg-gray-50 p-3 border border-gray-300",children:[(0,s.jsx)("h3",{className:"font-bold mb-2",children:"Operations Leadership"}),(0,s.jsx)("p",{children:"AD Operations – Jennifer Carkner (509-859-2374)"}),(0,s.jsx)("p",{children:"HQ Mass Care Chief – Brenda Bridges (760-987-5452)"}),(0,s.jsx)("p",{children:"HQ Distribution Manager – Cynthia Woiderski (989-430-3526)"})]}),(0,s.jsxs)("div",{className:"border border-black",children:[(0,s.jsx)("div",{className:"bg-gray-200 p-2 border-b border-black",children:(0,s.jsx)("h3",{className:"font-bold",children:"DRO – Distribution of Emergency Supplies Resources"})}),(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-black",children:[(0,s.jsx)("th",{className:"border-r border-black p-2 text-left bg-gray-100 w-1/4",children:"Resource ID"}),(0,s.jsx)("th",{className:"border-r border-black p-2 text-left bg-gray-100 w-1/4",children:"Leader Name & Contact Information"}),(0,s.jsx)("th",{className:"border-r border-black p-2 text-left bg-gray-100 w-1/6",children:"Total # of Persons"}),(0,s.jsx)("th",{className:"border-r border-black p-2 text-left bg-gray-100 w-1/4",children:"Reporting Location"}),(0,s.jsx)("th",{className:"p-2 text-left bg-gray-100",children:"Reporting Time"})]})}),(0,s.jsx)("tbody",{children:[{resourceId:"ZONE 3 - MRV 31293",vehicleType:"MRV",location:"(Hillsborough)",leaders:[{name:"Kellie Coward",role:"EBV"},{name:"Cynthia Woiderski",phone:"(989-430-3526)"},{name:"Julio Medina"}],personnel:"DES/SA – 2",reportingLocation:"15340 Citrus County Drive, Dade City, FL 33523",reportingTime:"08:00",assignment:"Standby Team - serving community of Winterhaven"},{resourceId:"ZONE 3 - MRV 31299",vehicleType:"MRV",location:"(Lee County)",leaders:[{name:"Joseph Scott Brown",phone:"(440-281-6082)"},{name:"Chris Schepers",phone:"(270-993-6830)"}],personnel:"DES/SA – 2",reportingLocation:"15340 Citrus County Drive, Dade City, FL 33523",reportingTime:"08:00",assignment:"Standby Team - serving community of Bradenton"},{resourceId:"ZONE 3 - MRV 31453",vehicleType:"MRV",location:"(Lee)",leaders:[{name:"Anthony Lessa",phone:"(508-689-8018)"},{name:"Stanley Pierre Louis",phone:"(857-222-1096)"}],personnel:"DES/SA – 2",reportingLocation:"15340 Citrus County Drive, Dade City, FL 33523",reportingTime:"08:00",assignment:"Standby Team - serving community of St Petersburg"},{resourceId:"ZONE 3 - BOX TRUCK 517872 - 16'",vehicleType:"BOX TRUCK",location:"(Lee)",leaders:[],personnel:"",reportingLocation:"15340 Citrus County Drive, Dade City, FL 33523",reportingTime:"08:00",assignment:"Standby Team"},{resourceId:"ZONE 3 - BOX 810290 - 16'",vehicleType:"BOX",location:"(Polk)",leaders:[],personnel:"",reportingLocation:"15340 Citrus County Drive, Dade City, FL 33523",reportingTime:"08:00",assignment:""}].map((e,t)=>(0,s.jsxs)(r.Fragment,{children:[(0,s.jsxs)("tr",{className:"border-b border-black",children:[(0,s.jsxs)("td",{className:"border-r border-black p-2 align-top",rowSpan:2,children:[(0,s.jsx)("div",{className:"font-semibold text-sm",children:e.resourceId}),e.location&&(0,s.jsx)("div",{className:"text-xs",children:e.location})]}),(0,s.jsx)("td",{className:"border-r border-black p-2",children:e.leaders.map((e,t)=>(0,s.jsxs)("div",{className:"text-sm",children:["• ",e.name," ",e.role||"",e.phone&&(0,s.jsx)("div",{className:"ml-2 text-xs",children:e.phone})]},t))}),(0,s.jsx)("td",{className:"border-r border-black p-2 text-center",children:e.personnel}),(0,s.jsx)("td",{className:"border-r border-black p-2",children:(0,s.jsx)("div",{className:"text-xs",children:e.reportingLocation})}),(0,s.jsx)("td",{className:"p-2 text-center",children:e.reportingTime})]}),(0,s.jsx)("tr",{className:"border-b border-black bg-gray-50",children:(0,s.jsxs)("td",{colSpan:4,className:"p-2",children:[(0,s.jsx)("div",{className:"font-semibold",children:"Work Assignment"}),(0,s.jsx)("div",{children:e.assignment||"Standby Team"})]})})]},t))})]})]})]})}function j(){return(0,s.jsxs)("div",{className:"p-4 space-y-6",children:[(0,s.jsx)("div",{className:"bg-gray-600 text-white p-2",children:(0,s.jsx)("h2",{className:"text-lg font-bold",children:"DRO – Individual Disaster Care"})}),(0,s.jsxs)("div",{className:"bg-gray-50 p-3 border border-gray-300",children:[(0,s.jsx)("h3",{className:"font-bold mb-2",children:"Operations Leadership"}),(0,s.jsx)("p",{children:"AD Operations – Jennifer Carkner (509-859-2374)"}),(0,s.jsx)("p",{children:"HQ Mass Care Chief – Brenda Bridges (760-987-5452)"}),(0,s.jsx)("p",{children:"Lead DHS – Diane St. Denis (408-828-8352)"}),(0,s.jsx)("p",{children:"Lead DMH – Susan Gatzert-Snyder (610-731-1760)"})]}),(0,s.jsxs)("div",{className:"border border-black",children:[(0,s.jsx)("div",{className:"bg-gray-200 p-2 border-b border-black",children:(0,s.jsx)("h3",{className:"font-bold",children:"DRO – Individual Disaster Care Resources"})}),(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-black",children:[(0,s.jsx)("th",{className:"border-r border-black p-2 text-left bg-gray-100 w-1/5",children:"Resource ID"}),(0,s.jsx)("th",{className:"border-r border-black p-2 text-left bg-gray-100 w-1/4",children:"Leader Name & Contact Information"}),(0,s.jsx)("th",{className:"border-r border-black p-2 text-left bg-gray-100 w-1/5",children:"Total # of Persons"}),(0,s.jsx)("th",{className:"border-r border-black p-2 text-left bg-gray-100 w-1/4",children:"Reporting Location"}),(0,s.jsx)("th",{className:"p-2 text-left bg-gray-100",children:"Reporting Time"})]})}),(0,s.jsx)("tbody",{children:[{resourceId:"Staff Mental Health Support",leader:"Meghan Cole",phone:"(262-388-9777)",personnel:["DMH/SV – 1"],location:"assigned lodging",assignment:"Will handle responder illnesses and injuries\nProviding mental health support to responders"},{resourceId:"Disaster Mental Health",leader:"Susan Gatzert-Snyder",phone:"(610-731-1760)",personnel:["DMH/SV – 1"],location:"virtual",assignment:"Assisting clients and staff with mental health needs"},{resourceId:"DHS admin",leader:"Diane St. Denis",phone:"(408-828-8352)",personnel:[],location:"assigned lodging",assignment:"Assisting DHS MN in Orlando location to prepare for post-impact DHS response"},{resourceId:"Disaster Health Services",leader:"Diane St. Denis",phone:"(408-828-8352)",personnel:["DHS/SV – 1","DHS/SA – 1"],location:"virtual",assignment:"Providing disaster case work for client health services needs and Staff Health"},{resourceId:"Itinerating DHS, DMH,and DSC",leader:"Louise Olsheski",phone:"484-529-9147",personnel:["DMH/SV – 2","DMH/SA – 7","DHS/SV – 1","DHS/SA – 4","DSC/SV – 1","DSC/SA – 1"],location:"Shelters in zones 2-4, District A",assignment:"Providing Mental Health care to support clients and staff in shelters. Providing Spiritual Care Services to clients and staff in shelters. Providing Spiritual Care and Mental Health services to staff and clients at mobile feeding sites."}].map((e,t)=>(0,s.jsxs)(r.Fragment,{children:[(0,s.jsxs)("tr",{className:"border-b border-gray-50",children:[(0,s.jsx)("td",{className:"border-r border-black p-2 align-top",rowSpan:2,children:(0,s.jsx)("div",{className:"font-semibold text-sm",children:e.resourceId})}),(0,s.jsxs)("td",{className:"border-r border-black p-2",rowSpan:e.assignment.includes("\n")?1:2,children:[(0,s.jsxs)("div",{className:"text-sm",children:["• ",e.leader]}),(0,s.jsx)("div",{className:"text-xs ml-2",children:e.phone})]}),(0,s.jsx)("td",{className:"border-r border-black p-2",children:e.personnel.map((e,t)=>(0,s.jsx)("div",{className:"text-sm",children:e},t))}),(0,s.jsx)("td",{className:"border-r border-black p-2",children:(0,s.jsx)("div",{className:"text-sm",children:e.location})}),(0,s.jsx)("td",{className:"p-2"})]}),(0,s.jsx)("tr",{className:"border-b border-black bg-gray-50",children:(0,s.jsxs)("td",{colSpan:e.assignment.includes("\n")?4:3,className:"p-2",children:[(0,s.jsx)("div",{className:"font-semibold",children:"Work Assignment"}),(0,s.jsx)("div",{className:"whitespace-pre-wrap text-sm",children:e.assignment})]})})]},t))})]})]})]})}let v=[{id:"p001",name:"Virginia Mewborn",phone:"917-670-8334",email:"Virginia.Mewborn@redcross.org",position:"DRO Director",status:"deployed"},{id:"p002",name:"Jennie Sahagun",phone:"202-207-2057",email:"Jennie.Sahagun@redcross.org",position:"DRO Director",status:"available"},{id:"p003",name:"Ryan Lock",phone:"850-354-2342",email:"Ryan.Lock3@redcross.org",position:"RCCO",status:"deployed"},{id:"p004",name:"Janice Vannatta",phone:"601-325-3656",email:"Janice.Vannatta4@redcross.org",position:"Chief of Staff",status:"deployed"},{id:"p005",name:"Candi Collyer",phone:"209-968-1884",email:"Candi.Collyer@redcross.org",position:"SEOC Principal",status:"deployed"},{id:"p006",name:"Debbie Koch",phone:"786-570-9793",email:"Deborah.Koch@redcross.org",position:"EOL Chief",status:"deployed"},{id:"p007",name:"Janice Moran",phone:"407-375-2344",email:"Janice.Moran2@redcross.org",position:"Deputy EOL Chief",status:"deployed"},{id:"p008",name:"Alex Taylor",phone:"912-665-1070",email:"Alexandra.Taylor@redcross.org",position:"CAP Liaison",status:"deployed"},{id:"p009",name:"Kimberly Knights",phone:"713-806-1489",email:"Kimberly.Knights@redcross.org",position:"SAF Liaison",status:"available"},{id:"p010",name:"Amanda Cullison",phone:"727-422-2892",email:"Amanda.Cullison@redcross.org",position:"DAT Liaison CFL",status:"deployed"},{id:"p011",name:"Steve Dixon",phone:"850-878-6080",email:"Steve.Dixon3@redcross.org",position:"DAT Liaison NFL",status:"deployed"},{id:"p012",name:"Enrique Rivero",phone:"786-753-4267",email:"Enrique.Rivero@redcross.org",position:"DAT Liaison SFL",status:"deployed"},{id:"p013",name:"Jill Hoover",phone:"281-468-3077",email:"Jill.Hoover@redcross.org",position:"24 Hour / Staff Health",status:"deployed"},{id:"p014",name:"Bob Fitzgerald",phone:"518-645-3781",email:"Bob.Fitzgerald@redcross.org",position:"24 Hour / DHS",status:"deployed"},{id:"p015",name:"Patricia DAlessandro",phone:"319-404-2096",email:"Patricia.DAlessandro2@redcross.org",position:"Zone Coordinator-Zone 1",status:"deployed"},{id:"p016",name:"Rick Schou",phone:"980-721-8710",email:"Rick.Schou@redcross.org",position:"Zone Coordinator-Zone 2",status:"deployed"},{id:"p017",name:"Bene Hunter",phone:"941-224-3350",email:"Bene.Hunter2@redcross.org",position:"Zone Coordinator-Zone 3",status:"deployed"},{id:"p018",name:"Monica Rusconi",phone:"786-514-0044",email:"Monica.Rusconi@redcross.org",position:"District Director - District A",status:"deployed"},{id:"p019",name:"Brenda Bridges",phone:"760-987-5452",email:"brenda.bridges2@redcross.org",position:"HQ Mass Care Chief",status:"deployed"},{id:"p020",name:"Kelli Cameron",phone:"740-296-1654",email:"Kelli.Cameron3@redcross.org",position:"HQ Sheltering Coordinator",status:"deployed"},{id:"p021",name:"Trish Burnett",phone:"309-258-4920",email:"Trish.Burnett@redcross.org",position:"HQ Pet Liaison",status:"available"},{id:"p022",name:"Jamie Bonner",phone:"518-569-5038",email:"Jamie.Bonner@redcross.org",position:"HQ Feeding Manager",status:"deployed"},{id:"p023",name:"Luca Calvani",phone:"774-261-0581",email:"Luca.Calvani@redcross.org",position:"HQ DES Manager",status:"deployed"},{id:"p024",name:"Carol Janssens",phone:"425-327-7252",email:"Carol.Janssens@redcross.org",position:"HQ Reunification MN",status:"available"},{id:"p025",name:"Shanie Bockmann",phone:"308-850-9800",email:"Shanie.Bockmann@redcross.org",position:"HQ SRT MN",status:"available"},{id:"p026",name:"Pat Krebs",phone:"978-846-1888",email:"Victor.Souza@redcross.org",position:"Client Care Chief",status:"deployed"},{id:"p027",name:"Pat Krebs",phone:"614-395-4444",email:"Pat.Krebs@redcross.org",position:"ICCT Manager",status:"deployed"},{id:"p028",name:"Meghan Cole",phone:"262-388-9777",email:"colemeghan@outlook.com",position:"DMH Manager",status:"deployed"},{id:"p029",name:"Greg Gooch",phone:"417-312-1676",email:"Greg.Gooch@redcross.org",position:"DSC Manager",status:"deployed"},{id:"p030",name:"Ryan Weity",phone:"256-399-7076",email:"Ryan.Weity@redcross.org",position:"DI Manager",status:"available"},{id:"p031",name:"James Keck",phone:"619-451-8910",email:"James.Keck@redcross.org",position:"HQ WebEOC OPS Admin",status:"deployed"},{id:"p032",name:"Carolyn Burns",phone:"937-222-6711",email:"Carolyn.Burns@redcross.org",position:"FROST",status:"available"},{id:"p033",name:"Marvin Williams",phone:"931-237-3823",email:"Marvin.Williams2@redcross.org",position:"AD Logistics",status:"deployed"},{id:"p034",name:"Marty Samuels",phone:"571-587-1692",email:"Marty.Samuels@redcross.org",position:"Uber Connect",status:"available"},{id:"p035",name:"Margenia Hatfield",phone:"765-602-9133",email:"Margenia.Hatfield@redcross.org",position:"HQ Sourcing Manager",status:"deployed"},{id:"p036",name:"Lee Meyer",phone:"719-749-5672",email:"Lee.Meyer@redcross.org",position:"HQ Transportation Manager",status:"deployed"},{id:"p037",name:"Boo White",phone:"804-253-7276",email:"Ellen.White@redcross.org",position:"HQ Warehousing Manager",status:"deployed"},{id:"p038",name:"Tom Batson",phone:"928-580-8850",email:"Tom.Batson@redcross.org",position:"Fulfillment MN",status:"available"},{id:"p039",name:"John Ehresmann",phone:"507-581-0403",email:"John.Ehresmann@redcross.org",position:"DST Chief",status:"deployed"},{id:"p040",name:"Mike Weaver",phone:"555-123-4567",email:"Mike.Weaver@redcross.org",position:"Finance Chief",status:"available"},{id:"p041",name:"Sarah Johnson",phone:"555-234-5678",email:"Sarah.Johnson@redcross.org",position:"Budget Analyst",status:"available"},{id:"p042",name:"John Smith",phone:"555-345-6789",email:"John.Smith@redcross.org",position:"",status:"available"},{id:"p043",name:"Mary Davis",phone:"555-456-7890",email:"Mary.Davis@redcross.org",position:"",status:"available"},{id:"p044",name:"Robert Wilson",phone:"555-567-8901",email:"Robert.Wilson@redcross.org",position:"",status:"available"},{id:"p045",name:"Jennifer Brown",phone:"555-678-9012",email:"Jennifer.Brown@redcross.org",position:"",status:"available"}],N=["DRO Director","DRO Director (OFF)","RCCO","Chief of Staff","SEOC Principal","EOL Chief","Deputy EOL Chief","CAP Liaison","SAF Liaison","DAT Liaison CFL","DAT Liaison NFL","DAT Liaison SFL","24 Hour / Lodging","24 Hour / Disaster Mental Health","24 Hour / Staff Health (Illness and Injury)","24 Hour / Staffing","24 Hour / DHS (Client Health Needs)","24 Hour / Transportation","24 Hour / Fulfillment Line","Tampa Shuttle","24 Hour / DST Helpline","AD Operations","DAD Operations","Zone Coordinator-Zone 1","Zone Coordinator-Zone 2","Zone Coordinator-Zone 3","District Director - District A","HQ Mass Care Chief","HQ Sheltering Coordinator","HQ Pet Liaison","HQ Feeding Manager","HQ DES Manager","HQ Reunification MN","HQ SRT MN","Client Care Chief","ICCT Manager","DHS Manager","DMH Manager","DSC Manager","DI Manager","HQ WebEOC OPS Admin","FROST","AD Logistics","Uber Connect","HQ Logistics Chief","HQ Sourcing Manager","HQ Facilities Manager","HQ Transportation Manager","HQ Warehousing Manager","In-Kind-Donations Manager","Fulfillment MN","DST Chief","National Fleet Operations (NFO)","Finance Chief","Budget Analyst","Cost Unit Leader","Procurement Unit Leader","Planning Chief","Resource Unit Leader","Situation Unit Leader","Documentation Unit Leader","Demobilization Unit Leader"],C=[{id:"line-lodging",category:"24 Hour Lines",title:"24 Hour / Lodging"},{id:"line-dmh",category:"24 Hour Lines",title:"24 Hour / Disaster Mental Health"},{id:"line-health",category:"24 Hour Lines",title:"24 Hour / Staff Health (Illness and Injury)"},{id:"line-staffing",category:"24 Hour Lines",title:"24 Hour / Staffing"},{id:"line-dhs",category:"24 Hour Lines",title:"24 Hour / DHS (Client Health Needs)"},{id:"line-transport",category:"24 Hour Lines",title:"24 Hour / Transportation"},{id:"line-fulfillment",category:"24 Hour Lines",title:"24 Hour / Fulfillment Line"},{id:"line-shuttle",category:"24 Hour Lines",title:"Tampa Shuttle"},{id:"line-dst",category:"24 Hour Lines",title:"24 Hour / DST Helpline"},{id:"cmd-dro",category:"Command",title:"DRO Director",reportsTo:void 0},{id:"cmd-dro2",category:"Command",title:"DRO Director",reportsTo:void 0},{id:"cmd-rcco",category:"Command",title:"RCCO",reportsTo:"cmd-dro"},{id:"cmd-cos",category:"Command",title:"Chief of Staff",reportsTo:"cmd-dro"},{id:"cmd-seoc",category:"Command",title:"SEOC Principal",reportsTo:"cmd-dro"},{id:"cmd-eol",category:"Command",title:"EOL Chief",reportsTo:"cmd-dro"},{id:"cmd-deol",category:"Command",title:"Deputy EOL Chief",reportsTo:"cmd-eol"},{id:"cmd-cap",category:"Command",title:"CAP Liaison",reportsTo:"cmd-cos"},{id:"cmd-saf",category:"Command",title:"SAF Liaison",reportsTo:"cmd-cos"},{id:"cmd-dat-cfl",category:"Command",title:"DAT Liaison CFL",reportsTo:"cmd-cos"},{id:"cmd-dat-nfl",category:"Command",title:"DAT Liaison NFL",reportsTo:"cmd-cos"},{id:"cmd-dat-sfl",category:"Command",title:"DAT Liaison SFL",reportsTo:"cmd-cos"},{id:"ops-ad",category:"Operations",title:"AD Operations",reportsTo:"cmd-dro"},{id:"ops-dad1",category:"Operations",title:"DAD Operations",reportsTo:"ops-ad"},{id:"ops-dad2",category:"Operations",title:"DAD Operations",reportsTo:"ops-ad"},{id:"ops-zone1",category:"Operations",title:"Zone Coordinator-Zone 1",reportsTo:"ops-ad"},{id:"ops-zone2",category:"Operations",title:"Zone Coordinator-Zone 2",reportsTo:"ops-ad"},{id:"ops-zone3",category:"Operations",title:"Zone Coordinator-Zone 3",reportsTo:"ops-ad"},{id:"ops-district",category:"Operations",title:"District Director - District A",reportsTo:"ops-zone1"},{id:"ops-mass",category:"Operations",title:"HQ Mass Care Chief",reportsTo:"ops-ad"},{id:"ops-shelter",category:"Operations",title:"HQ Sheltering Coordinator",reportsTo:"ops-mass"},{id:"ops-pet",category:"Operations",title:"HQ Pet Liaison",reportsTo:"ops-mass"},{id:"ops-feeding",category:"Operations",title:"HQ Feeding Manager",reportsTo:"ops-mass"},{id:"ops-des",category:"Operations",title:"HQ DES Manager",reportsTo:"ops-mass"},{id:"ops-reunify",category:"Operations",title:"HQ Reunification MN",reportsTo:"ops-mass"},{id:"ops-srt",category:"Operations",title:"HQ SRT MN",reportsTo:"ops-mass"},{id:"ops-client",category:"Operations",title:"Client Care Chief",reportsTo:"ops-ad"},{id:"ops-icct",category:"Operations",title:"ICCT Manager",reportsTo:"ops-client"},{id:"ops-dhs",category:"Operations",title:"DHS Manager",reportsTo:"ops-client"},{id:"ops-dmh",category:"Operations",title:"DMH Manager",reportsTo:"ops-client"},{id:"ops-dsc",category:"Operations",title:"DSC Manager",reportsTo:"ops-client"},{id:"ops-di",category:"Operations",title:"DI Manager",reportsTo:"ops-client"},{id:"ops-webeoc",category:"Operations",title:"HQ WebEOC OPS Admin",reportsTo:"ops-ad"},{id:"ops-frost",category:"Operations",title:"FROST",reportsTo:"ops-ad"},{id:"log-ad",category:"Logistics Section",title:"AD Logistics",reportsTo:"cmd-dro"},{id:"log-uber",category:"Logistics Section",title:"Uber Connect",reportsTo:"log-ad"},{id:"log-chief",category:"Logistics Section",title:"HQ Logistics Chief",reportsTo:"log-ad"},{id:"log-source",category:"Logistics Section",title:"HQ Sourcing Manager",reportsTo:"log-chief"},{id:"log-facilities",category:"Logistics Section",title:"HQ Facilities Manager",reportsTo:"log-chief"},{id:"log-transport",category:"Logistics Section",title:"HQ Transportation Manager",reportsTo:"log-chief"},{id:"log-warehouse",category:"Logistics Section",title:"HQ Warehousing Manager",reportsTo:"log-chief"},{id:"log-donations",category:"Logistics Section",title:"In-Kind-Donations Manager",reportsTo:"log-chief"},{id:"log-fulfill",category:"Logistics Section",title:"Fulfillment MN",reportsTo:"log-chief"},{id:"log-dst",category:"Logistics Section",title:"DST Chief",reportsTo:"log-ad"},{id:"log-nfo",category:"Logistics Section",title:"National Fleet Operations (NFO)",reportsTo:"log-transport"}];function w(){let[e,t]=(0,r.useState)(C),[a,n]=(0,r.useState)(null),[i,o]=(0,r.useState)(""),[l,d]=(0,r.useState)(null),[c,p]=(0,r.useState)(!1),[h,g]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=m.getContactRoster();e&&e.length>0&&t(C.map(t=>{let a=e.find(e=>e.id===t.id);return a?{...t,...a}:t}))},[]);let u=(a,s,r)=>{let n=e.map(e=>e.id===a?{...e,[s]:r,isCustom:!0,personnelId:void 0}:e);t(n),m.saveContactRoster(n)},x=e.reduce((e,t)=>(e[t.category]||(e[t.category]=[]),e[t.category].push(t),e),{});return(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("div",{className:"border-b-2 border-black pb-2 mb-4",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex gap-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-bold",children:"Incident Name:"})," FLOCOM"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-bold",children:"DR Number:"})," 220-25"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-bold",children:"Operational Period:"})," 18:00 20/10/2024 to 17:59 21/10/2024"]})]})}),(0,s.jsx)("h2",{className:"text-xl font-bold text-blue-600 mb-4",children:"Contact Roster DRO HQ"}),(0,s.jsxs)("div",{className:"bg-yellow-50 border border-yellow-300 p-2 mb-4 text-sm",children:[(0,s.jsx)("strong",{children:"Instructions:"})," Click on any name field to edit or select from database. Phone and email fields auto-save as you type. All changes are saved automatically."]}),Object.entries(x).map(r=>{let[p,x]=r;return(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsxs)("table",{className:"w-full border-collapse border-2 border-black",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-200",children:[(0,s.jsx)("th",{className:"border border-black p-2 text-left",style:{width:c?"22%":"25%"},children:p}),(0,s.jsx)("th",{className:"border border-black p-2 text-left",style:{width:"20%"},children:"Name"}),(0,s.jsx)("th",{className:"border border-black p-2 text-center",style:{width:"15%"},children:"Phone"}),(0,s.jsx)("th",{className:"border border-black p-2 text-left",style:{width:"20%"},children:"Email (@redcross.org)"}),(0,s.jsx)("th",{className:"border border-black p-2 text-left",style:{width:c?"17%":"20%"},children:"Reports To"}),c&&(0,s.jsx)("th",{className:"border border-black p-2 text-center",style:{width:"8%"},children:"Actions"})]})}),(0,s.jsx)("tbody",{children:x.map(r=>{var p,x;return(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"border border-black p-2",children:h===r.id?(0,s.jsx)("select",{value:r.title,onChange:a=>{let s=e.map(e=>e.id===r.id?{...e,title:a.target.value}:e);t(s),m.saveContactRoster(s)},onBlur:()=>g(null),className:"w-full px-1 py-0.5 border rounded text-sm font-medium",autoFocus:!0,children:Object.values(N).flat().map(e=>(0,s.jsx)("option",{value:e,children:e},e))}):(0,s.jsx)("div",{className:"font-medium ".concat(c?"cursor-pointer hover:bg-blue-50 px-1 rounded":""),onClick:()=>c&&g(r.id),children:r.title})}),(0,s.jsx)("td",{className:"border border-black p-2",children:(0,s.jsxs)("div",{className:"relative",children:[a===r.id?(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)("input",{type:"text",value:r.name||"",onChange:e=>u(r.id,"name",e.target.value),onBlur:()=>n(null),placeholder:"Enter name...",className:"flex-1 px-1 py-0.5 border rounded text-sm",autoFocus:!0}),(0,s.jsx)("button",{onMouseDown:e=>e.preventDefault(),onClick:()=>{n(null),d(r.id)},className:"px-2 py-0.5 bg-blue-500 text-white rounded text-xs hover:bg-blue-600",children:"Select"})]}):(0,s.jsx)("div",{className:"cursor-pointer hover:bg-blue-50 px-1 rounded min-h-[24px]",onClick:()=>n(r.id),children:r.name||(0,s.jsx)("span",{className:"text-gray-400",children:"Click to assign..."})}),l===r.id&&(0,s.jsxs)("div",{className:"absolute z-10 mt-1 w-64 bg-white border border-gray-300 rounded-md shadow-lg",children:[(0,s.jsx)("div",{className:"p-2 border-b",children:(0,s.jsx)("input",{type:"text",placeholder:"Search personnel...",value:i,onChange:e=>o(e.target.value),className:"w-full px-2 py-1 border rounded text-sm",autoFocus:!0})}),(0,s.jsx)("div",{className:"max-h-48 overflow-y-auto",children:(function(e){let t=e.toLowerCase();return v.filter(e=>e.name.toLowerCase().includes(t)||e.email.toLowerCase().includes(t)||e.phone.includes(t))})(i).map(a=>(0,s.jsxs)("div",{className:"px-3 py-2 hover:bg-blue-50 cursor-pointer text-sm",onClick:()=>((a,s)=>{let r=e.map(e=>e.id===a?{...e,personnelId:s.id,name:s.name,phone:s.phone,email:s.email,isCustom:!1}:e);t(r),m.saveContactRoster(r),d(null),o(""),n(null)})(r.id,a),children:[(0,s.jsx)("div",{className:"font-medium",children:a.name}),(0,s.jsx)("div",{className:"text-xs text-gray-600",children:a.phone})]},a.id))}),(0,s.jsxs)("div",{className:"p-2 border-t flex justify-between",children:[(0,s.jsx)("button",{onClick:()=>{d(null),o("")},className:"text-xs text-gray-500 hover:text-gray-700",children:"Close"}),r.name&&(0,s.jsx)("button",{onClick:()=>(a=>{let s=e.map(e=>{if(e.id===a){let{personnelId:t,name:a,phone:s,email:r,isCustom:n,...i}=e;return i}return e});t(s),m.saveContactRoster(s)})(r.id),className:"text-xs text-red-500 hover:text-red-700",children:"Clear"})]})]})]})}),(0,s.jsx)("td",{className:"border border-black p-2 text-center",children:(0,s.jsx)("input",{type:"tel",placeholder:"Phone...",value:r.phone||"",onChange:e=>u(r.id,"phone",e.target.value),className:"w-full px-1 py-0.5 border rounded text-sm text-center ".concat(r.phone?"text-blue-600 underline cursor-pointer":""),onClick:e=>{r.phone&&(window.location.href="tel:".concat(r.phone))}})}),(0,s.jsx)("td",{className:"border border-black p-2",children:(0,s.jsx)("input",{type:"text",placeholder:"Email...",value:(p=r.email)?p.replace("@redcross.org",""):"",onChange:e=>{var t;return u(r.id,"email",(t=e.target.value)&&!t.includes("@")?t+"@redcross.org":t)},className:"w-full px-1 py-0.5 border rounded text-sm ".concat(r.email?"text-blue-600 underline cursor-pointer":""),onClick:e=>{r.email&&(window.location.href="mailto:".concat(r.email))}})}),(0,s.jsx)("td",{className:"border border-black p-2",children:(0,s.jsxs)("select",{value:r.reportsTo||"none",onChange:a=>((a,s)=>{let r=e.map(e=>e.id===a?{...e,reportsTo:"none"===s?void 0:s}:e);t(r),m.saveContactRoster(r)})(r.id,a.target.value),className:"w-full px-1 py-0.5 border rounded text-sm",children:[(0,s.jsx)("option",{value:"none",children:"-- Select --"}),(x=r.id,!e.find(e=>e.id===x)?[]:e.filter(e=>e.id!==x&&e.name&&e.reportsTo!==x)).map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.name," (",e.title,")"]},e.id))]})}),c&&(0,s.jsx)("td",{className:"border border-black p-2 text-center",children:(0,s.jsx)("button",{onClick:()=>{if(confirm("Delete position: ".concat(r.title,"?"))){let a=e.filter(e=>e.id!==r.id);t(a),m.saveContactRoster(a)}},className:"px-2 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700",children:"Delete"})})]},r.id)})})]})},p)}),(0,s.jsxs)("div",{className:"mt-6 flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>p(!c),className:"px-4 py-2 rounded text-white ".concat(c?"bg-green-600 hover:bg-green-700":"bg-blue-600 hover:bg-blue-700"),children:c?"Done Editing":"Edit Mode"}),c&&(0,s.jsx)("button",{onClick:()=>{let a={id:"custom-".concat(Date.now()),category:"Command",title:"New Position",reportsTo:"cmd-dro"},s=[...e,a];t(s),m.saveContactRoster(s),g(a.id)},className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",children:"Add Position"}),(0,s.jsx)("button",{onClick:()=>{let t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),a=URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download="contact-roster.json",s.click()},className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Export Roster"}),(0,s.jsx)("button",{onClick:()=>{confirm("This will clear all roster entries. Are you sure?")&&(t(C),m.saveContactRoster(C))},className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Clear All"})]}),(0,s.jsxs)("div",{className:"mt-8 border-t-2 border-black pt-4 flex justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-bold",children:"Prepared By:"})," Gary Pelletier",(0,s.jsx)("br",{}),"Information & Planning"]}),(0,s.jsx)("div",{className:"text-right",children:"Page 5 of 53"})]})]})}var S=a(1482),D=a(4984),E=a(6546);a(4669);let A=r.memo(e=>{let{data:t}=e,a="Command"===t.category?"bg-gradient-to-br from-red-100 to-red-200 border-red-600":"Operations"===t.category?"bg-gradient-to-br from-blue-100 to-blue-200 border-blue-600":"Logistics Section"===t.category?"bg-gradient-to-br from-green-100 to-green-200 border-green-600":"24 Hour Lines"===t.category?"bg-gradient-to-br from-purple-100 to-purple-200 border-purple-600":"bg-gradient-to-br from-gray-100 to-gray-200 border-gray-600";return(0,s.jsxs)("div",{className:"relative px-4 py-3 shadow-xl rounded-lg border-2 ".concat(a," min-w-[200px] max-w-[250px]"),children:[(0,s.jsx)(S.h7,{type:"target",position:S.yX.Top,id:"top",style:{background:"#555",width:8,height:8}}),(0,s.jsx)("div",{className:"text-xs font-bold text-gray-700 uppercase tracking-wide",children:t.title}),t.name&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"text-sm font-bold mt-1",children:t.name}),t.phone&&(0,s.jsxs)("a",{href:"tel:".concat(t.phone),className:"text-xs text-blue-700 hover:underline block mt-1 font-semibold",onClick:e=>e.stopPropagation(),children:["\uD83D\uDCDE ",t.phone]}),t.email&&(0,s.jsxs)("a",{href:"mailto:".concat(t.email),className:"text-xs text-blue-700 hover:underline block",onClick:e=>e.stopPropagation(),children:["✉️ ",t.email.replace("@redcross.org","")]})]}),(0,s.jsx)(S.h7,{type:"source",position:S.yX.Bottom,id:"bottom",style:{background:"#555",width:8,height:8}})]})});A.displayName="CustomNode";let k={custom:A};function P(){let[e,t,a]=(0,S.ck)([]),[n,i,o]=(0,S.fM)([]),[l,d]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=m.getContactRoster();e&&e.length>0?c(e):p(),d(!1)},[]);let c=e=>{let a=e.filter(e=>e.name);if(0===a.length)return void p();let s={0:[],1:[],2:[],3:[],4:[]};a.forEach(e=>{e.title.includes("DRO Director")?s[0].push(e):!e.reportsTo||s[0].some(t=>t.id===e.reportsTo)?s[1].push(e):s[1].some(t=>t.id===e.reportsTo)?s[2].push(e):s[2].some(t=>t.id===e.reportsTo)?s[3].push(e):s[4].push(e)});let r=[],n=[];Object.entries(s).forEach(e=>{let[t,s]=e,i=parseInt(t),o=-(280*s.length/2)+140;s.forEach((e,t)=>{r.push({id:e.id,type:"custom",position:{x:o+280*t,y:150*i+50},data:{title:e.title,name:e.name,phone:e.phone,email:e.email,category:e.category}}),e.reportsTo&&a.find(t=>t.id===e.reportsTo)&&n.push({id:"".concat(e.reportsTo,"-").concat(e.id),source:e.reportsTo,target:e.id,sourceHandle:"bottom",targetHandle:"top",type:"smoothstep",animated:!1,style:{stroke:"#9ca3af",strokeWidth:2},markerEnd:{type:S.TG.ArrowClosed,color:"#9ca3af"}})})}),t(r),i(n)},p=()=>{t([{id:"1",type:"custom",position:{x:0,y:0},data:{title:"DRO Director",name:"Virginia Mewborn",phone:"917-670-8334",email:"Virginia.Mewborn@redcross.org",category:"Command"}},{id:"2",type:"custom",position:{x:-300,y:150},data:{title:"AD Operations",name:"Patricia DAlessandro",phone:"319-404-2096",email:"Patricia.DAlessandro@redcross.org",category:"Operations"}},{id:"3",type:"custom",position:{x:0,y:150},data:{title:"Chief of Staff",name:"Janice Vannatta",phone:"601-325-3656",email:"Janice.Vannatta@redcross.org",category:"Command"}},{id:"4",type:"custom",position:{x:300,y:150},data:{title:"AD Logistics",name:"Marvin Williams",phone:"931-237-3823",email:"Marvin.Williams@redcross.org",category:"Logistics Section"}},{id:"5",type:"custom",position:{x:-450,y:300},data:{title:"Zone 1 Coordinator",name:"Rick Schou",phone:"980-721-8710",category:"Operations"}},{id:"6",type:"custom",position:{x:-150,y:300},data:{title:"Mass Care Chief",name:"Brenda Bridges",phone:"760-987-5452",category:"Operations"}},{id:"7",type:"custom",position:{x:150,y:300},data:{title:"Transportation Manager",name:"Lee Meyer",phone:"719-749-5672",category:"Logistics Section"}},{id:"8",type:"custom",position:{x:450,y:300},data:{title:"Warehousing Manager",name:"Boo White",phone:"804-253-7276",category:"Logistics Section"}}]),i([{id:"e1-2",source:"1",target:"2",sourceHandle:"bottom",targetHandle:"top",type:"smoothstep",animated:!1},{id:"e1-3",source:"1",target:"3",sourceHandle:"bottom",targetHandle:"top",type:"smoothstep",animated:!1},{id:"e1-4",source:"1",target:"4",sourceHandle:"bottom",targetHandle:"top",type:"smoothstep",animated:!1},{id:"e2-5",source:"2",target:"5",sourceHandle:"bottom",targetHandle:"top",type:"smoothstep",animated:!1},{id:"e2-6",source:"2",target:"6",sourceHandle:"bottom",targetHandle:"top",type:"smoothstep",animated:!1},{id:"e4-7",source:"4",target:"7",sourceHandle:"bottom",targetHandle:"top",type:"smoothstep",animated:!1},{id:"e4-8",source:"4",target:"8",sourceHandle:"bottom",targetHandle:"top",type:"smoothstep",animated:!1}])};return l?(0,s.jsx)("div",{className:"p-8 text-center",children:"Loading organizational chart..."}):(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("div",{className:"border-b-2 border-black pb-2 mb-4",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex gap-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-bold",children:"Incident Name:"})," FLOCOM"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-bold",children:"DR Number:"})," 220-25"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-bold",children:"Operational Period:"})," 18:00 20/10/2024 to 17:59 21/10/2024"]})]})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-center text-blue-600 mb-4",children:"Incident Organization Chart"}),(0,s.jsxs)("div",{className:"bg-yellow-50 border border-yellow-300 p-2 mb-4 text-sm",children:[(0,s.jsx)("strong",{children:"Interactive Chart:"})," Drag to pan, scroll to zoom, click phone numbers to call. This chart auto-generates from the Contact Roster data."]}),(0,s.jsx)("div",{className:"border-2 border-gray-300 rounded-lg bg-gray-50",style:{width:"100%",height:"600px",position:"relative"},children:(0,s.jsxs)(S.Gc,{nodes:e,edges:n,onNodesChange:a,onEdgesChange:o,nodeTypes:k,connectionMode:S.WZ.Loose,fitView:!0,attributionPosition:"bottom-left",children:[(0,s.jsx)(D.H,{}),(0,s.jsx)(E.V,{gap:12,size:1}),(0,s.jsx)(S.Zk,{position:"top-right",className:"bg-white p-2 rounded shadow",children:(0,s.jsxs)("div",{className:"text-xs space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-red-200 border border-red-600 rounded"}),(0,s.jsx)("span",{children:"Command"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-blue-200 border border-blue-600 rounded"}),(0,s.jsx)("span",{children:"Operations"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-green-200 border border-green-600 rounded"}),(0,s.jsx)("span",{children:"Logistics"})]})]})})]})}),(0,s.jsxs)("div",{className:"mt-8 border-t-2 border-black pt-4 flex justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-bold",children:"Prepared By:"})," Gary Pelletier",(0,s.jsx)("br",{}),"Information & Planning"]}),(0,s.jsx)("div",{className:"text-right",children:"Page 8 of 53"})]})]})}function I(){let[e,t]=(0,r.useState)([]),[a,n]=(0,r.useState)([]),[i,o]=(0,r.useState)(!1),[l,d]=(0,r.useState)(null),[c,p]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=m.getPriorities?m.getPriorities():null,a=m.getObjectives?m.getObjectives():null;e&&0!==e.length?t(e.map((e,t)=>({id:String(t+1),text:e,order:t+1}))):t([{id:"1",text:"Life Safety - Ensure safety of all responders and affected populations",order:1},{id:"2",text:"Incident Stabilization - Provide shelter, feeding, and essential services",order:2},{id:"3",text:"Property/Environmental Conservation - Support recovery efforts",order:3}]),a&&0!==a.length?n(a.map((e,t)=>({id:String(t+1),text:e,order:t+1}))):n([{id:"1",text:"Maintain 24/7 shelter operations at all active sites",order:1},{id:"2",text:"Provide 3 meals per day to all shelter residents",order:2},{id:"3",text:"Complete damage assessments in priority zones",order:3},{id:"4",text:"Process client assistance requests within 48 hours",order:4},{id:"5",text:"Coordinate with state/federal partners on resource requests",order:5}])},[]);let h=(a,s)=>{let r=e.findIndex(e=>e.id===a);if("up"===s&&0===r||"down"===s&&r===e.length-1)return;let n=[...e],i="up"===s?r-1:r+1;[n[r],n[i]]=[n[i],n[r]],n.forEach((e,t)=>e.order=t+1),t(n)},g=(e,t)=>{let s=a.findIndex(t=>t.id===e);if("up"===t&&0===s||"down"===t&&s===a.length-1)return;let r=[...a],i="up"===t?s-1:s+1;[r[s],r[i]]=[r[i],r[s]],r.forEach((e,t)=>e.order=t+1),n(r)};return(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("div",{className:"bg-gray-700 text-white p-3 flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold",children:"Incident Priorities and Objectives"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>o(!i),className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm",children:i?"View Mode":"Edit Mode"}),i&&(0,s.jsx)("button",{onClick:()=>{if(m.savePriorities){let t=e.map(e=>e.text);m.savePriorities(t)}if(m.saveObjectives){let e=a.map(e=>e.text);m.saveObjectives(e)}o(!1),d(null),p(null)},className:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 text-sm",children:"Save All"})]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"border-2 border-black rounded-lg overflow-hidden",children:[(0,s.jsxs)("div",{className:"bg-red-600 text-white p-3 flex justify-between items-center",children:[(0,s.jsx)("h3",{className:"font-bold text-lg",children:"Incident Priorities"}),i&&(0,s.jsx)("button",{onClick:()=>{let a={id:"priority-".concat(Date.now()),text:"New Priority",order:e.length+1};t([...e,a]),d(a.id)},className:"px-2 py-1 bg-white text-red-600 rounded text-sm font-bold hover:bg-gray-100",children:"+ Add"})]}),(0,s.jsx)("div",{className:"p-4 bg-white",children:(0,s.jsx)("ol",{className:"space-y-3",children:e.sort((e,t)=>e.order-t.order).map((a,r)=>(0,s.jsxs)("li",{className:"flex items-start gap-2",children:[(0,s.jsxs)("span",{className:"font-bold text-red-600 mt-1",children:[r+1,"."]}),(0,s.jsx)("div",{className:"flex-1",children:l===a.id?(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsx)("textarea",{value:a.text,onChange:e=>{var s,r;return s=a.id,r=e.target.value,void t(e=>e.map(e=>e.id===s?{...e,text:r}:e))},onBlur:()=>d(null),className:"flex-1 px-2 py-1 border rounded resize-none",rows:2,autoFocus:!0})}):(0,s.jsx)("div",{className:"".concat(i?"cursor-pointer hover:bg-gray-50 p-1 rounded":""),onClick:()=>i&&d(a.id),children:a.text})}),i&&!l&&(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)("button",{onClick:()=>h(a.id,"up"),className:"px-1 text-gray-600 hover:text-black",disabled:0===r,children:"↑"}),(0,s.jsx)("button",{onClick:()=>h(a.id,"down"),className:"px-1 text-gray-600 hover:text-black",disabled:r===e.length-1,children:"↓"}),(0,s.jsx)("button",{onClick:()=>(a=>{let s=e.filter(e=>e.id!==a);s.forEach((e,t)=>e.order=t+1),t(s)})(a.id),className:"px-1 text-red-600 hover:text-red-800",children:"✕"})]})]},a.id))})})]}),(0,s.jsxs)("div",{className:"border-2 border-black rounded-lg overflow-hidden",children:[(0,s.jsxs)("div",{className:"bg-blue-600 text-white p-3 flex justify-between items-center",children:[(0,s.jsx)("h3",{className:"font-bold text-lg",children:"Operational Period Objectives"}),i&&(0,s.jsx)("button",{onClick:()=>{let e={id:"objective-".concat(Date.now()),text:"New Objective",order:a.length+1};n([...a,e]),p(e.id)},className:"px-2 py-1 bg-white text-blue-600 rounded text-sm font-bold hover:bg-gray-100",children:"+ Add"})]}),(0,s.jsx)("div",{className:"p-4 bg-white",children:(0,s.jsx)("ol",{className:"space-y-3",children:a.sort((e,t)=>e.order-t.order).map((e,t)=>(0,s.jsxs)("li",{className:"flex items-start gap-2",children:[(0,s.jsxs)("span",{className:"font-bold text-blue-600 mt-1",children:[t+1,"."]}),(0,s.jsx)("div",{className:"flex-1",children:c===e.id?(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsx)("textarea",{value:e.text,onChange:t=>{var a,s;return a=e.id,s=t.target.value,void n(e=>e.map(e=>e.id===a?{...e,text:s}:e))},onBlur:()=>p(null),className:"flex-1 px-2 py-1 border rounded resize-none",rows:2,autoFocus:!0})}):(0,s.jsx)("div",{className:"".concat(i?"cursor-pointer hover:bg-gray-50 p-1 rounded":""),onClick:()=>i&&p(e.id),children:e.text})}),i&&!c&&(0,s.jsxs)("div",{className:"flex gap-1",children:[(0,s.jsx)("button",{onClick:()=>g(e.id,"up"),className:"px-1 text-gray-600 hover:text-black",disabled:0===t,children:"↑"}),(0,s.jsx)("button",{onClick:()=>g(e.id,"down"),className:"px-1 text-gray-600 hover:text-black",disabled:t===a.length-1,children:"↓"}),(0,s.jsx)("button",{onClick:()=>(e=>{let t=a.filter(t=>t.id!==e);t.forEach((e,t)=>e.order=t+1),n(t)})(e.id),className:"px-1 text-red-600 hover:text-red-800",children:"✕"})]})]},e.id))})})]})]})]})}var T=a(556);T.Ik({id:T.Yj().uuid(),type:T.Yj(),schemaVersion:T.ai(),actorId:T.Yj(),deviceId:T.Yj(),sessionId:T.Yj(),operationId:T.Yj().optional(),timestamp:T.ai(),sequence:T.ai().optional(),payload:T.bz(),causationId:T.Yj().uuid().optional(),correlationId:T.Yj().uuid().optional(),hash:T.Yj().optional(),previousHash:T.Yj().optional(),syncStatus:T.k5(["local","pending","synced","failed"]).default("local"),syncAttempts:T.ai().default(0),syncError:T.Yj().optional(),migratedFrom:T.ai().optional()});var O=function(e){return e.OPERATION_CREATED="operation.created",e.OPERATION_UPDATED="operation.updated",e.OPERATION_CLOSED="operation.closed",e.OPERATION_ARCHIVED="operation.archived",e.REGION_SELECTED="geography.region_selected",e.COUNTY_ADDED="geography.county_added",e.COUNTY_REMOVED="geography.county_removed",e.CHAPTERS_CALCULATED="geography.chapters_calculated",e.PERSON_ASSIGNED="roster.person_assigned",e.PERSON_UNASSIGNED="roster.person_unassigned",e.POSITION_CHANGED="roster.position_changed",e.PERSON_IMPORTED="roster.person_imported",e.IAP_CREATED="iap.created",e.IAP_SECTION_UPDATED="iap.section_updated",e.IAP_PUBLISHED="iap.published",e.IAP_ARCHIVED="iap.archived",e.IAP_VERSION_CREATED="iap.version_created",e.IAP_SNAPSHOT_CREATED="iap.snapshot_created",e.IAP_OFFICIAL_SNAPSHOT="iap.official_snapshot",e.FACILITY_CREATED="facility.created",e.FACILITY_UPDATED="facility.updated",e.FACILITY_STATUS_CHANGED="facility.status_changed",e.FACILITY_PERSONNEL_ASSIGNED="facility.personnel_assigned",e.FACILITY_PERSONNEL_REMOVED="facility.personnel_removed",e.FACILITY_RESOURCE_ADDED="facility.resource_added",e.FACILITY_RESOURCE_REMOVED="facility.resource_removed",e.WORK_ASSIGNMENT_CREATED="work_assignment.created",e.WORK_ASSIGNMENT_UPDATED="work_assignment.updated",e.WORK_ASSIGNMENT_COMPLETED="work_assignment.completed",e.WORK_ASSIGNMENT_CANCELLED="work_assignment.cancelled",e.DIRECTORS_MESSAGE_UPDATED="iap.directors_message_updated",e.CONTACT_ROSTER_UPDATED="iap.contact_roster_updated",e.ORG_CHART_UPDATED="iap.org_chart_updated",e.DAILY_SCHEDULE_UPDATED="iap.daily_schedule_updated",e.PRIORITIES_UPDATED="iap.priorities_updated",e.PHOTO_ATTACHED="iap.photo_attached",e.ANCILLARY_CONTENT_UPDATED="iap.ancillary_content_updated",e.MEALS_SERVED_INCREMENT="metrics.meals_served.increment",e.SHELTERED_COUNT_SET="metrics.sheltered_count.set",e.SUPPLIES_DISTRIBUTED_ADD="metrics.supplies_distributed.add",e.USER_JOINED_OPERATION="collab.user_joined",e.USER_LEFT_OPERATION="collab.user_left",e.USER_STARTED_EDITING="collab.editing_started",e.USER_STOPPED_EDITING="collab.editing_stopped",e.SETUP_STEP_COMPLETED="system.setup_step_completed",e.SETUP_COMPLETED="system.setup_completed",e.ONLINE_MODE="system.online_mode",e.OFFLINE_MODE="system.offline_mode",e.SYNC_STARTED="system.sync_started",e.SYNC_COMPLETED="system.sync_completed",e.SYNC_FAILED="system.sync_failed",e.CONFLICT_DETECTED="system.conflict_detected",e.CONFLICT_RESOLVED="system.conflict_resolved",e.SNAPSHOT_CREATED="data.snapshot_created",e.MIGRATION_APPLIED="data.migration_applied",e.REDACTION_APPLIED="data.redaction_applied",e.DATA_IMPORTED="data.imported",e.DATA_EXPORTED="data.exported",e}({});let R=T.Ik({operationNumber:T.Yj(),operationName:T.Yj(),disasterType:T.Yj(),activationLevel:T.Yj(),drNumber:T.Yj().optional()}),_=T.Ik({countyId:T.Yj(),countyName:T.Yj(),state:T.Yj(),fips:T.Yj(),region:T.Yj()}),L=T.Ik({personId:T.Yj(),position:T.Yj(),section:T.Yj(),startDate:T.Yj(),reportingTo:T.Yj().optional()}),M=T.Ik({location:T.Yj(),count:T.ai().positive(),date:T.Yj(),mealType:T.k5(["breakfast","lunch","dinner","snack"])}),F=T.Ik({iapNumber:T.ai(),operationalPeriodStart:T.Yj(),operationalPeriodEnd:T.Yj(),preparedBy:T.Yj()}),H=T.Ik({iapId:T.Yj(),versionId:T.Yj(),snapshotType:T.k5(["official_6pm","manual","scheduled"]),isLocked:T.zM().default(!1),distributionList:T.YO(T.Yj()).optional()}),B=T.Ik({facilityType:T.Yj(),name:T.Yj(),address:T.Yj(),city:T.Yj(),state:T.Yj(),zip:T.Yj(),county:T.Yj(),primaryContact:T.Yj(),primaryPhone:T.Yj(),serviceLines:T.YO(T.Yj())}),q=T.Ik({facilityId:T.Yj(),personId:T.Yj(),position:T.Yj(),section:T.Yj(),startTime:T.Yj(),isLeader:T.zM().default(!1),reportingTo:T.Yj().optional()}),U=T.Ik({facilityId:T.Yj(),title:T.Yj(),description:T.Yj(),priority:T.k5(["high","medium","low"]),assignedTo:T.YO(T.Yj()),dueDate:T.Yj().optional(),estimatedHours:T.ai().optional()}),W=T.Ik({iapId:T.Yj(),content:T.Ik({html:T.Yj(),plainText:T.Yj()}),lastEditedBy:T.Yj()}),G={"operation.created":R,"geography.county_added":_,"roster.person_assigned":L,"metrics.meals_served.increment":M,"iap.created":F,"iap.snapshot_created":H,"facility.created":B,"facility.personnel_assigned":q,"work_assignment.created":U,"iap.directors_message_updated":W,"iap.contact_roster_updated":T.Ik({iapId:T.Yj(),section:T.k5(["command","operations","planning","logistics","finance","external"]),contacts:T.YO(T.Ik({position:T.Yj(),name:T.Yj(),phone:T.Yj(),email:T.Yj(),alternatePhone:T.Yj().optional()}))}),"iap.photo_attached":T.Ik({iapId:T.Yj(),filename:T.Yj(),caption:T.Yj(),location:T.Yj().optional(),photographer:T.Yj(),isCoverPhoto:T.zM().default(!1),displayOrder:T.ai().default(0)})};function V(){return"undefined"!=typeof crypto&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}var Y=a(3278);class z extends Y.Ay{constructor(e){super(e),this.version(1).stores({events:"id, type, operationId, timestamp, [operationId+timestamp], syncStatus, correlationId",outbox:"++sequence, eventId, status, retryCount, nextRetryAt",inbox:"++sequence, eventId, operationId, timestamp, processed",operations:"id, status, createdAt",roster:"id, operationId, personId, [operationId+personId]",geography:"id, operationId, countyId, [operationId+countyId]",iap:"id, operationId, iapNumber, [operationId+iapNumber]",metrics:"id, operationId, date, type, [operationId+date+type]",snapshots:"id, operationId, timestamp, type",cache:"key, expiresAt"})}}class J{setOperation(e){this.operationId=e}async appendEvent(e){await this.db.transaction("rw",this.db.events,this.db.outbox,async()=>{await this.db.events.add(e);let t={eventId:e.id,event:e,status:"pending",retryCount:0,maxRetries:5,nextRetryAt:Date.now(),createdAt:Date.now()};await this.db.outbox.add(t)})}async getEvents(e,t){return t?await this.db.events.where("[operationId+timestamp]").between([e,t],[e,1/0]).toArray():await this.db.events.where("operationId").equals(e).toArray()}async getPendingOutbox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=Date.now();return await this.db.outbox.where("status").equals("pending").filter(e=>e.nextRetryAt<=t).limit(e).toArray()}async updateOutboxStatus(e,t,a){let s=await this.db.outbox.where("eventId").equals(e).first();if(!s)return;let r={status:t};"sent"===t?r.sentAt=Date.now():"failed"===t&&(r.retryCount=s.retryCount+1,r.lastError=a,r.nextRetryAt=Date.now()+1e3*Math.pow(2,s.retryCount),r.retryCount>=s.maxRetries?r.status="failed":r.status="pending"),await this.db.outbox.where("eventId").equals(e).modify(r)}async addToInbox(e){let t={eventId:e.id,event:e,operationId:e.operationId,timestamp:e.timestamp,processed:!1};await this.db.inbox.add(t)}async processInbox(e){let t=0,a=0;for(let s of(await this.db.inbox.where("processed").equals(0).sortBy("timestamp")))try{await e(s.event),await this.db.inbox.where("eventId").equals(s.eventId).modify({processed:!0,processedAt:Date.now()}),t++}catch(e){await this.db.inbox.where("eventId").equals(s.eventId).modify({error:String(e)}),a++}return{processed:t,failed:a}}async createSnapshot(e,t,a){let s=await this.getEvents(e),r={id:crypto.randomUUID(),operationId:e,timestamp:Date.now(),eventSequence:s.length,type:t,data:a,hash:this.generateHash(a)};await this.db.snapshots.add(r)}async getLatestSnapshot(e){return await this.db.snapshots.where("operationId").equals(e).reverse().sortBy("timestamp").then(e=>e[0])}async cache(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,s={key:e,value:t,expiresAt:Date.now()+1e3*a,createdAt:Date.now()};await this.db.cache.put(s)}async getCached(e){let t=await this.db.cache.get(e);return t?t.expiresAt<Date.now()?(await this.db.cache.delete(e),null):t.value:null}async cleanup(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,t=Date.now()-24*e*36e5;await this.db.outbox.where("status").equals("sent").filter(e=>e.sentAt<t).delete(),await this.db.inbox.where("processed").equals(1).filter(e=>e.processedAt<t).delete(),await this.db.cache.where("expiresAt").below(Date.now()).delete()}async getActiveOperations(){return await this.db.operations.where("status").equals("active").toArray()}async getOperation(e){return await this.db.operations.get(e)}async saveOperation(e){await this.db.operations.put(e)}async getStorageEstimate(){if("storage"in navigator&&"estimate"in navigator.storage){let e=await navigator.storage.estimate();return{usage:e.usage||0,quota:e.quota||0}}return{usage:0,quota:0}}async clearAll(){await this.db.delete(),await this.db.open()}generateHash(e){return btoa(JSON.stringify(e)).substring(0,32)}constructor(e="disaster_ops_v3"){this.db=new z(e)}}let K=null;class Q{static getInstance(){return Q.instance||(Q.instance=new Q),Q.instance}async emit(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=function(e,t,a){var s;let r,n,i={id:V(),type:e,schemaVersion:1,actorId:a.actorId,deviceId:((r=localStorage.getItem("disaster_ops_device_id"))||(r=V(),localStorage.setItem("disaster_ops_device_id",r)),r),sessionId:((n=sessionStorage.getItem("disaster_ops_session_id"))||(n=V(),sessionStorage.setItem("disaster_ops_session_id",n)),n),operationId:a.operationId,timestamp:Date.now(),payload:t,causationId:a.causationId,correlationId:a.correlationId||V(),syncStatus:"local",syncAttempts:0},o=G[e];return o&&o.parse(t),i.hash=btoa(JSON.stringify({id:(s=i).id,type:s.type,actorId:s.actorId,timestamp:s.timestamp,payload:s.payload})).substring(0,32),i}(e,t,{actorId:this.getCurrentUserId(),...a});return await this.localStore.appendEvent(s),await this.notify(s),s.id}on(e,t){return this.handlers.has(e)||this.handlers.set(e,new Set),this.handlers.get(e).add(t),()=>{var a;null==(a=this.handlers.get(e))||a.delete(t)}}onAll(e){return this.wildcardHandlers.add(e),()=>{this.wildcardHandlers.delete(e)}}onMany(e,t){let a=e.map(e=>this.on(e,t));return()=>{a.forEach(e=>e())}}once(e){return new Promise(t=>{let a=this.on(e,e=>{a(),t(e)})})}off(e,t){var a;null==(a=this.handlers.get(e))||a.delete(t)}offAll(e){e?this.handlers.delete(e):(this.handlers.clear(),this.wildcardHandlers.clear())}async notify(e){let t=this.handlers.get(e.type);if(t)for(let a of t)try{await a(e)}catch(t){console.error("Handler error for ".concat(e.type,":"),t)}for(let t of this.wildcardHandlers)try{await t(e)}catch(e){console.error("Wildcard handler error:",e)}}async replay(e,t,a){for(let s of(await this.localStore.getEvents(e,t)))a?await a(s):await this.notify(s)}getCurrentUserId(){return localStorage.getItem("disaster_ops_user_id")||"anonymous"}constructor(){this.localStore=(K||(K=new J),K),this.handlers=new Map,this.wildcardHandlers=new Set}}let Z=Q.getInstance();var X=a(5704);class ${async connect(){return new Promise((e,t)=>{let a=indexedDB.open(this.dbName,this.version);a.onerror=()=>t(a.error),a.onsuccess=()=>{this.db=a.result,e()},a.onupgradeneeded=e=>{let t=e.target.result;if(!t.objectStoreNames.contains("operations")){let e=t.createObjectStore("operations",{keyPath:"id"});e.createIndex("status","status",{unique:!1}),e.createIndex("created_at","created_at",{unique:!1})}if(!t.objectStoreNames.contains("events")){let e=t.createObjectStore("events",{keyPath:"id",autoIncrement:!0});e.createIndex("sync_status","sync_status",{unique:!1}),e.createIndex("timestamp","timestamp",{unique:!1}),e.createIndex("type","type",{unique:!1})}if(!t.objectStoreNames.contains("roster")){let e=t.createObjectStore("roster",{keyPath:"id"});e.createIndex("operation_id","operation_id",{unique:!1}),e.createIndex("position","position",{unique:!1})}if(!t.objectStoreNames.contains("geography")){let e=t.createObjectStore("geography",{keyPath:"id"});e.createIndex("operation_id","operation_id",{unique:!1}),e.createIndex("county_fips","county_fips",{unique:!1})}if(!t.objectStoreNames.contains("iap")){let e=t.createObjectStore("iap",{keyPath:"id"});e.createIndex("operation_id","operation_id",{unique:!1}),e.createIndex("iap_number","iap_number",{unique:!1}),e.createIndex("status","status",{unique:!1})}if(!t.objectStoreNames.contains("facilities")){let e=t.createObjectStore("facilities",{keyPath:"id"});e.createIndex("operation_id","operation_id",{unique:!1}),e.createIndex("facility_type","facility_type",{unique:!1}),e.createIndex("status","status",{unique:!1}),e.createIndex("county","county",{unique:!1})}if(!t.objectStoreNames.contains("iap_snapshots")){let e=t.createObjectStore("iap_snapshots",{keyPath:"id"});e.createIndex("iap_id","iap_id",{unique:!1}),e.createIndex("snapshot_type","snapshot_type",{unique:!1}),e.createIndex("snapshot_time","snapshot_time",{unique:!1})}if(!t.objectStoreNames.contains("work_assignments")){let e=t.createObjectStore("work_assignments",{keyPath:"id"});e.createIndex("facility_id","facility_id",{unique:!1}),e.createIndex("assigned_to","assigned_to",{unique:!1}),e.createIndex("status","status",{unique:!1}),e.createIndex("due_date","due_date",{unique:!1})}t.objectStoreNames.contains("cache")||t.createObjectStore("cache",{keyPath:"key"}).createIndex("expires_at","expires_at",{unique:!1})}})}async disconnect(){this.db&&(this.db.close(),this.db=null)}async query(e,t){return this.db?new Promise(a=>{let s,r=this.db.transaction([e],"readonly").objectStore(e);(s=(null==t?void 0:t.index)&&(null==t?void 0:t.value)?r.index(t.index).getAll(t.value):(null==t?void 0:t.id)?r.get(t.id):r.getAll()).onsuccess=()=>{a({data:s.result,error:null,source:"temporary"})},s.onerror=()=>{a({data:null,error:s.error,source:"temporary"})}}):{data:null,error:Error("Database not connected"),source:"temporary"}}async execute(e,t,a){if(!this.db)throw console.error("[TemporaryDatabase] Database not connected in execute method"),Error("Database not connected");return new Promise((s,r)=>{try{let n;console.log("[TemporaryDatabase] Creating transaction for ".concat(e," with operation ").concat(t));let i=this.db.transaction([e],"readwrite").objectStore(e);switch(t){case"add":console.log("[TemporaryDatabase] Adding data to ".concat(e,":"),a),n=i.add(a);break;case"put":n=i.put(a);break;case"delete":n=i.delete(a)}n.onsuccess=()=>{console.log("[TemporaryDatabase] ".concat(t," operation successful on ").concat(e)),s()},n.onerror=()=>{console.error("[TemporaryDatabase] ".concat(t," operation failed on ").concat(e,":"),n.error),r(n.error)}}catch(e){console.error("[TemporaryDatabase] Error in execute method:",e),r(e)}})}async transaction(e){if(!this.db)throw Error("Database not connected");let t=[...new Set(e.map(e=>e.store))],a=this.db.transaction(t,"readwrite");return new Promise((t,s)=>{a.oncomplete=()=>t(),a.onerror=()=>s(a.error),e.forEach(e=>{let{store:t,operation:s,data:r}=e,n=a.objectStore(t);switch(s){case"add":n.add(r);break;case"put":n.put(r);break;case"delete":n.delete(r)}})})}isConnected(){return null!==this.db}constructor(e,t){this.db=null,this.dbName=e,this.version=t}}class ee{static getInstance(e){if(!ee.instance){if(!e)throw Error("DatabaseManager must be initialized with config");ee.instance=new ee(e)}return ee.instance}async initialize(){try{await this.temporaryDb.connect(),this.permanentDb&&this.startSync(),Z.on(O.ONLINE_MODE,()=>this.handleOnline()),Z.on(O.OFFLINE_MODE,()=>this.handleOffline()),console.log("DatabaseManager initialized successfully")}catch(e){throw console.error("Failed to initialize DatabaseManager:",e),e}}async query(e,t,a){if(!(null==a?void 0:a.preferPermanent)){let a=await this.temporaryDb.query(e,t);if(null!==a.data)return a}return this.permanentDb&&this.permanentDb.isConnected()?await this.permanentDb.query(e,t):{data:null,error:null,source:"temporary"}}async write(e,t,a){await this.temporaryDb.execute(e,t,a),this.queueForSync({collection:e,operation:t,data:a,timestamp:Date.now()}),Z.emit(O.DATA_IMPORTED,{collection:e,operation:t,dataId:a.id})}async batchWrite(e){let t=e.map(e=>({store:e.collection,operation:e.operation,data:e.data}));await this.temporaryDb.transaction(t),e.forEach(e=>{this.queueForSync({...e,timestamp:Date.now()})})}async appendEvent(e){try{console.log("[DatabaseManager] appendEvent called with:",e),console.log("[DatabaseManager] Ensuring database connection..."),await this.temporaryDb.connect(),console.log("[DatabaseManager] Executing add operation on events store"),await this.temporaryDb.execute("events","add",e),console.log("[DatabaseManager] Event stored successfully"),this.queueForSync({collection:"events",operation:"add",data:e,timestamp:Date.now()}),Z.emit(e.type,e.payload,{correlationId:e.id})}catch(e){throw console.error("[DatabaseManager] Error in appendEvent:",e),e}}async getEventsByType(e){return(await this.temporaryDb.query("events",{index:"type",value:e})).data||[]}getSyncStatus(){return{...this.syncStatus}}async syncNow(){if(this.syncStatus.isSyncing)return void console.log("Sync already in progress");await this.performSync()}queueForSync(e){this.temporaryDb.execute("events","add",{...e,sync_status:"pending"}),this.syncStatus.pendingChanges++}async performSync(){if(this.permanentDb&&this.permanentDb.isConnected()){this.syncStatus.isSyncing=!0,Z.emit(O.SYNC_STARTED,{pendingChanges:this.syncStatus.pendingChanges});try{var e;let t=await this.temporaryDb.query("events",{index:"sync_status",value:"pending"});if(t.data&&t.data.length>0){for(let e of(console.log("Syncing ".concat(t.data.length," events")),t.data))e.sync_status="synced",await this.temporaryDb.execute("events","put",e);this.syncStatus.pendingChanges=0,this.syncStatus.lastSync=new Date}Z.emit(O.SYNC_COMPLETED,{syncedCount:(null==(e=t.data)?void 0:e.length)||0})}catch(e){console.error("Sync failed:",e),this.syncStatus.syncErrors.push(e),Z.emit(O.SYNC_FAILED,{error:e})}finally{this.syncStatus.isSyncing=!1}}}startSync(){this.syncInterval=setInterval(()=>{this.performSync()},3e4),this.performSync()}stopSync(){this.syncInterval&&(clearInterval(this.syncInterval),this.syncInterval=null)}async handleOnline(){console.log("Database going online"),this.permanentDb&&(await this.permanentDb.connect(),this.startSync())}async handleOffline(){console.log("Database going offline"),this.stopSync(),this.permanentDb&&await this.permanentDb.disconnect()}async clearTemporary(){for(let t of(await indexedDB.databases())){var e;(null==(e=t.name)?void 0:e.startsWith("disaster_ops_"))&&indexedDB.deleteDatabase(t.name)}}async exportData(){let e=["operations","roster","geography","iap","facilities","iap_snapshots","work_assignments","events"],t={};for(let a of e){let e=await this.temporaryDb.query(a);t[a]=e.data}return Z.emit(O.DATA_EXPORTED,{timestamp:Date.now(),collections:e.length}),t}async importData(e){let t=[];for(let[a,s]of Object.entries(e))if(Array.isArray(s))for(let e of s)t.push({collection:a,operation:"put",data:e});await this.batchWrite(t),Z.emit(O.DATA_IMPORTED,{timestamp:Date.now(),itemCount:t.length})}constructor(e){this.permanentDb=null,this.syncStatus={lastSync:null,pendingChanges:0,isSyncing:!1,syncErrors:[]},this.syncInterval=null,this.temporaryDb=new $(e.temporary.dbName,e.temporary.version),e.permanent.enabled&&e.permanent.url&&console.log("Permanent database will be configured with Supabase"),this.initialize()}}class et{static getInstance(){return et.instance||(et.instance=new et),et.instance}async ensureClientSideInit(){if(!this.db){try{this.db=ee.getInstance()}catch(e){this.db=ee.getInstance({permanent:{enabled:!1},temporary:{dbName:"disaster_ops_v3",version:1}})}this.setupEventListeners()}if(!this.db)throw Error("Database not available on server-side rendering")}async setCurrentOperation(e){this.currentOperationId=e,await Z.emit(O.ONLINE_MODE,{operation_id:e,timestamp:new Date().toISOString()})}getCurrentOperationId(){return this.currentOperationId}async createOperation(e){let t=this.generateId(),a={...e,id:t,created_at:new Date,updated_at:new Date,created_by:this.getCurrentUserId()};return await this.db.write("operations","add",a),await this.emitChange("insert","operations",t,null,a),t}async getOperations(){return await this.ensureClientSideInit(),(await this.db.query("operations")).data||[]}async getDailySchedule(e){await this.ensureClientSideInit();let t=e||this.currentOperationId;if(!t)throw Error("No operation context");return((await this.db.query("daily_schedule",{index:"operation_id",value:t})).data||[]).sort((e,t)=>e.time.localeCompare(t.time))}async updateDailySchedule(e){let t={...e,updated_at:new Date,created_by:this.getCurrentUserId()},a=(await this.db.query("daily_schedule",{id:e.id})).data;await this.db.write("daily_schedule","put",t),await this.emitChange("update","daily_schedule",e.id,a,t),this.notifyTableListeners("daily_schedule"),this.notifyRecordListeners("daily_schedule:".concat(e.id),t)}async addDailyScheduleEntry(e){let t=this.generateId(),a={...e,id:t,operation_id:e.operation_id||this.currentOperationId,created_at:new Date,updated_at:new Date,created_by:this.getCurrentUserId()};return await this.db.write("daily_schedule","add",a),await this.emitChange("insert","daily_schedule",t,null,a),this.notifyTableListeners("daily_schedule"),t}async deleteDailyScheduleEntry(e){let t=(await this.db.query("daily_schedule",{id:e})).data;await this.db.write("daily_schedule","delete",e),await this.emitChange("delete","daily_schedule",e,t,null),this.notifyTableListeners("daily_schedule")}async getFacilities(e,t){let a=e||this.currentOperationId;if(!a)throw Error("No operation context");return(await this.db.query("facilities",t?{index:"facility_type",value:t}:{index:"operation_id",value:a})).data||[]}async updateFacility(e){let t={...e,updated_at:new Date,created_by:this.getCurrentUserId()},a=(await this.db.query("facilities",{id:e.id})).data;await this.db.write("facilities","put",t),await this.emitChange("update","facilities",e.id,a,t),this.notifyTableListeners("facilities"),this.notifyRecordListeners("facility:".concat(e.id),t)}async addFacility(e){let t=this.generateId(),a={...e,id:t,operation_id:e.operation_id||this.currentOperationId,created_at:new Date,updated_at:new Date,created_by:this.getCurrentUserId()};return await this.db.write("facilities","add",a),await this.emitChange("insert","facilities",t,null,a),this.notifyTableListeners("facilities"),t}async getPersonnel(e){let t=e||this.currentOperationId;if(!t)throw Error("No operation context");return(await this.db.query("personnel",{index:"operation_id",value:t})).data||[]}async getPersonnelAssignments(e,t){let a=e||this.currentOperationId;if(!a)throw Error("No operation context");return(await this.db.query("personnel_assignments",t?{index:"facility_id",value:t}:{index:"operation_id",value:a})).data||[]}async updatePersonnelAssignment(e){let t={...e,updated_at:new Date,created_by:this.getCurrentUserId()},a=(await this.db.query("personnel_assignments",{id:e.id})).data;await this.db.write("personnel_assignments","put",t),await this.emitChange("update","personnel_assignments",e.id,a,t),this.notifyTableListeners("personnel_assignments"),this.notifyRecordListeners("assignment:".concat(e.id),t)}async getWorkAssignments(e,t){let a=e||this.currentOperationId;if(!a)throw Error("No operation context");return(await this.db.query("work_assignments",t?{index:"facility_id",value:t}:{index:"operation_id",value:a})).data||[]}async updateWorkAssignment(e){let t={...e,updated_at:new Date,created_by:this.getCurrentUserId()},a=(await this.db.query("work_assignments",{id:e.id})).data;await this.db.write("work_assignments","put",t),await this.emitChange("update","work_assignments",e.id,a,t),this.notifyTableListeners("work_assignments")}async addWorkAssignment(e){let t=this.generateId(),a={...e,id:t,operation_id:e.operation_id||this.currentOperationId,created_at:new Date,updated_at:new Date,created_by:this.getCurrentUserId()};return await this.db.write("work_assignments","add",a),await this.emitChange("insert","work_assignments",t,null,a),this.notifyTableListeners("work_assignments"),t}async getGaps(e,t,a){let s,r=e||this.currentOperationId;if(!r)throw Error("No operation context");return s=t?{index:"facility_id",value:t}:a?{index:"gap_type",value:a}:{index:"operation_id",value:r},(await this.db.query("gaps",s)).data||[]}async updateGap(e){let t={...e,updated_at:new Date,created_by:this.getCurrentUserId()},a=(await this.db.query("gaps",{id:e.id})).data;await this.db.write("gaps","put",t),await this.emitChange("update","gaps",e.id,a,t),this.notifyTableListeners("gaps")}async addGap(e){let t=this.generateId(),a={...e,id:t,operation_id:e.operation_id||this.currentOperationId,created_at:new Date,updated_at:new Date,created_by:this.getCurrentUserId()};return await this.db.write("gaps","add",a),await this.emitChange("insert","gaps",t,null,a),this.notifyTableListeners("gaps"),t}subscribeToTable(e,t){return this.changeListeners.has(e)||this.changeListeners.set(e,new Set),this.changeListeners.get(e).add(t),()=>{var a;null==(a=this.changeListeners.get(e))||a.delete(t)}}subscribeToRecord(e,t){return this.recordListeners.has(e)||this.recordListeners.set(e,new Set),this.recordListeners.get(e).add(t),()=>{var a;null==(a=this.recordListeners.get(e))||a.delete(t)}}setupEventListeners(){Z.on(O.DATA_IMPORTED,e=>{var t;console.log("[MasterDataService] Data change detected:",e),(null==(t=e.payload)?void 0:t.collection)&&this.notifyTableListeners(e.payload.collection)})}async emitChange(e,t,a,s,r){let n={type:e,table:t,record_id:a,old_data:s,new_data:r,user_id:this.getCurrentUserId(),timestamp:new Date,correlation_id:this.generateId()};await this.db.appendEvent({id:this.generateId(),type:O.DATA_IMPORTED,payload:n,timestamp:Date.now(),sync_status:"pending"}),await Z.emit(O.DATA_IMPORTED,n)}notifyTableListeners(e){let t=this.changeListeners.get(e);t&&this.refreshTableData(e).then(a=>{t.forEach(t=>{try{t(a)}catch(t){console.error("Error in table listener for ".concat(e,":"),t)}})})}notifyRecordListeners(e,t){let a=this.recordListeners.get(e);a&&a.forEach(a=>{try{a(t)}catch(t){console.error("Error in record listener for ".concat(e,":"),t)}})}async refreshTableData(e){try{return(await this.db.query(e)).data||[]}catch(t){return console.error("Error refreshing data for ".concat(e,":"),t),[]}}generateId(){return"id-"+Date.now()+"-"+Math.random().toString(36).substr(2,9)}getCurrentUserId(){return localStorage.getItem("disaster_ops_user_id")||"anonymous"}constructor(){this.currentOperationId=null,this.changeListeners=new Map,this.recordListeners=new Map;try{this.db=ee.getInstance()}catch(e){this.db=ee.getInstance({permanent:{enabled:!1},temporary:{dbName:"disaster_ops_v3",version:1}})}this.setupEventListeners()}}function ea(){return et.getInstance()}async function es(e){let t=ea();await t.setCurrentOperation(e),console.log("[MasterDataService] Initialized with operation:",e)}function er(e,t){let[a,s]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[o,l]=(0,r.useState)(null),[d,c]=(0,r.useState)(null),p=(0,r.useRef)(null),h=(0,r.useCallback)(async()=>{try{let a;i(!0),l(null);let r=ea();switch(e){case"daily_schedule":a=await r.getDailySchedule(t);break;case"facilities":a=await r.getFacilities(t);break;case"personnel":a=await r.getPersonnel(t);break;case"personnel_assignments":a=await r.getPersonnelAssignments(t);break;case"work_assignments":a=await r.getWorkAssignments(t);break;case"gaps":a=await r.getGaps(t);break;case"operations":a=await r.getOperations();break;default:throw Error("Unsupported table: ".concat(e))}s(a),c(new Date)}catch(t){console.error("Error loading ".concat(e,":"),t),l(t)}finally{i(!1)}},[e,t]);(0,r.useEffect)(()=>(h(),p.current=ea().subscribeToTable(e,t=>{console.log("[useMasterData] Received update for ".concat(e,":"),t),s(t),c(new Date),l(null)}),()=>{p.current&&(p.current(),p.current=null)}),[e,t,h]);let m=(0,r.useCallback)(async t=>{try{l(null);let a=ea();switch(e){case"daily_schedule":await a.updateDailySchedule(t);break;case"facilities":await a.updateFacility(t);break;case"personnel_assignments":await a.updatePersonnelAssignment(t);break;case"work_assignments":await a.updateWorkAssignment(t);break;case"gaps":await a.updateGap(t);break;default:throw Error("Update not supported for table: ".concat(e))}console.log("[useMasterData] Updated record in ".concat(e,":"),t.id)}catch(t){throw console.error("Error updating record in ".concat(e,":"),t),l(t),t}},[e]);return{data:a,loading:n,error:o,lastUpdate:d,updateRecord:m,addRecord:(0,r.useCallback)(async t=>{try{let a;l(null);let s=ea();switch(e){case"daily_schedule":a=await s.addDailyScheduleEntry(t);break;case"facilities":a=await s.addFacility(t);break;case"work_assignments":a=await s.addWorkAssignment(t);break;case"gaps":a=await s.addGap(t);break;default:throw Error("Add not supported for table: ".concat(e))}return console.log("[useMasterData] Added record to ".concat(e,":"),a),a}catch(t){throw console.error("Error adding record to ".concat(e,":"),t),l(t),t}},[e]),refresh:(0,r.useCallback)(()=>{h()},[h])}}function en(e){let{data:t,loading:a,error:s,lastUpdate:n,updateRecord:i,addRecord:o,refresh:l}=er("daily_schedule",e),d=(0,r.useCallback)(async e=>{try{let t=ea();await t.deleteDailyScheduleEntry(e),console.log("[useDailySchedule] Deleted entry:",e)}catch(e){throw console.error("Error deleting schedule entry:",e),e}},[]);return{schedule:t.sort((e,t)=>e.time.localeCompare(t.time)),loading:a,error:s,lastUpdate:n,updateEntry:i,addEntry:o,deleteEntry:d,refresh:l}}function ei(){let[e,t]=(0,r.useState)(!1),[a,n]=(0,r.useState)(null),[i]=(0,r.useState)("op-current");(0,r.useEffect)(()=>{es(i)},[i]);let{schedule:o,loading:l,error:d,updateEntry:c,addEntry:p,deleteEntry:h,lastUpdate:m}=en(i);(0,r.useEffect)(()=>{l||0!==o.length||[{operation_id:i,time:"06:00",event_name:"Operational Period Begins",location:"All Sites",responsible_party:"All Personnel",notes:"Day shift reporting time",event_type:"operation"},{operation_id:i,time:"07:00",event_name:"Morning Briefing",location:"DRO HQ / Virtual",responsible_party:"DRO Director",notes:"Daily operational briefing for all section chiefs",event_type:"briefing"},{operation_id:i,time:"08:00",event_name:"Shelter Operations Begin",location:"All Shelters",responsible_party:"Shelter Managers",notes:"Morning shift change",event_type:"operation"},{operation_id:i,time:"09:00",event_name:"Feeding Operations Begin",location:"All Kitchens/ERVs",responsible_party:"Feeding Manager",notes:"ERV departure for routes",event_type:"operation"},{operation_id:i,time:"10:00",event_name:"EOC Coordination Call",location:"State EOC",responsible_party:"Government Operations",notes:"Daily state/county coordination",event_type:"meeting"},{operation_id:i,time:"12:00",event_name:"Midday Status Update",location:"Virtual",responsible_party:"All Section Chiefs",notes:"Quick status check",event_type:"briefing"},{operation_id:i,time:"14:00",event_name:"Planning Meeting",location:"DRO HQ",responsible_party:"Planning Section",notes:"Next operational period planning",event_type:"meeting"},{operation_id:i,time:"16:00",event_name:"Resource Request Deadline",location:"N/A",responsible_party:"Logistics",notes:"Deadline for next day resource requests",event_type:"deadline"},{operation_id:i,time:"17:00",event_name:"Evening Briefing",location:"DRO HQ / Virtual",responsible_party:"DRO Director",notes:"End of day status and night operations",event_type:"briefing"},{operation_id:i,time:"18:00",event_name:"IAP Publication",location:"N/A",responsible_party:"Planning Section",notes:"Next operational period IAP released",event_type:"deadline"},{operation_id:i,time:"19:00",event_name:"Night Shift Change",location:"All 24hr Sites",responsible_party:"Night Supervisors",notes:"Night shift reporting time",event_type:"operation"},{operation_id:i,time:"21:00",event_name:"Night Operations Check",location:"Virtual",responsible_party:"Night Operations Chief",notes:"Status check for overnight operations",event_type:"operation"}].forEach(e=>p(e))},[l,o.length,i,p]);let g=async()=>{try{let e=await p({operation_id:i,time:"00:00",event_name:"New Event",location:"",responsible_party:"",notes:"",event_type:"operation"});n(e)}catch(e){console.error("Error adding schedule entry:",e),alert("Failed to add new event. Please try again.")}},u=async e=>{try{await h(e)}catch(e){console.error("Error deleting schedule entry:",e),alert("Failed to delete event. Please try again.")}},x=async(e,t,a)=>{try{let s=o.find(t=>t.id===e);if(s){let e={...s,[t]:a};await c(e)}}catch(e){console.error("Error updating schedule entry:",e),alert("Failed to update event. Please try again.")}};return(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsxs)("div",{className:"bg-gray-700 text-white p-3 flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-bold",children:"Daily Schedule"}),m&&(0,s.jsxs)("p",{className:"text-sm text-gray-300",children:["Last updated: ",m.toLocaleTimeString()]}),l&&(0,s.jsx)("p",{className:"text-sm text-yellow-300",children:"⏳ Loading schedule..."}),d&&(0,s.jsxs)("p",{className:"text-sm text-red-300",children:["❌ Error: ",d.message]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>t(!e),disabled:l,className:"px-4 py-2 rounded font-semibold ".concat(l?"bg-gray-600 cursor-not-allowed":e?"bg-yellow-500 hover:bg-yellow-600 animate-pulse":"bg-blue-600 hover:bg-blue-700"),children:e?"\uD83D\uDD34 EDITING - Click to Exit":"✏️ Edit Schedule"}),e&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:g,disabled:l,className:"px-3 py-2 rounded font-semibold ".concat(l?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"),children:"+ Add Event"}),(0,s.jsx)("button",{onClick:()=>{t(!1),n(null)},className:"px-3 py-2 bg-orange-600 text-white rounded hover:bg-orange-700 font-semibold",children:"\uD83D\uDCBE Exit Edit Mode"})]})]})]}),e&&(0,s.jsxs)("div",{className:"bg-yellow-50 border-2 border-yellow-400 p-3 mb-4",children:[(0,s.jsx)("strong",{children:"\uD83D\uDCDD Edit Mode Active:"}),' Click any field to edit. Use the Edit/Done buttons for each row. Add new events with the "Add Event" button. Delete events with the red Delete button. Don\'t forget to Save All when finished!']}),(0,s.jsxs)("div",{className:"bg-blue-50 border border-blue-300 p-3 mb-4",children:[(0,s.jsx)("strong",{children:"Operational Period:"})," 06:00 to 05:59 (24 hours)",(0,s.jsxs)("span",{className:"ml-4",children:[(0,s.jsx)("strong",{children:"Time Zone:"})," Eastern Standard Time (EST)"]})]}),(0,s.jsxs)("table",{className:"w-full border-collapse border-2 border-black",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-200",children:[(0,s.jsx)("th",{className:"border-2 border-black p-2 text-left w-24",children:"Time"}),(0,s.jsx)("th",{className:"border-2 border-black p-2 text-left",children:"Event/Activity"}),(0,s.jsx)("th",{className:"border-2 border-black p-2 text-left w-48",children:"Location"}),(0,s.jsx)("th",{className:"border-2 border-black p-2 text-left w-48",children:"Responsible"}),(0,s.jsx)("th",{className:"border-2 border-black p-2 text-left",children:"Notes"}),e&&(0,s.jsx)("th",{className:"border-2 border-black p-2 w-24",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:l?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:e?6:5,className:"p-4 text-center text-gray-500",children:"⏳ Loading schedule from master database..."})}):0===o.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:e?6:5,className:"p-4 text-center text-gray-500",children:"No schedule entries found. Default schedule will be created automatically."})}):o.map((t,r)=>(0,s.jsxs)("tr",{className:r%2==0?"bg-white":"bg-gray-50",children:[(0,s.jsx)("td",{className:"border border-black p-2 font-bold",children:a===t.id?(0,s.jsx)("input",{type:"time",value:t.time,onChange:e=>x(t.id,"time",e.target.value),className:"w-full px-1 border rounded"}):t.time}),(0,s.jsx)("td",{className:"border border-black p-2",children:a===t.id?(0,s.jsx)("input",{type:"text",value:t.event_name,onChange:e=>x(t.id,"event_name",e.target.value),className:"w-full px-1 border rounded"}):(0,s.jsx)("strong",{children:t.event_name})}),(0,s.jsx)("td",{className:"border border-black p-2",children:a===t.id?(0,s.jsx)("input",{type:"text",value:t.location||"",onChange:e=>x(t.id,"location",e.target.value),className:"w-full px-1 border rounded"}):t.location||"TBD"}),(0,s.jsx)("td",{className:"border border-black p-2",children:a===t.id?(0,s.jsx)("input",{type:"text",value:t.responsible_party||"",onChange:e=>x(t.id,"responsible_party",e.target.value),className:"w-full px-1 border rounded"}):t.responsible_party||"TBD"}),(0,s.jsx)("td",{className:"border border-black p-2",children:a===t.id?(0,s.jsx)("input",{type:"text",value:t.notes||"",onChange:e=>x(t.id,"notes",e.target.value),className:"w-full px-1 border rounded"}):(0,s.jsx)("span",{className:"text-sm italic",children:t.notes||""})}),e&&(0,s.jsx)("td",{className:"border border-black p-2",children:(0,s.jsxs)("div",{className:"flex gap-1",children:[a===t.id?(0,s.jsx)("button",{onClick:()=>n(null),className:"px-2 py-1 bg-green-600 text-white rounded text-xs",children:"Done"}):(0,s.jsx)("button",{onClick:()=>n(t.id),className:"px-2 py-1 bg-blue-600 text-white rounded text-xs",children:"Edit"}),(0,s.jsx)("button",{onClick:()=>u(t.id),className:"px-2 py-1 bg-red-600 text-white rounded text-xs",disabled:l,children:"Delete"})]})})]},t.id))})]}),(0,s.jsxs)("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-300",children:[(0,s.jsx)("h3",{className:"font-bold mb-2",children:"Key Times:"}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,s.jsx)("div",{children:"• Morning Briefing: 07:00"}),(0,s.jsx)("div",{children:"• Evening Briefing: 17:00"}),(0,s.jsx)("div",{children:"• IAP Publication: 18:00"}),(0,s.jsx)("div",{children:"• Shift Change (Day): 07:00"}),(0,s.jsx)("div",{children:"• Shift Change (Night): 19:00"}),(0,s.jsx)("div",{children:"• Resource Deadline: 16:00"})]})]})]})}function eo(){let[e,t]=(0,r.useState)([]),[a,n]=(0,r.useState)(!1),[i,o]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=localStorage.getItem("iap_maps");e&&t(JSON.parse(e))},[]);let l=e=>{let a=e.target.files;a&&Array.from(a).forEach(e=>{let a=new FileReader;a.onload=a=>{var s;let r={id:"map-".concat(Date.now(),"-").concat(Math.random()),title:e.name.replace(/\.[^/.]+$/,""),description:"",imageUrl:null==(s=a.target)?void 0:s.result,uploadedAt:new Date().toISOString()};t(e=>{let t=[...e,r];return localStorage.setItem("iap_maps",JSON.stringify(t)),t})},a.readAsDataURL(e)})},d=(e,a,s)=>{t(t=>{let r=t.map(t=>t.id===e?{...t,[a]:s}:t);return localStorage.setItem("iap_maps",JSON.stringify(r)),r})},c=(e,a)=>{t(t=>{let s=t.findIndex(t=>t.id===e);if("up"===a&&0===s||"down"===a&&s===t.length-1)return t;let r=[...t],n="up"===a?s-1:s+1;return[r[s],r[n]]=[r[n],r[s]],localStorage.setItem("iap_maps",JSON.stringify(r)),r})};return(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"bg-gray-700 text-white p-3 flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold",children:"Maps and Geographic Information"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>n(!a),className:"px-4 py-2 rounded font-semibold ".concat(a?"bg-yellow-500 hover:bg-yellow-600 animate-pulse":"bg-blue-600 hover:bg-blue-700"),children:a?"\uD83D\uDD34 EDITING - Click to Exit":"✏️ Edit Maps"}),a&&(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("label",{className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 font-semibold cursor-pointer",children:["\uD83D\uDCE4 Upload Maps",(0,s.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:l,className:"hidden"})]})})]})]}),a&&(0,s.jsxs)("div",{className:"bg-yellow-50 border-2 border-yellow-400 p-3 mb-4",children:[(0,s.jsx)("strong",{children:"\uD83D\uDCDD Edit Mode Active:"})," Upload one or multiple map images. Click on titles and descriptions to edit them. Use arrow buttons to reorder maps. Images will automatically be included in the IAP document."]}),0===e.length&&!a&&(0,s.jsx)("div",{className:"border-2 border-gray-300 h-96 flex items-center justify-center bg-gray-50 rounded",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-gray-500 mb-4",children:"No maps uploaded yet"}),(0,s.jsx)("button",{onClick:()=>n(!0),className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Add Maps"})]})}),e.length>0&&(0,s.jsx)("div",{className:"space-y-6",children:e.map((r,n)=>(0,s.jsxs)("div",{className:"border-2 border-gray-300 rounded-lg overflow-hidden",children:[(0,s.jsx)("div",{className:"bg-gray-100 p-3 border-b border-gray-300",children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{className:"flex-1",children:[a?(0,s.jsx)("input",{type:"text",value:r.title,onChange:e=>d(r.id,"title",e.target.value),className:"text-lg font-bold w-full px-2 py-1 border rounded",placeholder:"Map Title"}):(0,s.jsx)("h3",{className:"text-lg font-bold",children:r.title||"Untitled Map"}),a?(0,s.jsx)("textarea",{value:r.description,onChange:e=>d(r.id,"description",e.target.value),className:"w-full mt-2 px-2 py-1 border rounded text-sm",placeholder:"Map description (optional)",rows:2}):r.description?(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:r.description}):null]}),a&&(0,s.jsxs)("div",{className:"flex gap-1 ml-2",children:[(0,s.jsx)("button",{onClick:()=>c(r.id,"up"),disabled:0===n,className:"px-2 py-1 bg-gray-500 text-white rounded text-sm disabled:opacity-50",children:"↑"}),(0,s.jsx)("button",{onClick:()=>c(r.id,"down"),disabled:n===e.length-1,className:"px-2 py-1 bg-gray-500 text-white rounded text-sm disabled:opacity-50",children:"↓"}),(0,s.jsx)("button",{onClick:()=>{var e;return e=r.id,void t(t=>{let a=t.filter(t=>t.id!==e);return localStorage.setItem("iap_maps",JSON.stringify(a)),a})},className:"px-2 py-1 bg-red-600 text-white rounded text-sm",children:"✕"})]})]})}),(0,s.jsx)("div",{className:"p-4 bg-white",children:(0,s.jsx)("img",{src:r.imageUrl,alt:r.title,className:"w-full h-auto max-h-[600px] object-contain"})}),(0,s.jsxs)("div",{className:"bg-gray-50 px-3 py-2 border-t border-gray-300 text-xs text-gray-500",children:["Map ",n+1," of ",e.length," • Uploaded: ",new Date(r.uploadedAt).toLocaleString()]})]},r.id))}),0===e.length&&a&&(0,s.jsx)("div",{className:"border-2 border-dashed border-gray-400 rounded-lg p-8 text-center bg-gray-50",children:(0,s.jsxs)("div",{className:"text-gray-500",children:[(0,s.jsx)("p",{className:"text-lg mb-2",children:"\uD83D\uDCCD No maps uploaded yet"}),(0,s.jsx)("p",{className:"mb-4",children:'Click "Upload Maps" to add operational area maps, facility locations, evacuation routes, etc.'}),(0,s.jsxs)("label",{className:"inline-block px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 cursor-pointer",children:["\uD83D\uDCE4 Upload Your First Map",(0,s.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:l,className:"hidden"})]})]})})]})}function el(){let[e,t]=(0,r.useState)([]),[a,n]=(0,r.useState)([]),[i,o]=(0,r.useState)(!1),[l,d]=(0,r.useState)("appendices");(0,r.useEffect)(()=>{let e=localStorage.getItem("iap_appendices"),a=localStorage.getItem("iap_references");e?t(JSON.parse(e)):t([{id:"1",title:"Lodging and Accommodations Guide",type:"text",content:'**APPROVED HOTELS FOR RESPONDERS**\n\n**Primary Lodging (American Red Cross Rate)**\n• Hampton Inn & Suites Downtown\n  - Address: 123 Main Street, Tampa, FL 33602\n  - Rate: $89/night (ARC Corporate Rate)\n  - Confirmation Code: ARC2024\n  - Contact: (813) 555-0123\n\n**Secondary Lodging Options**\n• Courtyard by Marriott Airport\n  - Address: 4567 Airport Blvd, Tampa, FL 33607\n  - Rate: $95/night\n  - Pet Friendly: Yes (fee applies)\n\n**LODGING REIMBURSEMENT**\n- Maximum $120/night for approved facilities\n- Receipts required for all stays\n- Book through ARC Travel when possible\n- Personal vehicles: $0.655/mile reimbursement\n\n**CHECK-IN PROCEDURES**\n1. Present Red Cross ID badge\n2. Use corporate rate code "ARC2024"\n3. Submit receipts to Finance Section daily\n4. Report any issues to Logistics Section Chief',uploadedAt:new Date().toISOString()},{id:"2",title:"Parking and Transportation Instructions",type:"text",content:"**PARKING ASSIGNMENTS BY SECTION**\n\n**Command Staff & ICS Leadership**\n• North Parking Lot (Spaces 1-20)\n• Access via Main Gate\n• 24/7 security patrol\n\n**Operations & Field Teams**\n• West Parking Garage (Levels 2-3)\n• Vehicle staging area for ERVs\n• Equipment loading zone\n\n**Logistics & Administration**\n• South Surface Lot\n• Visitor parking after 6 PM\n• Overflow parking across street\n\n**VEHICLE ASSIGNMENTS**\n• ERV-1: Bay 3 (Operations)\n• ERV-2: Bay 4 (Mass Care)\n• Box Truck: Loading Dock A\n• Staff Vehicles: General parking\n\n**TRANSPORTATION SCHEDULES**\n- Airport Shuttle: Departs hourly 6 AM - 10 PM\n- Hotel Shuttle: 7 AM, 6 PM, 11 PM daily\n- Equipment Transport: On-demand via Radio\n\n**SECURITY REQUIREMENTS**\n- All vehicles must display ARC placard\n- No overnight parking in fire lanes\n- Report security issues to: (813) 555-0199",uploadedAt:new Date().toISOString()},{id:"3",title:"Personnel Performance and Recognition",type:"text",content:"**OUTSTANDING PERFORMANCE RECOGNITION**\n\n**Daily Commendations (Report Period: 10/15-10/16)**\n\n**⭐ EXCEPTIONAL SERVICE AWARDS**\n\n**Maria Rodriguez - Mass Care Supervisor**\n- Exceeded shelter capacity by 20% through innovative space management\n- Managed 450 clients with zero safety incidents\n- Coordinated bilingual services for 75% non-English speaking clients\n- Recommended for Regional Recognition\n\n**James Thompson - ERV Team Leader**\n- Delivered 2,847 meals to 12 different locations\n- Maintained 100% food safety compliance\n- Trained 6 new volunteers in mobile feeding operations\n- Led response to emergency medical incident\n\n**Sarah Chen - Intake Specialist**  \n- Processed 89 new shelter registrations\n- Identified and supported 12 unaccompanied minors\n- Maintained accurate records despite system outages\n- Provided trauma-informed care to all clients\n\n**PERFORMANCE IMPROVEMENT NOTES**\n• Reminder: All meal service requires hair nets and gloves\n• Safety protocols: Hard hats required in debris areas  \n• Documentation: Daily activity logs due by 7 PM\n• Communication: Use proper radio protocols (no personal names)\n\n**SHIFT EVALUATIONS**\n- Day Shift: Excellent coordination, minor supply delays\n- Night Shift: Strong security, need more bilingual support\n- Weekend Coverage: Adequate staffing, monitor fatigue levels",uploadedAt:new Date().toISOString()},{id:"4",title:"Emergency Contact Information",type:"text",content:"**CRITICAL EMERGENCY CONTACTS**\n\n**24/7 DUTY OFFICER**\nPrimary: (813) 555-0911\nBackup: (727) 555-0922\nEmail: duty.officer@redcross.org\n\n**INCIDENT COMMAND TEAM**\n• Incident Commander: John Davis - (813) 555-1001  \n• Deputy IC: Lisa Martinez - (813) 555-1002\n• Safety Officer: Mike Johnson - (813) 555-1003\n• Liaison Officer: Amy Wilson - (813) 555-1004\n\n**EXTERNAL COORDINATION**\n• County EOC: (813) 555-2000\n• State Emergency Management: (850) 555-3000\n• Local Fire Department: (813) 555-4000\n• Police Coordination: (813) 555-5000\n\n**SUPPORT SERVICES**\n• IT Help Desk: (800) 555-HELP\n• Fleet Maintenance: (813) 555-AUTO  \n• Medical Support: (813) 555-MEDIC\n• Mental Health Services: (800) 555-CARE\n\n**MEDIA RELATIONS**\n• ARC Communications: (202) 555-NEWS\n• Local Media Hotline: (813) 555-MEDIA\n• Do NOT speak to media - refer to PIO",uploadedAt:new Date().toISOString()}]),a?n(JSON.parse(a)):n([{id:"1",title:"Red Cross Disaster Operations Manual",type:"manual",content:"Standard operating procedures for disaster response",url:"https://redcross.org/manual"},{id:"2",title:"State Emergency Response Plan",type:"plan",content:"Florida state emergency management protocols",url:"https://floridadisaster.org/serp"},{id:"3",title:"County EOC Coordination Procedures",type:"procedure",content:"Coordination procedures with county emergency operations",url:""}])},[]);let c=e=>{let a=e.target.files;a&&Array.from(a).forEach(e=>{let a=new FileReader;a.onload=a=>{var s;let r={id:"appendix-".concat(Date.now(),"-").concat(Math.random()),title:e.name.replace(/\.[^/.]+$/,""),type:"image",content:"",imageUrl:null==(s=a.target)?void 0:s.result,uploadedAt:new Date().toISOString()};t(e=>{let t=[...e,r];return localStorage.setItem("iap_appendices",JSON.stringify(t)),t})},a.readAsDataURL(e)})},p=(e,a,s)=>{t(t=>{let r=t.map(t=>t.id===e?{...t,[a]:s}:t);return localStorage.setItem("iap_appendices",JSON.stringify(r)),r})},h=(e,t,a)=>{n(s=>{let r=s.map(s=>s.id===e?{...s,[t]:a}:s);return localStorage.setItem("iap_references",JSON.stringify(r)),r})};return(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"bg-gray-700 text-white p-3 flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold",children:"Appendices and References"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>o(!i),className:"px-4 py-2 rounded font-semibold ".concat(i?"bg-yellow-500 hover:bg-yellow-600 animate-pulse":"bg-blue-600 hover:bg-blue-700"),children:i?"\uD83D\uDD34 EDITING - Click to Exit":"✏️ Edit Content"}),i&&(0,s.jsx)("button",{onClick:()=>{localStorage.setItem("iap_appendices",JSON.stringify(e)),localStorage.setItem("iap_references",JSON.stringify(a))},className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 font-semibold",children:"\uD83D\uDCBE Save All"})]})]}),(0,s.jsxs)("div",{className:"flex border-b border-gray-300 mb-4",children:[(0,s.jsx)("button",{onClick:()=>d("appendices"),className:"px-4 py-2 font-semibold ".concat("appendices"===l?"bg-white border-t-2 border-l border-r border-gray-300 -mb-px":"bg-gray-100 text-gray-600"),children:"Appendices"}),(0,s.jsx)("button",{onClick:()=>d("references"),className:"px-4 py-2 font-semibold ".concat("references"===l?"bg-white border-t-2 border-l border-r border-gray-300 -mb-px":"bg-gray-100 text-gray-600"),children:"References"})]}),i&&(0,s.jsxs)("div",{className:"bg-yellow-50 border-2 border-yellow-400 p-3 mb-4",children:[(0,s.jsx)("strong",{children:"\uD83D\uDCDD Edit Mode Active:"}),"appendices"===l?" Upload images, documents, or add text appendices. Each appendix can be 0.5 to 10+ pages.":" Add reference documents, links, and important resources for the operation."]}),"appendices"===l&&(0,s.jsxs)("div",{className:"space-y-4",children:[i&&(0,s.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,s.jsxs)("label",{className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 cursor-pointer",children:["\uD83D\uDCF7 Upload Images",(0,s.jsx)("input",{type:"file",accept:"image/*",multiple:!0,onChange:c,className:"hidden"})]}),(0,s.jsxs)("label",{className:"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 cursor-pointer",children:["\uD83D\uDCC4 Upload Documents",(0,s.jsx)("input",{type:"file",accept:".pdf,.doc,.docx,.xls,.xlsx",multiple:!0,onChange:e=>{let a=e.target.files;a&&Array.from(a).forEach(e=>{let a=new FileReader;a.onload=a=>{let s={id:"appendix-".concat(Date.now(),"-").concat(Math.random()),title:e.name,type:"document",content:"Uploaded document: ".concat(e.name," (").concat((e.size/1024).toFixed(2)," KB)"),uploadedAt:new Date().toISOString()};t(e=>{let t=[...e,s];return localStorage.setItem("iap_appendices",JSON.stringify(t)),t})},a.readAsDataURL(e)})},className:"hidden"})]}),(0,s.jsx)("button",{onClick:()=>{t([...e,{id:"appendix-".concat(Date.now()),title:"New Appendix",type:"text",content:"",uploadedAt:new Date().toISOString()}])},className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"✏️ Add Text Appendix"})]}),0===e.length?(0,s.jsxs)("div",{className:"border-2 border-gray-300 rounded-lg p-8 text-center bg-gray-50",children:[(0,s.jsx)("p",{className:"text-gray-500 mb-4",children:"No appendices added yet"}),i&&(0,s.jsxs)("label",{className:"inline-block px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 cursor-pointer",children:["\uD83D\uDCE4 Upload First Appendix",(0,s.jsx)("input",{type:"file",accept:"image/*,.pdf,.doc,.docx",onChange:c,className:"hidden"})]})]}):(0,s.jsx)("div",{className:"space-y-4",children:e.map((e,a)=>(0,s.jsxs)("div",{className:"border rounded-lg overflow-hidden",children:[(0,s.jsxs)("div",{className:"bg-gray-100 p-3 flex justify-between items-start",children:[(0,s.jsxs)("div",{className:"flex-1",children:[i?(0,s.jsx)("input",{type:"text",value:e.title,onChange:t=>p(e.id,"title",t.target.value),className:"text-lg font-bold w-full px-2 py-1 border rounded",placeholder:"Appendix Title"}):(0,s.jsxs)("h3",{className:"text-lg font-bold",children:["Appendix ",String.fromCharCode(65+a),": ",e.title]}),"text"===e.type&&i?(0,s.jsx)("textarea",{value:e.content,onChange:t=>p(e.id,"content",t.target.value),className:"w-full mt-2 px-2 py-1 border rounded",placeholder:"Appendix content...",rows:4}):"text"===e.type?(0,s.jsx)("p",{className:"mt-2",children:e.content}):null]}),i&&(0,s.jsx)("button",{onClick:()=>{var a;return a=e.id,void t(e=>{let t=e.filter(e=>e.id!==a);return localStorage.setItem("iap_appendices",JSON.stringify(t)),t})},className:"px-2 py-1 bg-red-600 text-white rounded text-sm ml-2",children:"✕"})]}),"image"===e.type&&e.imageUrl&&(0,s.jsx)("div",{className:"p-4 bg-white",children:(0,s.jsx)("img",{src:e.imageUrl,alt:e.title,className:"w-full h-auto max-h-[600px] object-contain"})}),"document"===e.type&&(0,s.jsx)("div",{className:"p-4 bg-gray-50",children:(0,s.jsx)("p",{className:"text-gray-600",children:e.content})}),(0,s.jsxs)("div",{className:"bg-gray-50 px-3 py-2 text-xs text-gray-500",children:["Type: ",e.type," • Uploaded: ",new Date(e.uploadedAt).toLocaleString()]})]},e.id))})]}),"references"===l&&(0,s.jsxs)("div",{className:"space-y-4",children:[i&&(0,s.jsx)("button",{onClick:()=>{n([...a,{id:"ref-".concat(Date.now()),title:"New Reference",type:"link",content:"",url:""}])},className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 mb-4",children:"+ Add Reference"}),0===a.length?(0,s.jsx)("div",{className:"border-2 border-gray-300 rounded-lg p-8 text-center bg-gray-50",children:(0,s.jsx)("p",{className:"text-gray-500",children:"No references added yet"})}):(0,s.jsx)("div",{className:"space-y-3",children:a.map((e,t)=>(0,s.jsx)("div",{className:"border rounded-lg p-4 bg-white",children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsx)("div",{className:"flex-1",children:i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("input",{type:"text",value:e.title,onChange:t=>h(e.id,"title",t.target.value),className:"text-lg font-bold w-full px-2 py-1 border rounded mb-2",placeholder:"Reference Title"}),(0,s.jsxs)("select",{value:e.type,onChange:t=>h(e.id,"type",t.target.value),className:"px-2 py-1 border rounded mb-2",children:[(0,s.jsx)("option",{value:"manual",children:"Manual"}),(0,s.jsx)("option",{value:"plan",children:"Plan"}),(0,s.jsx)("option",{value:"procedure",children:"Procedure"}),(0,s.jsx)("option",{value:"contact",children:"Contact"}),(0,s.jsx)("option",{value:"link",children:"Link"})]}),(0,s.jsx)("textarea",{value:e.content,onChange:t=>h(e.id,"content",t.target.value),className:"w-full px-2 py-1 border rounded mb-2",placeholder:"Description...",rows:2}),(0,s.jsx)("input",{type:"url",value:e.url||"",onChange:t=>h(e.id,"url",t.target.value),className:"w-full px-2 py-1 border rounded",placeholder:"URL (optional)"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("h3",{className:"text-lg font-bold",children:[t+1,". ",e.title]}),(0,s.jsx)("span",{className:"inline-block px-2 py-1 bg-gray-100 rounded text-xs text-gray-600 mb-2",children:e.type}),(0,s.jsx)("p",{className:"text-gray-700",children:e.content}),e.url&&(0,s.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 underline text-sm",children:e.url})]})}),i&&(0,s.jsx)("button",{onClick:()=>{var t;return t=e.id,void n(e=>{let a=e.filter(e=>e.id!==t);return localStorage.setItem("iap_references",JSON.stringify(a)),a})},className:"px-2 py-1 bg-red-600 text-white rounded text-sm ml-2",children:"✕"})]})},e.id))})]})]})}function ed(){let[e,t]=(0,r.useState)([]),[a,n]=(0,r.useState)("discipline"),[i,l]=(0,r.useState)(""),[d,c]=(0,r.useState)("all");(0,r.useEffect)(()=>{let e=[];o.shelteringFacilities.forEach((t,a)=>{e.push({id:"shelter-".concat(a),facility:t.name,type:"Shelter",discipline:"Sheltering",address:t.address,county:t.county,status:t.status||"Open",phone:t.phone,contact:t.manager,capacity:t.capacity,personnel:t.personnel})}),o.feedingFacilities.forEach((t,a)=>{e.push({id:"feeding-".concat(a),facility:t.name,type:t.type,discipline:"Feeding",address:t.address,county:t.county,status:t.status||"Active",phone:t.phone,contact:t.manager,capacity:{meals:t.mealsPerDay},personnel:t.personnel})}),o.governmentFacilities&&o.governmentFacilities.forEach((t,a)=>{e.push({id:"gov-".concat(a),facility:t.name,type:t.type||"EOC",discipline:"Government Operations",address:t.address,county:t.county,status:t.status||"Active",phone:t.phone,contact:t.contact,personnel:t.personnel})}),o.damageAssessmentFacilities&&o.damageAssessmentFacilities.forEach((t,a)=>{e.push({id:"damage-".concat(a),facility:t.name,type:t.type||"Assessment Center",discipline:"Damage Assessment",address:t.address,county:t.county,status:t.status||"Active",phone:t.phone,contact:t.contact,personnel:t.personnel})}),o.distributionFacilities&&o.distributionFacilities.forEach((t,a)=>{e.push({id:"dist-".concat(a),facility:t.name,type:t.type||"Distribution Center",discipline:"Distribution",address:t.address,county:t.county,status:t.status||"Active",phone:t.phone,contact:t.contact,personnel:t.personnel})}),o.individualCareFacilities&&o.individualCareFacilities.forEach((t,a)=>{e.push({id:"care-".concat(a),facility:t.name,type:t.type||"Care Center",discipline:"Individual Disaster Care",address:t.address,county:t.county,status:t.status||"Active",phone:t.phone,contact:t.contact,personnel:t.personnel})}),o.droHeadquarters&&e.push({id:"dro-hq",facility:o.droHeadquarters.name||"DRO Headquarters",type:"Headquarters",discipline:"Command",address:o.droHeadquarters.address,county:o.droHeadquarters.county,status:"Operational",phone:o.droHeadquarters.phone,contact:o.droHeadquarters.contact}),e.sort((e,t)=>e.facility.localeCompare(t.facility)),t(e)},[]);let p=e.filter(e=>{let t=""===i||e.facility.toLowerCase().includes(i.toLowerCase())||e.address.toLowerCase().includes(i.toLowerCase())||e.county.toLowerCase().includes(i.toLowerCase()),a="all"===d||e.discipline===d;return t&&a}),h=p.reduce((e,t)=>{let s="discipline"===a?t.discipline:"county"===a?t.county:t.type;return e[s]||(e[s]=[]),e[s].push(t),e},{}),m=Array.from(new Set(e.map(e=>e.discipline))).sort(),g=p.length,u=m.reduce((t,a)=>(t[a]=e.filter(e=>e.discipline===a).length,t),{});return(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"bg-gray-700 text-white p-3 mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold",children:"Work Sites and Facilities"}),(0,s.jsx)("p",{className:"text-sm mt-1",children:"Comprehensive list of all operational facilities"})]}),(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-300 p-3 mb-4",children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm",children:[(0,s.jsxs)("span",{className:"font-bold",children:["Total Sites: ",g]}),m.map(e=>(0,s.jsxs)("span",{children:[e,": ",u[e]]},e))]})}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-4 mb-4",children:[(0,s.jsx)("div",{className:"flex-1 min-w-[200px]",children:(0,s.jsx)("input",{type:"text",placeholder:"Search facilities, addresses, or counties...",value:i,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 border rounded"})}),(0,s.jsxs)("select",{value:d,onChange:e=>c(e.target.value),className:"px-3 py-2 border rounded",children:[(0,s.jsx)("option",{value:"all",children:"All Disciplines"}),m.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}),(0,s.jsxs)("select",{value:a,onChange:e=>n(e.target.value),className:"px-3 py-2 border rounded",children:[(0,s.jsx)("option",{value:"discipline",children:"Group by Discipline"}),(0,s.jsx)("option",{value:"county",children:"Group by County"}),(0,s.jsx)("option",{value:"type",children:"Group by Type"})]})]}),0===Object.keys(h).length?(0,s.jsx)("div",{className:"text-center text-gray-500 py-8",children:"No facilities found matching your criteria"}):(0,s.jsx)("div",{className:"space-y-6",children:Object.entries(h).sort((e,t)=>e[0].localeCompare(t[0])).map(e=>{let[t,a]=e;return(0,s.jsxs)("div",{className:"border-2 border-gray-300 rounded-lg overflow-hidden",children:[(0,s.jsxs)("div",{className:"bg-gray-200 px-3 py-2 font-bold",children:[t," (",a.length," sites)"]}),(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-100",children:[(0,s.jsx)("th",{className:"p-2 text-left border-r",children:"Facility Name"}),(0,s.jsx)("th",{className:"p-2 text-left border-r",children:"Type"}),(0,s.jsx)("th",{className:"p-2 text-left border-r",children:"Address"}),(0,s.jsx)("th",{className:"p-2 text-left border-r",children:"County"}),(0,s.jsx)("th",{className:"p-2 text-left border-r",children:"Contact"}),(0,s.jsx)("th",{className:"p-2 text-left border-r",children:"Phone"}),(0,s.jsx)("th",{className:"p-2 text-left",children:"Status"})]})}),(0,s.jsx)("tbody",{children:a.map((e,t)=>(0,s.jsxs)("tr",{className:t%2==0?"bg-white":"bg-gray-50",children:[(0,s.jsx)("td",{className:"p-2 border-r font-semibold",children:e.facility}),(0,s.jsx)("td",{className:"p-2 border-r",children:e.type}),(0,s.jsx)("td",{className:"p-2 border-r",children:e.address}),(0,s.jsx)("td",{className:"p-2 border-r",children:e.county}),(0,s.jsx)("td",{className:"p-2 border-r",children:e.contact||"-"}),(0,s.jsx)("td",{className:"p-2 border-r",children:e.phone||"-"}),(0,s.jsx)("td",{className:"p-2",children:(0,s.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("Open"===e.status||"Active"===e.status||"Operational"===e.status?"bg-green-100 text-green-800":"Closed"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:e.status})})]},e.id))})]})]},t)})}),(0,s.jsxs)("div",{className:"mt-6 p-3 bg-gray-100 border border-gray-300 text-sm",children:[(0,s.jsx)("div",{className:"font-bold mb-2",children:"Summary:"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:[(0,s.jsxs)("div",{children:["• Total Facilities: ",g]}),(0,s.jsxs)("div",{children:["• Counties Covered: ",new Set(p.map(e=>e.county)).size]}),(0,s.jsxs)("div",{children:["• Active Disciplines: ",new Set(p.map(e=>e.discipline)).size]}),(0,s.jsxs)("div",{children:["• Shelter Beds: ",e.filter(e=>"Sheltering"===e.discipline).reduce((e,t)=>e+("object"==typeof t.capacity?t.capacity.maximum||t.capacity.current||0:t.capacity||0),0)]}),(0,s.jsxs)("div",{children:["• Feeding Capacity: ",e.filter(e=>"Feeding"===e.discipline).reduce((e,t)=>{var a;return e+((null==(a=t.capacity)?void 0:a.meals)||0)},0)," meals/day"]}),(0,s.jsxs)("div",{children:["• Personnel Deployed: ",e.reduce((e,t)=>{var a;return e+((null==(a=t.personnel)?void 0:a.have)||0)},0)]})]})]})]})}var ec=a(5172),ep=a(4264),eh=a.n(ep);class em{async generateCompleteIAP(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return this.addCoverPage(e),this.addDirectorsMessage(e),this.addContactRoster(e),await this.addOrganizationChart(e),this.addPrioritiesObjectives(e),this.addShelteringWorkAssignments(e),this.addFeedingWorkAssignments(e),this.addGovernmentOpsWorkAssignments(e),this.addDamageAssessmentWorkAssignments(e),this.addDistributionWorkAssignments(e),this.addIndividualCareWorkAssignments(e),this.addWorkSitesFacilities(e),this.addDailySchedule(e),await this.addMapsGeographic(e),this.addAppendicesReferences(e),this.pdf.output("blob")}async generateFromElement(e){let t=document.getElementById(e);if(!t)throw Error("Element with id ".concat(e," not found"));let a=await eh()(t,{scale:2,logging:!1,useCORS:!0,allowTaint:!0}),s=a.toDataURL("image/png"),r=210*a.height/a.width,n=r,i=0;for(this.pdf.addImage(s,"PNG",0,i,210,r),n-=297;n>=0;)i=n-r,this.pdf.addPage(),this.pdf.addImage(s,"PNG",0,i,210,r),n-=297;return this.pdf.output("blob")}addCoverPage(e){let{operation:t}=e;this.pdf.setFillColor(237,28,36),this.pdf.rect(0,0,216,30,"F"),this.pdf.setTextColor(255,255,255),this.pdf.setFontSize(24),this.pdf.text("INCIDENT ACTION PLAN",108,20,{align:"center"}),this.pdf.setTextColor(0,0,0),this.pdf.setDrawColor(0),this.pdf.setLineWidth(.5),this.pdf.rect(20,50,176,60),this.pdf.setFontSize(12),this.pdf.text("Incident Name: ".concat(t.name),30,65),this.pdf.text("DR Number: ".concat(t.drNumber),30,75),this.pdf.text("Operational Period: ".concat(t.operationalPeriod.start," to ").concat(t.operationalPeriod.end),30,85),this.pdf.text("IAP Number: #".concat(t.operationalPeriod.number),30,95),this.pdf.setFontSize(14),this.pdf.setFont("helvetica","bold"),this.pdf.text("Documents Included:",30,130),this.pdf.setFont("helvetica","normal"),this.pdf.setFontSize(11);let a=140;["Director's Intent/Message","Incident Priorities and Objectives","Contact Roster DRO HQ","Incident Organization Chart","Work Assignments","Work Sites and Facilities","Daily Schedule","Maps and Geographic Information"].forEach(e=>{this.pdf.text("☑ ".concat(e),35,a),a+=8}),this.pdf.rect(20,210,176,40),this.pdf.text("Prepared By:",30,225),this.pdf.text("".concat(t.preparedBy),70,225),this.pdf.text("".concat(t.preparedByTitle),70,232),this.pdf.text("Approved By:",30,245),this.pdf.text("".concat(t.approvedBy),70,245),this.pdf.text("".concat(t.approvedByTitle),70,252),this.addPageFooter()}addDirectorsMessage(e){this.pdf.addPage(),this.addPageHeader("DIRECTOR'S INTENT/MESSAGE");let t=e.directorsMessage||"\nThis Incident Action Plan establishes the operational priorities and objectives for the next operational period.\n\nKey Priorities:\n1. Life Safety - Ensure the safety of all responders and affected populations\n2. Incident Stabilization - Provide essential services to disaster survivors\n3. Property/Environmental Protection - Minimize further damage and environmental impact\n\nAll personnel are expected to:\n- Follow safety protocols at all times\n- Coordinate through established chain of command\n- Document all significant activities\n- Communicate resource needs promptly\n\nRemember that we are here to serve those affected by this disaster with compassion and efficiency.\n    ".trim(),a=this.pdf.splitTextToSize(t,170),s=60;a.forEach(e=>{s>250&&(this.pdf.addPage(),this.addPageHeader("DIRECTOR'S INTENT/MESSAGE (Continued)"),s=60),this.pdf.text(e,20,s),s+=7}),this.addPageFooter()}addContactRoster(e){this.pdf.addPage(),this.addPageHeader("CONTACT ROSTER - DRO HQ");let t=e.contactRoster||[];this.pdf.setFontSize(10),this.pdf.setFont("helvetica","bold"),this.pdf.text("Position",20,60),this.pdf.text("Name",70,60),this.pdf.text("Phone",120,60),this.pdf.text("Email",160,60),this.pdf.line(20,62,196,62),this.pdf.setFont("helvetica","normal");let a=70,s=1;t.forEach(e=>{a>250&&(this.pdf.addPage(),this.addPageHeader("CONTACT ROSTER - DRO HQ (Page ".concat(++s,")")),a=60,this.pdf.setFont("helvetica","bold"),this.pdf.text("Position",20,60),this.pdf.text("Name",70,60),this.pdf.text("Phone",120,60),this.pdf.text("Email",160,60),this.pdf.line(20,62,196,62),this.pdf.setFont("helvetica","normal"),a=70),this.pdf.setFontSize(9),this.pdf.text(e.title||"",20,a),this.pdf.text(e.name||"",70,a),this.pdf.text(e.phone||"",120,a);let t=(e.email||"").replace("@redcross.org","");this.pdf.text(t.substring(0,20),160,a),a+=7}),this.addPageFooter()}async addOrganizationChart(e){this.pdf.addPage(),this.addPageHeader("INCIDENT ORGANIZATION CHART");let t=document.querySelector(".react-flow");if(t)try{let e=(await eh()(t,{scale:1,logging:!1})).toDataURL("image/png");this.pdf.addImage(e,"PNG",20,60,176,120)}catch(t){this.addTextOrgChart(e)}else this.addTextOrgChart(e);this.addPageFooter()}addTextOrgChart(e){this.pdf.setFontSize(10),this.pdf.setFont("helvetica","bold"),this.pdf.text("COMMAND STAFF",108,70,{align:"center"}),this.pdf.setFont("helvetica","normal"),this.pdf.text("DRO Director: Virginia Mewborn",108,80,{align:"center"}),this.pdf.line(108,85,108,95),this.pdf.line(60,95,156,95),this.pdf.text("Operations",60,105,{align:"center"}),this.pdf.text("Patricia DAlessandro",60,112,{align:"center"}),this.pdf.text("Planning",108,105,{align:"center"}),this.pdf.text("Janice Vannatta",108,112,{align:"center"}),this.pdf.text("Logistics",156,105,{align:"center"}),this.pdf.text("Marvin Williams",156,112,{align:"center"})}addPrioritiesObjectives(e){this.pdf.addPage(),this.addPageHeader("INCIDENT PRIORITIES AND OBJECTIVES"),this.pdf.setFontSize(12),this.pdf.setFont("helvetica","bold"),this.pdf.text("INCIDENT PRIORITIES",20,60),this.pdf.setFont("helvetica","normal"),this.pdf.setFontSize(11);let t=70;["1. Life Safety - Ensure safety of all responders and survivors","2. Incident Stabilization - Provide essential disaster services","3. Property/Environmental Protection - Minimize additional damage"].forEach(e=>{this.pdf.text(e,25,t),t+=10}),this.pdf.setFont("helvetica","bold"),this.pdf.text("OPERATIONAL OBJECTIVES",20,t+10),this.pdf.setFont("helvetica","normal"),t+=20,(e.objectives||["Open and maintain shelter operations for displaced residents","Provide feeding services to affected populations","Coordinate with government partners for resource allocation","Conduct damage assessments in affected areas","Establish distribution sites for emergency supplies","Provide individual disaster care services"]).forEach((e,a)=>{t>250&&(this.pdf.addPage(),this.addPageHeader("INCIDENT PRIORITIES AND OBJECTIVES (Continued)"),t=60),this.pdf.text("".concat(a+1,". ").concat(e),25,t),t+=10}),this.addPageFooter()}addShelteringWorkAssignments(e){this.pdf.addPage(),this.addPageHeader("WORK ASSIGNMENTS - SHELTERING");let t=e.shelteringFacilities||[];this.addFacilityTable(t,"Shelter"),this.addPageFooter()}addFeedingWorkAssignments(e){this.pdf.addPage(),this.addPageHeader("WORK ASSIGNMENTS - FEEDING");let t=e.feedingFacilities||[];this.addFacilityTable(t,"Feeding"),this.pdf.addPage(),this.addPageHeader("WORK ASSIGNMENTS - ERV OPERATIONS"),this.pdf.setFontSize(10);let a=60;[{unit:"ERV 11181",crew:"Jake Gonzales, Ben Knight",location:"Church of the Palms"},{unit:"ERV 31082",crew:"Greg Camacho",location:"Church of the Palms"},{unit:"ERV 34076",crew:"Kenneth Blackshear, James Horning",location:"Stand by"}].forEach(e=>{this.pdf.setFont("helvetica","bold"),this.pdf.text(e.unit,20,a),this.pdf.setFont("helvetica","normal"),this.pdf.text("Crew: ".concat(e.crew),30,a+7),this.pdf.text("Location: ".concat(e.location),30,a+14),a+=25}),this.addPageFooter()}addGovernmentOpsWorkAssignments(e){this.pdf.addPage(),this.addPageHeader("WORK ASSIGNMENTS - GOVERNMENT OPERATIONS"),this.pdf.setFontSize(11),this.pdf.text("EOC Liaison Assignments:",20,60);let t=70;[{location:"State EOC - Tallahassee",liaison:"Robert Johnson",shift:"Day"},{location:"Hillsborough County EOC",liaison:"Maria Garcia",shift:"Day"},{location:"Pinellas County EOC",liaison:"James Wilson",shift:"Night"}].forEach(e=>{this.pdf.text("• ".concat(e.location,": ").concat(e.liaison," (").concat(e.shift,")"),25,t),t+=8}),this.addPageFooter()}addDamageAssessmentWorkAssignments(e){this.pdf.addPage(),this.addPageHeader("WORK ASSIGNMENTS - DAMAGE ASSESSMENT"),this.pdf.setFontSize(11);let t=60;[{team:"DA Team 1",area:"Hillsborough County - North",members:4},{team:"DA Team 2",area:"Hillsborough County - South",members:4},{team:"DA Team 3",area:"Pinellas County",members:6}].forEach(e=>{this.pdf.text("".concat(e.team,": ").concat(e.area," (").concat(e.members," members)"),20,t),t+=10}),this.addPageFooter()}addDistributionWorkAssignments(e){this.pdf.addPage(),this.addPageHeader("WORK ASSIGNMENTS - DISTRIBUTION");let t=e.distributionSites||[{name:"Distribution Site 1",location:"Tampa Fairgrounds",supplies:"Water, MREs, Tarps"},{name:"Distribution Site 2",location:"Clearwater Mall",supplies:"Cleanup Kits, Water"}],a=60;t.forEach(e=>{this.pdf.text("".concat(e.name),20,a),this.pdf.text("Location: ".concat(e.location),30,a+7),this.pdf.text("Supplies: ".concat(e.supplies),30,a+14),a+=25}),this.addPageFooter()}addIndividualCareWorkAssignments(e){this.pdf.addPage(),this.addPageHeader("WORK ASSIGNMENTS - INDIVIDUAL DISASTER CARE"),this.pdf.setFontSize(11),this.pdf.text("IDC Teams deployed to:",20,60);let t=70;["Shelter A - Mental Health Support","Shelter B - Client Casework","Mobile Outreach - Community Centers","FEMA DRC - Joint Operations"].forEach(e=>{this.pdf.text("• ".concat(e),25,t),t+=8}),this.addPageFooter()}addWorkSitesFacilities(e){this.pdf.addPage(),this.addPageHeader("WORK SITES AND FACILITIES");let t=[...e.shelteringFacilities||[],...e.feedingFacilities||[],...e.governmentFacilities||[]];this.pdf.setFontSize(9);let a=60,s=1;t.forEach((e,t)=>{a>250&&(this.pdf.addPage(),this.addPageHeader("WORK SITES AND FACILITIES (Page ".concat(++s,")")),a=60),this.pdf.text("".concat(t+1,". ").concat(e.name),20,a),this.pdf.text("   ".concat(e.address,", ").concat(e.county," County"),20,a+5),a+=12}),this.addPageFooter()}addDailySchedule(e){this.pdf.addPage(),this.addPageHeader("DAILY SCHEDULE");let t=e.dailySchedule||[{time:"06:00",activity:"Day Shift Report"},{time:"07:00",activity:"Operations Briefing"},{time:"12:00",activity:"Situation Update"},{time:"18:00",activity:"Night Shift Report"},{time:"19:00",activity:"Command Staff Meeting"}];this.pdf.setFontSize(10),this.pdf.setFont("helvetica","bold"),this.pdf.text("Time",30,60),this.pdf.text("Activity",70,60),this.pdf.text("Location",140,60),this.pdf.line(20,62,196,62),this.pdf.setFont("helvetica","normal");let a=70;t.forEach(e=>{this.pdf.text(e.time,30,a),this.pdf.text(e.activity,70,a),this.pdf.text(e.location||"HQ",140,a),a+=8}),this.addPageFooter()}async addMapsGeographic(e){this.pdf.addPage(),this.addPageHeader("MAPS AND GEOGRAPHIC INFORMATION");let t=document.querySelector("[data-map-container]");if(t)try{let e=(await eh()(t)).toDataURL("image/png");this.pdf.addImage(e,"PNG",20,60,176,120)}catch(e){this.addTextMapInfo()}else this.addTextMapInfo();this.addPageFooter()}addTextMapInfo(){this.pdf.setFontSize(11),this.pdf.text("Affected Counties:",20,70);let e=80;["Hillsborough","Pinellas","Sarasota","Manatee"].forEach(t=>{this.pdf.text("• ".concat(t," County"),30,e),e+=8})}addAppendicesReferences(e){this.pdf.addPage(),this.addPageHeader("APPENDICES AND REFERENCES"),this.pdf.setFontSize(11),this.pdf.text("Reference Documents:",20,60);let t=70;["Red Cross Disaster Operations Manual","Safety Protocols and Guidelines","Resource Request Procedures","Communication Plan","Evacuation Routes and Maps"].forEach(e=>{this.pdf.text("• ".concat(e),25,t),t+=8}),this.pdf.text("Emergency Contact Numbers:",20,t+10),t+=20,["National HQ: 1-800-RED-CROSS","State EOC: 850-815-4000","FEMA Region IV: 770-220-5200"].forEach(e=>{this.pdf.text("• ".concat(e),25,t),t+=8}),this.addPageFooter()}addFacilityTable(e,t){this.pdf.setFontSize(9),this.pdf.setFont("helvetica","bold"),this.pdf.text("Facility",20,60),this.pdf.text("County",80,60),this.pdf.text("Capacity",120,60),this.pdf.text("Staff",150,60),this.pdf.text("Gap",175,60),this.pdf.line(20,62,196,62),this.pdf.setFont("helvetica","normal");let a=70;e.forEach(e=>{var t,s,r,n;this.pdf.text(e.name.substring(0,25),20,a),this.pdf.text(e.county,80,a);let i=(null==(t=e.capacity)?void 0:t.maximum)||e.capacity||"-";this.pdf.text(i.toString(),120,a);let o=(null==(s=e.personnel)?void 0:s.have)||"-",l=(null==(r=e.personnel)?void 0:r.required)||"-";this.pdf.text("".concat(o,"/").concat(l),150,a);let d=(null==(n=e.personnel)?void 0:n.gap)||0;d>0?(this.pdf.setTextColor(255,0,0),this.pdf.text(d.toString(),175,a),this.pdf.setTextColor(0,0,0)):this.pdf.text("0",175,a),a+=7})}addPageHeader(e){this.pdf.setFillColor(237,28,36),this.pdf.rect(0,0,216,15,"F"),this.pdf.setTextColor(255,255,255),this.pdf.setFontSize(12),this.pdf.setFont("helvetica","bold"),this.pdf.text(e,108,10,{align:"center"}),this.pdf.setTextColor(0,0,0),this.pdf.setFont("helvetica","normal"),this.pdf.setFontSize(9),this.pdf.text("DR ".concat(o.operation.drNumber),20,25),this.pdf.text("".concat(o.operation.name),108,25,{align:"center"}),this.pdf.text("Period #".concat(o.operation.operationalPeriod.number),196,25,{align:"right"}),this.pdf.line(20,30,196,30)}addPageFooter(){this.options.includePageNumbers&&(this.pdf.setFontSize(9),this.pdf.text("Page ".concat(this.currentPage," of ").concat(this.totalPages),196,280,{align:"right"})),this.options.includeFooters&&(this.pdf.setFontSize(8),this.pdf.text("American Red Cross - Confidential",108,285,{align:"center"})),this.currentPage++}save(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"IAP.pdf";this.pdf.save(e)}getDataUrl(){return this.pdf.output("datauristring")}constructor(e={}){this.currentPage=1,this.totalPages=53,this.pdf=new ec.Ay({orientation:"portrait",unit:"mm",format:"letter"}),this.options={includePageNumbers:!0,includeHeaders:!0,includeFooters:!0,...e},this.pdf.setFont("helvetica")}}function eg(e){let{data:t=o,className:a=""}=e,[n,i]=(0,r.useState)(!1),[l,d]=(0,r.useState)(null),c=async()=>{i(!0);try{let e=new em({includePageNumbers:!0,includeHeaders:!0,includeFooters:!0}),a=await e.generateCompleteIAP(t),s=URL.createObjectURL(a),r=document.createElement("a");r.href=s,r.download="IAP_".concat(t.operation.drNumber,"_Period_").concat(t.operation.operationalPeriod.number,".pdf"),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s),alert("PDF generated successfully!")}catch(e){console.error("Error generating PDF:",e),alert("Error generating PDF. Please try again.")}finally{i(!1)}},p=async()=>{i(!0);try{let e=new em,a=await e.generateCompleteIAP(t),s=URL.createObjectURL(a);d(s)}catch(e){console.error("Error generating preview:",e),alert("Error generating preview. Please try again.")}finally{i(!1)}},h=()=>{l&&(URL.revokeObjectURL(l),d(null))};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex gap-2 ".concat(a),children:[(0,s.jsx)("button",{onClick:c,disabled:n,className:"\n            px-4 py-2 rounded-md font-medium\n            ".concat(n?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700","\n          "),children:n?(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Generating PDF..."]}):(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export PDF"]})}),(0,s.jsx)("button",{onClick:p,disabled:n,className:"\n            px-4 py-2 rounded-md font-medium\n            ".concat(n?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700","\n          "),children:(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsxs)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Preview PDF"]})})]}),l&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full h-5/6 flex flex-col",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"PDF Preview"}),(0,s.jsx)("button",{onClick:h,className:"p-2 hover:bg-gray-100 rounded-full",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsx)("div",{className:"flex-1 p-4",children:(0,s.jsx)("iframe",{src:l,className:"w-full h-full border rounded",title:"PDF Preview"})}),(0,s.jsxs)("div",{className:"p-4 border-t flex justify-end gap-2",children:[(0,s.jsx)("button",{onClick:h,className:"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50",children:"Close"}),(0,s.jsx)("button",{onClick:()=>{let e=document.createElement("a");e.href=l,e.download="IAP_".concat(t.operation.drNumber,"_Period_").concat(t.operation.operationalPeriod.number,".pdf"),e.click()},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Download PDF"})]})]})})]})}function eu(e){let{children:t,fallback:a=null}=e,[n,i]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{i(!0)},[]),n)?(0,s.jsx)(s.Fragment,{children:t}):(0,s.jsx)(s.Fragment,{children:a})}function ex(){let[e,t]=(0,r.useState)("cover"),a=()=>{let e=document.getElementById("iap-print-container");e&&(e.classList.add("print-mode"),setTimeout(()=>{window.print(),e.classList.remove("print-mode")},100))},n=[{id:"cover",title:"Cover Page & Checklist",startPage:1,endPage:1,content:()=>(0,s.jsx)(eb,{})},{id:"directors-message",title:"Director's Intent/Message",startPage:2,endPage:3,content:()=>(0,s.jsx)(ey,{})},{id:"contact-roster",title:"Contact Roster DRO HQ",startPage:4,endPage:6,content:()=>(0,s.jsx)(w,{})},{id:"org-chart",title:"Incident Organization Chart",startPage:7,endPage:8,content:()=>(0,s.jsx)(P,{})},{id:"priorities",title:"Incident Priorities and Objectives",startPage:9,endPage:10,content:()=>(0,s.jsx)(I,{})},{id:"sheltering-resources",title:"DRO - Sheltering Resources",startPage:11,endPage:12,content:()=>(0,s.jsx)(g,{})},{id:"feeding",title:"Work Assignments - Feeding",startPage:13,endPage:15,content:()=>(0,s.jsx)(u,{})},{id:"government-ops",title:"Work Assignments - Government Operations",startPage:23,endPage:25,content:()=>(0,s.jsx)(b,{})},{id:"damage-assessment",title:"Work Assignments - Damage Assessment",startPage:26,endPage:28,content:()=>(0,s.jsx)(y,{})},{id:"distribution",title:"Work Assignments - Distribution",startPage:29,endPage:31,content:()=>(0,s.jsx)(f,{})},{id:"individual-care",title:"Work Assignments - Individual Disaster Care",startPage:32,endPage:38,content:()=>(0,s.jsx)(j,{})},{id:"work-sites",title:"Work Sites and Facilities",startPage:39,endPage:44,content:()=>(0,s.jsx)(ed,{})},{id:"daily-schedule",title:"Daily Schedule",startPage:45,endPage:48,content:()=>(0,s.jsx)(eu,{fallback:(0,s.jsx)("div",{className:"p-4 text-gray-500",children:"Loading schedule..."}),children:(0,s.jsx)(ei,{})})},{id:"maps",title:"Maps and Geographic Information",startPage:49,endPage:51,content:()=>(0,s.jsx)(eo,{})},{id:"appendices",title:"Appendices and References",startPage:52,endPage:53,content:()=>(0,s.jsx)(el,{})}],l=t=>"all"===e||e===t;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i(),{id:"e802ae1244eb2a1b",children:"@media print{.no-print{display:none!important}.print-only{display:block!important}.page-break{page-break-after:always}@page{size:letter;margin:.75in}body{font-size:10pt}h2{font-size:14pt;page-break-after:avoid}table{page-break-inside:avoid}.section-content{display:block!important}}@media screen{.print-only{display:none!important}}"}),(0,s.jsx)("div",{className:"jsx-e802ae1244eb2a1b min-h-screen bg-gray-50",children:(0,s.jsxs)("div",{id:"iap-print-container",className:"jsx-e802ae1244eb2a1b max-w-7xl mx-auto p-4 iap-document",children:[(0,s.jsx)("div",{className:"jsx-e802ae1244eb2a1b bg-red-600 text-white p-4 rounded-t-lg",children:(0,s.jsxs)("div",{className:"jsx-e802ae1244eb2a1b flex justify-between items-start",children:[(0,s.jsxs)("div",{className:"jsx-e802ae1244eb2a1b",children:[(0,s.jsxs)("h1",{className:"jsx-e802ae1244eb2a1b text-2xl font-bold",children:["Incident Action Plan #",o.operation.operationalPeriod.number]}),(0,s.jsxs)("p",{className:"jsx-e802ae1244eb2a1b",children:["DR ",o.operation.drNumber," - ",o.operation.name]}),(0,s.jsxs)("p",{className:"jsx-e802ae1244eb2a1b text-sm",children:["Operational Period: ",o.operation.operationalPeriod.start," to ",o.operation.operationalPeriod.end]})]}),(0,s.jsxs)("div",{className:"jsx-e802ae1244eb2a1b flex gap-2 items-center",children:[(0,s.jsx)(eg,{data:o}),(0,s.jsxs)("div",{className:"jsx-e802ae1244eb2a1b flex gap-1 no-print",children:[(0,s.jsx)("button",{onClick:()=>{t("all")},title:"Expand All Sections",className:"jsx-e802ae1244eb2a1b bg-white text-red-600 px-3 py-2 rounded hover:bg-gray-100 text-sm font-medium",children:"⬇ Expand All"}),(0,s.jsx)("button",{onClick:()=>{t("")},title:"Collapse All Sections",className:"jsx-e802ae1244eb2a1b bg-white text-red-600 px-3 py-2 rounded hover:bg-gray-100 text-sm font-medium",children:"⬆ Collapse All"})]}),(0,s.jsxs)("button",{onClick:()=>{window.location.href="/disaster-ops-v3"},className:"jsx-e802ae1244eb2a1b bg-white text-red-600 px-4 py-2 rounded hover:bg-gray-100 font-semibold flex items-center gap-2 no-print",children:[(0,s.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-e802ae1244eb2a1b w-5 h-5",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18",className:"jsx-e802ae1244eb2a1b"})}),"Return to Dashboard"]})]})]})}),(0,s.jsx)("div",{className:"jsx-e802ae1244eb2a1b bg-white border-2 border-gray-200 screen-only",children:n.map(a=>(0,s.jsxs)("div",{className:"jsx-e802ae1244eb2a1b border-b border-gray-200 last:border-b-0",children:[(0,s.jsxs)("button",{onClick:()=>{var s;t(e===(s=a.id)?"":s)},className:"jsx-e802ae1244eb2a1b w-full px-4 py-3 flex items-center justify-between hover:bg-gray-50 transition-colors no-print",children:[(0,s.jsxs)("div",{className:"jsx-e802ae1244eb2a1b flex items-center space-x-4",children:[(0,s.jsx)("span",{className:"jsx-e802ae1244eb2a1b "+"transform transition-transform ".concat(l(a.id)?"rotate-90":""),children:"▶"}),(0,s.jsxs)("div",{className:"jsx-e802ae1244eb2a1b text-left",children:[(0,s.jsx)("div",{className:"jsx-e802ae1244eb2a1b font-semibold",children:a.title}),(0,s.jsxs)("div",{className:"jsx-e802ae1244eb2a1b text-sm text-gray-500",children:["Pages ",a.startPage,"-",a.endPage]})]})]}),(0,s.jsxs)("div",{className:"jsx-e802ae1244eb2a1b text-sm text-gray-500",children:[a.endPage-a.startPage+1," page",a.endPage-a.startPage>0?"s":""]})]}),l(a.id)&&(0,s.jsx)("div",{className:"jsx-e802ae1244eb2a1b border-t border-gray-200",children:(0,s.jsx)("div",{className:"jsx-e802ae1244eb2a1b p-4 bg-gray-50",children:a.content()})})]},a.id))}),(0,s.jsx)("div",{className:"jsx-e802ae1244eb2a1b print-only",children:n.map((e,t)=>{let a=1;for(let e=0;e<t;e++)a+=n[e].endPage-n[e].startPage+1;return(0,s.jsxs)("div",{className:"jsx-e802ae1244eb2a1b section-print page-break",children:[(0,s.jsx)("h2",{className:"jsx-e802ae1244eb2a1b text-xl font-bold mb-4",children:e.title}),(0,s.jsx)("div",{className:"jsx-e802ae1244eb2a1b section-content",children:e.content()}),(0,s.jsxs)("div",{className:"jsx-e802ae1244eb2a1b text-center text-sm mt-8",children:["Page ",a," of ",n.reduce((e,t)=>e+(t.endPage-t.startPage+1),0)]})]},e.id)})}),(0,s.jsxs)("div",{className:"jsx-e802ae1244eb2a1b bg-gray-100 p-4 rounded-b-lg flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"jsx-e802ae1244eb2a1b flex space-x-2",children:[(0,s.jsxs)("button",{onClick:a,className:"jsx-e802ae1244eb2a1b bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 flex items-center gap-2",children:[(0,s.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-e802ae1244eb2a1b w-5 h-5",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",className:"jsx-e802ae1244eb2a1b"})}),"Export to PDF"]}),(0,s.jsxs)("button",{onClick:()=>{a()},className:"jsx-e802ae1244eb2a1b bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 flex items-center gap-2",children:[(0,s.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-e802ae1244eb2a1b w-5 h-5",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z",className:"jsx-e802ae1244eb2a1b"})}),"Print"]}),(0,s.jsxs)("button",{onClick:()=>{let e=encodeURIComponent("IAP #".concat(o.operation.operationalPeriod.number," - DR ").concat(o.operation.drNumber)),t=encodeURIComponent("Please find attached the Incident Action Plan for ".concat(o.operation.name,".\n\nOperational Period: ").concat(o.operation.operationalPeriod.start," to ").concat(o.operation.operationalPeriod.end,"\n\nPrepared by: ").concat(o.operation.preparedBy));window.location.href="mailto:?subject=".concat(e,"&body=").concat(t)},className:"jsx-e802ae1244eb2a1b bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 flex items-center gap-2",children:[(0,s.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-e802ae1244eb2a1b w-5 h-5",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z",className:"jsx-e802ae1244eb2a1b"})}),"Email"]})]}),(0,s.jsxs)("div",{className:"jsx-e802ae1244eb2a1b text-sm text-gray-600",children:["Last Updated: ",new Date().toLocaleString()]})]})]})})]})}function eb(){return(0,s.jsx)(d,{drNumber:o.operation.drNumber,operationName:o.operation.name,operationalPeriod:o.operation.operationalPeriod,preparedBy:{name:o.operation.preparedBy,title:o.operation.preparedByTitle},approvedBy:{name:o.operation.approvedBy,title:o.operation.approvedByTitle},onPhotoUpdate:(e,t)=>{console.log("Photo updated:",e,t)}})}function ey(){return(0,s.jsx)(p,{onContentChange:e=>{console.log("Director message updated:",e)}})}let ef=null;async function ej(){return ef||(ef=ee.getInstance({permanent:{enabled:!1,url:X.env.NEXT_PUBLIC_SUPABASE_URL,apiKey:X.env.NEXT_PUBLIC_SUPABASE_ANON_KEY},temporary:{dbName:"disaster_ops_v3",version:2}})),ef}async function ev(){let e=await ej(),t=(await e.getEventsByType(O.FACILITY_CREATED)).map(e=>({id:e.payload.facilityId,...e.payload}));await e.getEventsByType(O.FACILITY_UPDATED);let a=await e.getEventsByType(O.FACILITY_PERSONNEL_ASSIGNED),s=await e.getEventsByType(O.FACILITY_RESOURCE_ADDED);return t.forEach(e=>{a.filter(t=>t.payload.facilityId===e.id).forEach(t=>{var a;let s=null==(a=e.positions)?void 0:a.find(e=>e.code===t.payload.positionCode);s&&(s.required=t.payload.required,s.have=t.payload.have,s.gap=t.payload.gap)}),s.filter(t=>t.payload.facilityId===e.id).forEach(t=>{var a;let s=null==(a=e.assets)?void 0:a.find(e=>e.type===t.payload.assetType);s&&(s.required=t.payload.required,s.have=t.payload.have,s.gap=t.payload.gap)})}),t}let eN={sheltering:[{code:"SHEL-MN",title:"Shelter Manager"},{code:"SHEL-SV",title:"Shelter Supervisor"},{code:"SHEL-SA",title:"Shelter Associate"},{code:"DHS-MN",title:"Disaster Health Manager"},{code:"DHS-SV",title:"Disaster Health Supervisor"},{code:"DMH-MN",title:"Mental Health Manager"},{code:"DSC-MN",title:"Spiritual Care Manager"}],feeding:[{code:"FEED-MN",title:"Feeding Manager"},{code:"FEED-SV",title:"Feeding Supervisor"},{code:"FEED-SA",title:"Feeding Associate"},{code:"ERV-OP",title:"ERV Operator"},{code:"ERV-AS",title:"ERV Assistant"},{code:"KITCH-MN",title:"Kitchen Manager"}],government:[{code:"GOV-LO",title:"Government Liaison Officer"},{code:"GOV-CO",title:"Government Coordinator"},{code:"EOC-REP",title:"EOC Representative"},{code:"PUB-INF",title:"Public Information Officer"}],damage_assessment:[{code:"DA-MN",title:"Damage Assessment Manager"},{code:"DA-TL",title:"DA Team Lead"},{code:"DA-AS",title:"DA Assessor"},{code:"DA-DR",title:"DA Driver"}],distribution:[{code:"DIST-MN",title:"Distribution Manager"},{code:"DIST-SV",title:"Distribution Supervisor"},{code:"WARE-MN",title:"Warehouse Manager"},{code:"WARE-AS",title:"Warehouse Associate"},{code:"TRANS-CO",title:"Transportation Coordinator"}],individual_care:[{code:"CAS-MN",title:"Casework Manager"},{code:"CAS-SV",title:"Casework Supervisor"},{code:"CAS-AS",title:"Casework Associate"},{code:"RC-MN",title:"Reception Center Manager"},{code:"RC-AS",title:"Reception Center Associate"}]},eC={sheltering:[{code:"COT",name:"Cots",unit:"each"},{code:"BLANK",name:"Blankets",unit:"each"},{code:"PKIT",name:"Personal Comfort Kits",unit:"kit"},{code:"TOWEL",name:"Towels",unit:"each"},{code:"SIGNAGE",name:"Shelter Signage Package",unit:"set"}],feeding:[{code:"ERV",name:"Emergency Response Vehicle",unit:"vehicle"},{code:"CAMBRO",name:"Cambros",unit:"each"},{code:"COOLER",name:"Coolers",unit:"each"},{code:"MEAL",name:"Prepared Meals",unit:"meal"},{code:"WATER",name:"Water (bottles)",unit:"case"}],government:[{code:"LAPTOP",name:"Laptops",unit:"each"},{code:"PHONE",name:"Satellite Phones",unit:"each"},{code:"RADIO",name:"Two-Way Radios",unit:"each"}],damage_assessment:[{code:"TABLET",name:"Assessment Tablets",unit:"each"},{code:"VEHICLE",name:"Assessment Vehicles",unit:"vehicle"},{code:"PPE",name:"PPE Kits",unit:"kit"},{code:"CAMERA",name:"Digital Cameras",unit:"each"}],distribution:[{code:"PALLET",name:"Pallets",unit:"each"},{code:"FORKLIFT",name:"Forklifts",unit:"each"},{code:"TRUCK",name:"Box Trucks",unit:"vehicle"},{code:"CLEANUP",name:"Cleanup Kits",unit:"kit"}],individual_care:[{code:"FORM",name:"Case Forms",unit:"pack"},{code:"TABLET",name:"Client Tablets",unit:"each"},{code:"PRINTER",name:"Mobile Printers",unit:"each"},{code:"CNA",name:"Client Assistance Cards",unit:"card"}]};function ew(e){let{onNavigate:t}=e,[a,n]=(0,r.useState)([]),[i,l]=(0,r.useState)(null),[d,c]=(0,r.useState)("sheltering"),[p,h]=(0,r.useState)(!1),[m,g]=(0,r.useState)(!1),[u,x]=(0,r.useState)(!0),[b,y]=(0,r.useState)([]),f={sheltering:"Sheltering",feeding:"Feeding",government:"Government Operations",damage_assessment:"Damage Assessment",distribution:"Distribution",individual_care:"Individual Disaster Care"};(0,r.useEffect)(()=>{(async()=>{try{let e=await ev();y(e)}catch(e){console.error("Error loading facilities:",e)}})()},[]);let j=(()=>{let e=[];switch(d){case"sheltering":e=o.shelteringFacilities||[];break;case"feeding":e=o.feedingFacilities||[];break;default:e=[]}return e})(),v=()=>{l({id:"".concat(d,"-").concat(Date.now()),operationalPeriod:"1",discipline:d,site:{name:"",type:"sheltering"===d?"Managed Client Shelter":"Standard Site",address:"",county:"",capacity:0},personnel:{positions:eN[d].map(e=>({...e,required:0,have:0,gap:0}))},assets:{items:eC[d].map(e=>({...e,required:0,have:0,gap:0}))},status:"draft",createdBy:"Current User",updatedAt:new Date().toISOString()}),g(!0)},N=(e,t,a)=>{if(i){let s={...i};s.personnel.positions[e][t]=a,s.personnel.positions[e].gap=s.personnel.positions[e].required-s.personnel.positions[e].have,l(s)}},C=(e,t,a)=>{if(i){let s={...i};s.assets.items[e][t]=a,s.assets.items[e].gap=s.assets.items[e].required-s.assets.items[e].have,l(s)}},w=(null==i?void 0:i.personnel.positions.reduce((e,t)=>e+Math.max(0,t.gap),0))||0,S=(null==i?void 0:i.assets.items.filter(e=>e.gap>0).length)||0;return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,s.jsxs)("div",{className:"flex-shrink-0 transition-all duration-300 h-screen sticky top-0 ".concat(u?"w-80 bg-white shadow-lg":"w-12 bg-green-600 shadow-xl"),children:[(0,s.jsxs)("div",{className:"p-4 border-b flex justify-between items-center ".concat(u?"":"bg-green-700"),children:[(0,s.jsx)("h3",{className:"font-bold text-gray-900 ".concat(!u&&"hidden"),children:"Facilities"}),(0,s.jsx)("button",{onClick:()=>x(!u),className:"".concat(u?"text-gray-500 hover:text-gray-700":"text-white hover:text-gray-200"),children:u?"◀":"▶"})]}),u&&(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[(0,s.jsxs)("div",{className:"p-4 border-b",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{onClick:()=>h(!p),className:"w-full flex items-center justify-between px-3 py-2 bg-gray-50 border border-gray-300 rounded-md shadow-sm hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-red-500",children:[(0,s.jsx)("span",{className:"font-medium text-sm",children:f[d]}),(0,s.jsx)("svg",{className:"ml-2 h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),p&&(0,s.jsx)("div",{className:"absolute z-10 mt-1 w-full bg-white border border-gray-300 rounded-md shadow-lg",children:Object.entries(f).map(e=>{let[t,a]=e;return(0,s.jsx)("button",{onClick:()=>{c(t),h(!1),l(null)},className:"block w-full text-left px-3 py-2 text-sm hover:bg-gray-100 ".concat(d===t?"bg-red-50 text-red-600":"text-gray-700"),children:a},t)})})]}),(0,s.jsxs)("span",{className:"text-xs text-gray-600 mt-2 block",children:[j.length," facilities"]})]}),(0,s.jsx)("div",{className:"p-4 overflow-y-auto flex-1",children:(0,s.jsx)("div",{className:"space-y-2",children:j.map(e=>(0,s.jsxs)("button",{className:"w-full text-left p-3 rounded-lg hover:bg-gray-100 border border-gray-200",onClick:()=>{let t=a.find(t=>t.site.name===e.name);t?l(t):v()},children:[(0,s.jsx)("div",{className:"font-medium",children:e.name}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:e.county}),e.capacity&&(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:["Capacity: ","object"==typeof e.capacity?"".concat(e.capacity.current||0,"/").concat(e.capacity.maximum||0):e.capacity]})]},e.id||e.name))})})]})]}),(0,s.jsx)("div",{className:"flex-1 overflow-x-auto",children:(0,s.jsxs)("div",{className:"px-6 lg:px-8 py-6 min-w-0",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("button",{onClick:()=>null==t?void 0:t("dashboard"),className:"text-red-600 hover:text-red-800 flex items-center mb-4",children:"← Back to Dashboard"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Facility Management"}),(0,s.jsx)("p",{className:"text-gray-600 mt-2",children:"Comprehensive work assignment management with gaps and assets"})]})]}),(0,s.jsxs)("div",{className:"mb-6 flex gap-4",children:[(0,s.jsxs)("button",{onClick:v,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:["Create New ",f[d]," Assignment"]}),i&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>{i&&(m?n([...a,i]):n(a.map(e=>e.id===i.id?i:e)),g(!1))},className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"Save Assignment"}),(0,s.jsx)("button",{onClick:()=>{l(null),g(!1)},className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Cancel"})]})]}),i?(0,s.jsxs)("div",{className:"space-y-6 w-full",children:[(0,s.jsxs)("div",{className:"bg-white shadow rounded-lg p-6 w-full",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Site Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Site Name"}),(0,s.jsx)("input",{type:"text",value:i.site.name,onChange:e=>l({...i,site:{...i.site,name:e.target.value}}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Type"}),(0,s.jsxs)("select",{value:i.site.type,onChange:e=>l({...i,site:{...i.site,type:e.target.value}}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500",children:[(0,s.jsx)("option",{children:"Standard Site"}),(0,s.jsx)("option",{children:"Managed Client Shelter"}),(0,s.jsx)("option",{children:"Partner Managed"}),(0,s.jsx)("option",{children:"Mobile Unit"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),(0,s.jsx)("input",{type:"text",value:i.site.address,onChange:e=>l({...i,site:{...i.site,address:e.target.value}}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"County"}),(0,s.jsx)("input",{type:"text",value:i.site.county,onChange:e=>l({...i,site:{...i.site,county:e.target.value}}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-red-500 focus:border-red-500"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white shadow rounded-lg p-6 w-full",children:[(0,s.jsxs)("h2",{className:"text-xl font-bold mb-4",children:["Personnel Requirements",w>0&&(0,s.jsxs)("span",{className:"ml-2 text-red-600",children:["(",w," gaps)"]})]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Position"}),(0,s.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Required"}),(0,s.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Have"}),(0,s.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gap"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:i.personnel.positions.map((e,t)=>(0,s.jsxs)("tr",{className:e.gap>0?"bg-red-50":"",children:[(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:e.code})]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,s.jsx)("input",{type:"number",min:"0",value:e.required,onChange:e=>N(t,"required",parseInt(e.target.value)||0),className:"w-20 text-center px-2 py-1 border border-gray-300 rounded-md focus:outline-none focus:ring-red-500 focus:border-red-500"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,s.jsx)("input",{type:"number",min:"0",value:e.have,onChange:e=>N(t,"have",parseInt(e.target.value)||0),className:"w-20 text-center px-2 py-1 border border-gray-300 rounded-md focus:outline-none focus:ring-red-500 focus:border-red-500"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,s.jsx)("span",{className:"text-sm font-medium ".concat(e.gap>0?"text-red-600":"text-green-600"),children:e.gap})})]},e.code))})]})})]}),(0,s.jsxs)("div",{className:"bg-white shadow rounded-lg p-6 w-full",children:[(0,s.jsxs)("h2",{className:"text-xl font-bold mb-4",children:["Asset Requirements",S>0&&(0,s.jsxs)("span",{className:"ml-2 text-red-600",children:["(",S," gaps)"]})]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Asset"}),(0,s.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),(0,s.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Required"}),(0,s.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Have"}),(0,s.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gap"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:i.assets.items.map((e,t)=>(0,s.jsxs)("tr",{className:e.gap>0?"bg-red-50":"",children:[(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:e.code})]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm text-gray-500",children:e.unit}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,s.jsx)("input",{type:"number",min:"0",value:e.required,onChange:e=>C(t,"required",parseInt(e.target.value)||0),className:"w-20 text-center px-2 py-1 border border-gray-300 rounded-md focus:outline-none focus:ring-red-500 focus:border-red-500"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,s.jsx)("input",{type:"number",min:"0",value:e.have,onChange:e=>C(t,"have",parseInt(e.target.value)||0),className:"w-20 text-center px-2 py-1 border border-gray-300 rounded-md focus:outline-none focus:ring-red-500 focus:border-red-500"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,s.jsx)("span",{className:"text-sm font-medium ".concat(e.gap>0?"text-red-600":"text-green-600"),children:e.gap})})]},e.code))})]})})]})]}):(0,s.jsx)("div",{className:"bg-white shadow rounded-lg p-12 text-center",children:(0,s.jsx)("p",{className:"text-gray-500 text-lg",children:"Select a facility from the sidebar or create a new assignment"})})]})})]})}function eS(){let[e,t]=(0,r.useState)("facilities"),[a,n]=(0,r.useState)(!1),[i,o]=(0,r.useState)(""),[l,d]=(0,r.useState)("op-current"),c=(0,r.useRef)(null);(0,r.useEffect)(()=>{es(l)},[l]);let{schedule:p,loading:h,updateEntry:m,addEntry:g,deleteEntry:u}=en(l),{facilities:x,loading:b,updateFacility:y,getFacilitiesByType:f}=function(e,t){let{data:a,loading:s,error:n,lastUpdate:i,updateRecord:o,addRecord:l,refresh:d}=er("facilities",e),c=(0,r.useCallback)(e=>a.filter(t=>t.facility_type===e),[a]),p=(0,r.useCallback)(e=>a.find(t=>t.id===e),[a]);return{facilities:a,allFacilities:a,loading:s,error:n,lastUpdate:i,updateFacility:o,addFacility:l,getFacilitiesByType:c,getFacilityById:p,refresh:d}}(l),{personnel:j,loading:v}=function(e){let{data:t,loading:a,error:s,lastUpdate:n,refresh:i}=er("personnel",e),o=(0,r.useCallback)(e=>t.filter(t=>t.section===e),[t]),l=(0,r.useCallback)(e=>t.filter(t=>t.primary_position===e),[t]);return{personnel:t,loading:a,error:s,lastUpdate:n,getPersonnelBySection:o,getPersonnelByPosition:l,refresh:i}}(l),{gaps:N,loading:C,criticalGaps:w}=function(e,t,a){let{data:s,loading:n,error:i,lastUpdate:o,updateRecord:l,addRecord:d,refresh:c}=er("gaps",e),p=s.filter(e=>"open"===e.status&&"critical"===e.priority&&e.quantity_needed-(e.quantity_available||0)>0),h=(0,r.useCallback)(e=>s.filter(t=>t.priority===e),[s]),m=(0,r.useCallback)(e=>s.filter(t=>t.gap_type===e&&"open"===t.status).reduce((e,t)=>e+(t.quantity_needed-(t.quantity_available||0)),0),[s]);return{gaps:s,allGaps:s,criticalGaps:p,loading:n,error:i,lastUpdate:o,updateGap:l,addGap:d,getGapsByPriority:h,getTotalGapByType:m,refresh:c}}(l),{assignments:S,loading:D,getAssignmentsByType:E}=function(e,t){let{data:a,loading:s,error:n,lastUpdate:i,updateRecord:o,addRecord:l,refresh:d}=er("work_assignments",e),c=(0,r.useCallback)(e=>a.filter(t=>t.status===e),[a]),p=(0,r.useCallback)(e=>a.filter(t=>t.assignment_type===e),[a]);return{assignments:a,allAssignments:a,loading:s,error:n,lastUpdate:i,updateAssignment:o,addAssignment:l,getAssignmentsByStatus:c,getAssignmentsByType:p,refresh:d}}(l),A=[{id:"facilities",name:"Facilities & Locations",category:"facilities",description:"All facilities: shelters, feeding, government, distribution, care, assessment",icon:"\uD83C\uDFE2",hasImport:!0,hasExport:!0,hasEdit:!0,dataCount:x.length},{id:"personnel-roster",name:"Personnel Roster",category:"personnel",description:"All operation personnel and contact information",icon:"\uD83D\uDC65",hasImport:!0,hasExport:!0,hasEdit:!0,dataCount:j.length},{id:"gaps",name:"Gap Analysis",category:"gaps",description:"All Red Cross gaps: personnel, equipment, supplies, vehicles, space",icon:"⚠️",hasImport:!1,hasExport:!0,hasEdit:!0,dataCount:N.length},{id:"assets",name:"Assets & Resources",category:"assets",description:"All vehicles, equipment, and supplies (single unified table)",icon:"\uD83D\uDCCB",hasImport:!0,hasExport:!0,hasEdit:!0,dataCount:0},{id:"schedules-daily",name:"Daily Schedule",category:"schedules",description:"Meetings, briefings, and daily timeline",icon:"\uD83D\uDCC5",hasImport:!0,hasExport:!0,hasEdit:!0,dataCount:p.length},{id:"work-assignments",name:"Work Assignments",category:"work-assignments",description:"Task assignments and completion tracking",icon:"✓",hasImport:!1,hasExport:!0,hasEdit:!0,dataCount:S.length}],k={facilities:"Facilities & Locations",personnel:"Personnel & Contacts",gaps:"Gap Analysis",assets:"Assets & Resources",schedules:"Schedules & Planning",contacts:"Contact Information",organizations:"Organizations","work-assignments":"Work Assignments"},P=A.find(t=>t.id===e),I=async e=>{var t;let a=null==(t=e.target.files)?void 0:t[0];if(!a)return;let s=new FileReader;s.onload=e=>{var t;console.log("Importing CSV:",(null==(t=e.target)?void 0:t.result).substring(0,100)),alert("Import feature for ".concat(null==P?void 0:P.name," coming soon!"))},s.readAsText(a)},T=A.reduce((e,t)=>(e[t.category]||(e[t.category]=[]),e[t.category].push(t),e),{}),O=A.filter(e=>e.name.toLowerCase().includes(i.toLowerCase())||e.description.toLowerCase().includes(i.toLowerCase()));return(0,s.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,s.jsxs)("div",{className:"w-80 bg-white shadow-lg border-r",children:[(0,s.jsxs)("div",{className:"p-4 border-b",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"\uD83D\uDCCA Tables & Data Hub"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Single Source of Truth - Master Database"})]}),(0,s.jsx)("div",{className:"p-4 border-b",children:(0,s.jsx)("input",{type:"text",placeholder:"Search tables...",value:i,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:border-blue-500"})}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto",children:Object.entries(T).map(a=>{let[r,n]=a,i=n.filter(e=>O.includes(e));return 0===i.length?null:(0,s.jsxs)("div",{className:"border-b",children:[(0,s.jsx)("div",{className:"px-4 py-2 bg-gray-100",children:(0,s.jsx)("h3",{className:"font-semibold text-gray-700 text-sm",children:k[r]})}),(0,s.jsx)("div",{className:"space-y-1 p-2",children:i.map(a=>(0,s.jsxs)("button",{onClick:()=>t(a.id),className:"w-full text-left p-3 rounded-lg transition-colors ".concat(e===a.id?"bg-blue-100 border-2 border-blue-500 text-blue-900":"hover:bg-gray-100 border-2 border-transparent"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"text-lg",children:a.icon}),(0,s.jsx)("span",{className:"font-medium text-sm",children:a.name})]}),(0,s.jsx)("span",{className:"text-xs bg-gray-200 px-2 py-1 rounded-full",children:a.dataCount||0})]}),(0,s.jsx)("p",{className:"text-xs text-gray-600 mt-1 ml-7",children:a.description})]},a.id))})]},r)})})]}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,s.jsx)("div",{className:"bg-white shadow-sm border-b px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-2xl font-bold text-gray-800 flex items-center",children:[null==P?void 0:P.icon," ",null==P?void 0:P.name]}),(0,s.jsx)("p",{className:"text-gray-600 text-sm mt-1",children:null==P?void 0:P.description})]}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(null==P?void 0:P.hasImport)&&(0,s.jsx)("button",{onClick:()=>{var e;return null==(e=c.current)?void 0:e.click()},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",children:"\uD83D\uDCE5 Import CSV"}),(null==P?void 0:P.hasExport)&&(0,s.jsx)("button",{onClick:()=>{if(!P)return;let t="";switch(e){case"facilities":t="Name,Type,County,Address,Status,Capacity\n",x.forEach(e=>{var a;t+='"'.concat(e.name,'","').concat(e.facility_type,'","').concat(e.county,'","').concat(e.address,'","').concat(e.status,'","').concat((null==(a=e.capacity)?void 0:a.maximum)||0,'"\n')});break;case"personnel-roster":t="Name,Position,Email,Phone,Section\n",j.forEach(e=>{t+='"'.concat(e.first_name," ").concat(e.last_name,'","').concat(e.primary_position,'","').concat(e.email,'","').concat(e.phone,'","').concat(e.section,'"\n')});break;case"schedules-daily":t="Time,Event,Location,Responsible Party,Status\n",p.forEach(e=>{t+='"'.concat(e.time,'","').concat(e.event_name,'","').concat(e.location,'","').concat(e.responsible_party,'","').concat(e.status,'"\n')});break;case"gaps":t="Type,Category,Facility,Needed,Available,Gap,Priority\n",N.forEach(e=>{t+='"'.concat(e.gap_type,'","').concat(e.gap_category,'","').concat(e.facility_id,'","').concat(e.quantity_needed,'","').concat(e.quantity_available,'","').concat(e.quantity_needed-e.quantity_available,'","').concat(e.priority,'"\n')});break;default:t="Export not yet implemented for this table\n"}let a=new Blob([t],{type:"text/csv"}),s=URL.createObjectURL(a),r=document.createElement("a");r.href=s,r.download="".concat(P.name.replace(/\s+/g,"_").toLowerCase(),".csv"),r.click(),URL.revokeObjectURL(s)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"\uD83D\uDCE4 Export CSV"}),(null==P?void 0:P.hasEdit)&&(0,s.jsx)("button",{onClick:()=>n(!a),className:"px-4 py-2 rounded-lg transition-colors text-sm ".concat(a?"bg-gray-600 text-white hover:bg-gray-700":"bg-orange-600 text-white hover:bg-orange-700"),children:a?"\uD83D\uDC41️ View Mode":"✏️ Edit Table"})]})]})}),(0,s.jsx)("div",{className:"flex-1 overflow-auto p-6 bg-white",children:(()=>{switch(e){case"facilities":return(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-200",children:[(0,s.jsx)("th",{className:"p-2 text-left",children:"Facility Name"}),(0,s.jsx)("th",{className:"p-2 text-left",children:"Type"}),(0,s.jsx)("th",{className:"p-2 text-left",children:"County"}),(0,s.jsx)("th",{className:"p-2 text-left",children:"Address"}),(0,s.jsx)("th",{className:"p-2 text-center",children:"Capacity"}),(0,s.jsx)("th",{className:"p-2 text-center",children:"Current"}),(0,s.jsx)("th",{className:"p-2 text-left",children:"Status"})]})}),(0,s.jsx)("tbody",{children:b?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:7,className:"p-4 text-center text-gray-500",children:"Loading facilities..."})}):0===x.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:7,className:"p-4 text-center text-gray-500",children:'No facilities found. Click "Edit Table" to add facilities.'})}):x.map((e,t)=>{var a,r,n,i,o,l;return(0,s.jsxs)("tr",{className:t%2==0?"bg-white":"bg-gray-50",children:[(0,s.jsx)("td",{className:"p-2 font-semibold",children:e.name}),(0,s.jsx)("td",{className:"p-2",children:(0,s.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("shelter"===e.facility_type?"bg-blue-100 text-blue-800":"feeding"===e.facility_type?"bg-green-100 text-green-800":"government"===e.facility_type?"bg-purple-100 text-purple-800":"distribution"===e.facility_type?"bg-orange-100 text-orange-800":"care"===e.facility_type?"bg-red-100 text-red-800":"assessment"===e.facility_type?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:(null==(a=e.facility_type)?void 0:a.charAt(0).toUpperCase())+(null==(r=e.facility_type)?void 0:r.slice(1))||"Unknown"})}),(0,s.jsx)("td",{className:"p-2",children:e.county||"Unknown"}),(0,s.jsx)("td",{className:"p-2",children:e.address||"No address"}),(0,s.jsx)("td",{className:"p-2 text-center",children:(null==(n=e.capacity)?void 0:n.maximum)||0}),(0,s.jsx)("td",{className:"p-2 text-center",children:(null==(i=e.capacity)?void 0:i.current)||0}),(0,s.jsx)("td",{className:"p-2",children:(0,s.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("open"===e.status?"bg-green-100 text-green-800":"planned"===e.status?"bg-yellow-100 text-yellow-800":"closed"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:(null==(o=e.status)?void 0:o.charAt(0).toUpperCase())+(null==(l=e.status)?void 0:l.slice(1))||"Unknown"})})]},e.id)})})]});case"personnel-roster":return(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-200",children:[(0,s.jsx)("th",{className:"p-2 text-left",children:"Name"}),(0,s.jsx)("th",{className:"p-2 text-left",children:"Position"}),(0,s.jsx)("th",{className:"p-2 text-left",children:"Section"}),(0,s.jsx)("th",{className:"p-2 text-left",children:"Email"}),(0,s.jsx)("th",{className:"p-2 text-left",children:"Phone"}),(0,s.jsx)("th",{className:"p-2 text-left",children:"Radio"})]})}),(0,s.jsx)("tbody",{children:v?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:6,className:"p-4 text-center text-gray-500",children:"Loading personnel..."})}):0===j.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:6,className:"p-4 text-center text-gray-500",children:"No personnel found. Add personnel to see roster."})}):j.map((e,t)=>(0,s.jsxs)("tr",{className:t%2==0?"bg-white":"bg-gray-50",children:[(0,s.jsxs)("td",{className:"p-2 font-semibold",children:[e.first_name," ",e.last_name]}),(0,s.jsx)("td",{className:"p-2",children:e.primary_position||"-"}),(0,s.jsx)("td",{className:"p-2",children:e.section||"-"}),(0,s.jsx)("td",{className:"p-2",children:e.email||"-"}),(0,s.jsx)("td",{className:"p-2",children:e.phone||"-"}),(0,s.jsx)("td",{className:"p-2",children:e.radio_call_sign||"-"})]},e.id))})]});case"schedules-daily":return(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-200",children:[(0,s.jsx)("th",{className:"p-2 text-left",children:"Time"}),(0,s.jsx)("th",{className:"p-2 text-left",children:"Event"}),(0,s.jsx)("th",{className:"p-2 text-left",children:"Location"}),(0,s.jsx)("th",{className:"p-2 text-left",children:"Responsible Party"}),(0,s.jsx)("th",{className:"p-2 text-left",children:"Type"}),(0,s.jsx)("th",{className:"p-2 text-left",children:"Status"}),(0,s.jsx)("th",{className:"p-2 text-center",children:"Priority"})]})}),(0,s.jsx)("tbody",{children:h?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:7,className:"p-4 text-center text-gray-500",children:"Loading schedule..."})}):0===p.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:7,className:"p-4 text-center text-gray-500",children:"No events scheduled. Add events to see daily schedule."})}):p.map((e,t)=>{var a,r,n,i;return(0,s.jsxs)("tr",{className:t%2==0?"bg-white":"bg-gray-50",children:[(0,s.jsx)("td",{className:"p-2 font-mono",children:e.time}),(0,s.jsx)("td",{className:"p-2 font-semibold",children:e.event_name}),(0,s.jsx)("td",{className:"p-2",children:e.location||"-"}),(0,s.jsx)("td",{className:"p-2",children:e.responsible_party||"-"}),(0,s.jsx)("td",{className:"p-2",children:(0,s.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("briefing"===e.event_type?"bg-blue-100 text-blue-800":"operation"===e.event_type?"bg-green-100 text-green-800":"meeting"===e.event_type?"bg-purple-100 text-purple-800":"deadline"===e.event_type?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:(null==(a=e.event_type)?void 0:a.charAt(0).toUpperCase())+(null==(r=e.event_type)?void 0:r.slice(1))||"Event"})}),(0,s.jsx)("td",{className:"p-2",children:(0,s.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("completed"===e.status?"bg-green-100 text-green-800":"in-progress"===e.status?"bg-blue-100 text-blue-800":"cancelled"===e.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:(null==(n=e.status)?void 0:n.charAt(0).toUpperCase())+(null==(i=e.status)?void 0:i.slice(1))||"Scheduled"})}),(0,s.jsx)("td",{className:"p-2 text-center",children:e.priority||5})]},e.id)})})]});case"gaps":return(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-200",children:[(0,s.jsx)("th",{className:"p-2 text-left",children:"Gap Type"}),(0,s.jsx)("th",{className:"p-2 text-left",children:"Category"}),(0,s.jsx)("th",{className:"p-2 text-left",children:"Facility"}),(0,s.jsx)("th",{className:"p-2 text-center",children:"Needed"}),(0,s.jsx)("th",{className:"p-2 text-center",children:"Available"}),(0,s.jsx)("th",{className:"p-2 text-center",children:"Gap"}),(0,s.jsx)("th",{className:"p-2 text-center",children:"Priority"}),(0,s.jsx)("th",{className:"p-2 text-left",children:"Status"})]})}),(0,s.jsx)("tbody",{children:C?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"Loading gaps..."})}):0===N.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:8,className:"p-4 text-center text-gray-500",children:"No gaps identified. System is fully resourced."})}):N.map((e,t)=>{var a,r,n,i,o,l;return(0,s.jsxs)("tr",{className:t%2==0?"bg-white":"bg-gray-50",children:[(0,s.jsx)("td",{className:"p-2",children:(0,s.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("personnel"===e.gap_type?"bg-blue-100 text-blue-800":"equipment"===e.gap_type?"bg-green-100 text-green-800":"supplies"===e.gap_type?"bg-orange-100 text-orange-800":"vehicles"===e.gap_type?"bg-purple-100 text-purple-800":"space"===e.gap_type?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:(null==(a=e.gap_type)?void 0:a.charAt(0).toUpperCase())+(null==(r=e.gap_type)?void 0:r.slice(1))||"Unknown"})}),(0,s.jsx)("td",{className:"p-2",children:e.gap_category||"-"}),(0,s.jsx)("td",{className:"p-2",children:e.facility_id||"General"}),(0,s.jsx)("td",{className:"p-2 text-center",children:e.quantity_needed}),(0,s.jsx)("td",{className:"p-2 text-center",children:e.quantity_available}),(0,s.jsx)("td",{className:"p-2 text-center font-bold text-red-600",children:e.quantity_needed-e.quantity_available}),(0,s.jsx)("td",{className:"p-2 text-center",children:(0,s.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("critical"===e.priority?"bg-red-100 text-red-800":"high"===e.priority?"bg-orange-100 text-orange-800":"medium"===e.priority?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:(null==(n=e.priority)?void 0:n.charAt(0).toUpperCase())+(null==(i=e.priority)?void 0:i.slice(1))||"Medium"})}),(0,s.jsx)("td",{className:"p-2",children:(0,s.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("open"===e.status?"bg-red-100 text-red-800":"requested"===e.status?"bg-yellow-100 text-yellow-800":"filled"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:(null==(o=e.status)?void 0:o.charAt(0).toUpperCase())+(null==(l=e.status)?void 0:l.slice(1))||"Open"})})]},e.id)})})]});case"assets":return(0,s.jsxs)("div",{className:"text-center text-gray-500 py-8",children:[(0,s.jsx)("p",{children:"Assets & Resources table under development"}),(0,s.jsx)("p",{className:"text-sm mt-2",children:"This will show ALL assets: vehicles, equipment, and supplies in one unified table with category filtering."})]});case"work-assignments":return(0,s.jsxs)("div",{className:"text-center text-gray-500 py-8",children:[(0,s.jsx)("p",{children:"Work Assignments table under development"}),(0,s.jsx)("p",{className:"text-sm mt-2",children:"This will show all task assignments and completion tracking."})]});default:return(0,s.jsxs)("div",{className:"text-center text-gray-500 py-8",children:['Table view for "',null==P?void 0:P.name,'" is under development']})}})()}),(0,s.jsx)("input",{ref:c,type:"file",accept:".csv",onChange:I,className:"hidden"})]})]})}function eD(){let[e,t]=(0,r.useState)([]),[a,n]=(0,r.useState)(null),[i,l]=(0,r.useState)("all");(0,r.useEffect)(()=>{d()},[]);let d=()=>{let e=[];for(let t of[{data:o.shelteringFacilities,type:"Shelter",discipline:"Sheltering",icon:"\uD83C\uDFE0",color:"red"},{data:o.feedingFacilities,type:"Feeding",discipline:"Feeding",icon:"\uD83C\uDF7D️",color:"orange"},{data:o.governmentFacilities||[],type:"EOC",discipline:"Government Operations",icon:"\uD83C\uDFDB️",color:"blue"}])for(let a of t.data){let s={id:"".concat(t.discipline,"-").concat(a.id),name:a.name,type:t.type,discipline:t.discipline,address:a.address,county:a.county,status:a.status||"Active",capacity:a.capacity,personnel:a.personnel,icon:t.icon,color:t.color,lat:27.6648+(Math.random()-.5)*2,lng:-81.5158+(Math.random()-.5)*2};e.push(s)}t(e)},c="all"===i?e:e.filter(e=>e.discipline===i),p=["all",...Array.from(new Set(e.map(e=>e.discipline)))];return(0,s.jsxs)("div",{className:"h-screen flex",children:[(0,s.jsxs)("div",{className:"w-96 bg-white border-r border-gray-200 overflow-y-auto",children:[(0,s.jsxs)("div",{className:"p-4 bg-gray-800 text-white sticky top-0 z-10",children:[(0,s.jsx)("h2",{className:"text-xl font-bold",children:"\uD83D\uDDFA️ Facility Map"}),(0,s.jsxs)("p",{className:"text-sm mt-1",children:[c.length," locations"]})]}),(0,s.jsx)("div",{className:"p-4 border-b bg-gray-50 sticky top-[72px] z-10",children:(0,s.jsx)("select",{value:i,onChange:e=>l(e.target.value),className:"w-full px-3 py-2 border rounded",children:p.map(e=>(0,s.jsx)("option",{value:e,children:"all"===e?"All Disciplines":e},e))})}),(0,s.jsx)("div",{className:"divide-y",children:c.map(e=>(0,s.jsx)("button",{onClick:()=>n(e),className:"w-full p-4 text-left hover:bg-gray-50 transition-colors ".concat((null==a?void 0:a.id)===e.id?"bg-blue-50":""),children:(0,s.jsxs)("div",{className:"flex items-start",children:[(0,s.jsx)("span",{className:"text-2xl mr-3",children:e.icon}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"font-semibold",children:e.name}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[e.type," • ",e.county," County"]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.address}),(0,s.jsx)("span",{className:"inline-block mt-2 px-2 py-1 rounded text-xs font-semibold ".concat("Open"===e.status||"Active"===e.status||"Operational"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.status}),(0,s.jsxs)("div",{className:"flex gap-4 mt-2 text-xs text-gray-600",children:[e.capacity&&(0,s.jsx)("span",{children:"object"==typeof e.capacity&&e.capacity.maximum?"".concat(e.capacity.current||0,"/").concat(e.capacity.maximum," beds"):e.capacity.meals?"".concat(e.capacity.meals," meals/day"):null}),e.personnel&&(0,s.jsxs)("span",{children:[e.personnel.have,"/",e.personnel.required," staff",e.personnel.gap>0&&(0,s.jsxs)("span",{className:"text-red-600 font-semibold",children:[" (-",e.personnel.gap,")"]})]})]})]})]})},e.id))})]}),(0,s.jsx)("div",{className:"flex-1 relative bg-gray-100",children:(0,s.jsxs)("div",{className:"w-full h-full relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50 to-green-50",children:(0,s.jsxs)("svg",{className:"absolute inset-0 w-full h-full",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("defs",{children:(0,s.jsx)("pattern",{id:"grid",width:"50",height:"50",patternUnits:"userSpaceOnUse",children:(0,s.jsx)("path",{d:"M 50 0 L 0 0 0 50",fill:"none",stroke:"rgba(0,0,0,0.05)",strokeWidth:"1"})})}),(0,s.jsx)("rect",{width:"100%",height:"100%",fill:"url(#grid)"})]})}),(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"relative w-96 h-96",children:[(0,s.jsx)("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 text-sm font-bold text-gray-700",children:"FLORIDA"}),c.map((e,t)=>{if(!e.lat||!e.lng)return null;let a=(e.lng+88)/10*100,r=(32-e.lat)/8*100;return(0,s.jsx)("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2 cursor-pointer hover:z-10",style:{left:"".concat(a,"%"),top:"".concat(r,"%")},onClick:()=>n(e),children:(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsx)("div",{className:"\n                        w-8 h-8 rounded-full flex items-center justify-center text-white shadow-lg\n                        transform transition-transform group-hover:scale-125\n                        ".concat("red"===e.color?"bg-red-500":"","\n                        ").concat("orange"===e.color?"bg-orange-500":"","\n                        ").concat("blue"===e.color?"bg-blue-500":"","\n                      "),children:(0,s.jsx)("span",{className:"text-xs",children:e.icon})}),(0,s.jsxs)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 hidden group-hover:block z-20",children:[(0,s.jsx)("div",{className:"bg-gray-900 text-white text-xs rounded py-1 px-2 whitespace-nowrap",children:e.name}),(0,s.jsx)("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 -mt-1",children:(0,s.jsx)("div",{className:"border-4 border-transparent border-t-gray-900"})})]})]})},e.id)})]})}),a&&(0,s.jsxs)("div",{className:"absolute bottom-4 right-4 bg-white rounded-lg shadow-xl p-4 max-w-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,s.jsxs)("h3",{className:"font-bold text-lg flex items-center",children:[(0,s.jsx)("span",{className:"mr-2",children:a.icon}),a.name]}),(0,s.jsx)("button",{onClick:()=>n(null),className:"text-gray-400 hover:text-gray-600",children:"✕"})]}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-semibold",children:"Type:"})," ",a.type]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-semibold",children:"Address:"})," ",a.address]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-semibold",children:"County:"})," ",a.county]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-semibold",children:"Status:"})," ",(0,s.jsx)("span",{className:"\n                    px-2 py-1 rounded text-xs font-semibold\n                    ".concat("Open"===a.status||"Active"===a.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800","\n                  "),children:a.status})]}),a.capacity&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-semibold",children:"Capacity:"})," ","object"==typeof a.capacity&&a.capacity.maximum?"".concat(a.capacity.current||0,"/").concat(a.capacity.maximum," beds"):a.capacity.meals?"".concat(a.capacity.meals," meals/day"):"-"]}),a.personnel&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-semibold",children:"Staffing:"})," ",a.personnel.have,"/",a.personnel.required,a.personnel.gap>0&&(0,s.jsxs)("span",{className:"text-red-600 font-bold",children:[" (-",a.personnel.gap,")"]})]})]}),(0,s.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,s.jsx)("button",{className:"flex-1 px-3 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700",children:"View Details"}),(0,s.jsx)("button",{onClick:()=>window.open("https://maps.google.com/?q=".concat(encodeURIComponent(a.address))),className:"flex-1 px-3 py-2 bg-gray-600 text-white rounded text-sm hover:bg-gray-700",children:"Get Directions"})]})]}),(0,s.jsxs)("div",{className:"absolute top-4 right-4 bg-white rounded-lg shadow p-2",children:[(0,s.jsx)("div",{className:"text-xs font-bold mb-2",children:"Legend"}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),(0,s.jsx)("span",{className:"text-xs",children:"Sheltering"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-orange-500 rounded-full"}),(0,s.jsx)("span",{className:"text-xs",children:"Feeding"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),(0,s.jsx)("span",{className:"text-xs",children:"Gov Ops"})]})]})]})]})})]})}function eE(){var e;let[t,a]=(0,r.useState)(1),[n,i]=(0,r.useState)(!0),[l,c]=(0,r.useState)(100),h=[{id:"cover",title:"Cover Page & Checklist",startPage:1,endPage:1,pages:[{pageNumber:1,component:(0,s.jsx)(d,{drNumber:o.operation.drNumber,operationName:o.operation.name,operationalPeriod:o.operation.operationalPeriod,preparedBy:{name:o.operation.preparedBy,title:o.operation.preparedByTitle},approvedBy:{name:o.operation.approvedBy,title:o.operation.approvedByTitle},onPhotoUpdate:()=>{}})}]},{id:"directors-message",title:"Director's Intent/Message",startPage:2,endPage:3,pages:[{pageNumber:2,component:(0,s.jsx)(p,{onContentChange:()=>{}})},{pageNumber:3,component:(0,s.jsx)("div",{className:"p-8",children:"Director's Message continues..."})}]},{id:"contact-roster",title:"Contact Roster DRO HQ",startPage:4,endPage:6,pages:[{pageNumber:4,component:(0,s.jsx)(w,{})},{pageNumber:5,component:(0,s.jsx)("div",{className:"p-8",children:"Contact Roster Page 2"})},{pageNumber:6,component:(0,s.jsx)("div",{className:"p-8",children:"Contact Roster Page 3"})}]},{id:"org-chart",title:"Incident Organization Chart",startPage:7,endPage:8,pages:[{pageNumber:7,component:(0,s.jsx)(P,{})},{pageNumber:8,component:(0,s.jsx)("div",{className:"p-8",children:"Organization Chart Details"})}]},{id:"priorities",title:"Incident Priorities and Objectives",startPage:9,endPage:10,pages:[{pageNumber:9,component:(0,s.jsx)(I,{})},{pageNumber:10,component:(0,s.jsx)("div",{className:"p-8",children:"Additional Objectives"})}]},{id:"sheltering-resources",title:"DRO - Sheltering Resources",startPage:11,endPage:12,pages:[{pageNumber:11,component:(0,s.jsx)(g,{})},{pageNumber:12,component:(0,s.jsx)("div",{className:"p-8",children:"Sheltering Resources Page 2"})}]},{id:"feeding",title:"Work Assignments - Feeding",startPage:13,endPage:22,pages:[{pageNumber:13,component:(0,s.jsx)(x,{})},{pageNumber:14,component:(0,s.jsx)("div",{className:"p-8",children:"Feeding Assignments Page 2"})},{pageNumber:15,component:(0,s.jsx)("div",{className:"p-8",children:"Feeding Assignments Page 3"})},{pageNumber:16,component:(0,s.jsx)(u,{})},{pageNumber:17,component:(0,s.jsx)("div",{className:"p-8",children:"ERV Assignments Page 2"})},{pageNumber:18,component:(0,s.jsx)("div",{className:"p-8",children:"ERV Assignments Page 3"})},{pageNumber:19,component:(0,s.jsx)("div",{className:"p-8",children:"ERV Assignments Page 4"})},{pageNumber:20,component:(0,s.jsx)("div",{className:"p-8",children:"ERV Assignments Page 5"})},{pageNumber:21,component:(0,s.jsx)("div",{className:"p-8",children:"ERV Assignments Page 6"})},{pageNumber:22,component:(0,s.jsx)("div",{className:"p-8",children:"ERV Assignments Page 7"})}]},{id:"government-ops",title:"Work Assignments - Government Operations",startPage:23,endPage:25,pages:[{pageNumber:23,component:(0,s.jsx)(b,{})},{pageNumber:24,component:(0,s.jsx)("div",{className:"p-8",children:"Government Operations Page 2"})},{pageNumber:25,component:(0,s.jsx)("div",{className:"p-8",children:"Government Operations Page 3"})}]},{id:"damage-assessment",title:"Work Assignments - Damage Assessment",startPage:26,endPage:28,pages:[{pageNumber:26,component:(0,s.jsx)(y,{})},{pageNumber:27,component:(0,s.jsx)("div",{className:"p-8",children:"Damage Assessment Page 2"})},{pageNumber:28,component:(0,s.jsx)("div",{className:"p-8",children:"Damage Assessment Page 3"})}]},{id:"distribution",title:"Work Assignments - Distribution",startPage:29,endPage:31,pages:[{pageNumber:29,component:(0,s.jsx)(f,{})},{pageNumber:30,component:(0,s.jsx)("div",{className:"p-8",children:"Distribution Page 2"})},{pageNumber:31,component:(0,s.jsx)("div",{className:"p-8",children:"Distribution Page 3"})}]},{id:"individual-care",title:"Work Assignments - Individual Disaster Care",startPage:32,endPage:38,pages:[{pageNumber:32,component:(0,s.jsx)(j,{})},{pageNumber:33,component:(0,s.jsx)("div",{className:"p-8",children:"Individual Care Page 2"})},{pageNumber:34,component:(0,s.jsx)("div",{className:"p-8",children:"Individual Care Page 3"})},{pageNumber:35,component:(0,s.jsx)("div",{className:"p-8",children:"Individual Care Page 4"})},{pageNumber:36,component:(0,s.jsx)("div",{className:"p-8",children:"Individual Care Page 5"})},{pageNumber:37,component:(0,s.jsx)("div",{className:"p-8",children:"Individual Care Page 6"})},{pageNumber:38,component:(0,s.jsx)("div",{className:"p-8",children:"Individual Care Page 7"})}]},{id:"work-sites",title:"Work Sites and Facilities",startPage:39,endPage:44,pages:[{pageNumber:39,component:(0,s.jsx)(ed,{})},{pageNumber:40,component:(0,s.jsx)("div",{className:"p-8",children:"Work Sites Page 2"})},{pageNumber:41,component:(0,s.jsx)("div",{className:"p-8",children:"Work Sites Page 3"})},{pageNumber:42,component:(0,s.jsx)("div",{className:"p-8",children:"Work Sites Page 4"})},{pageNumber:43,component:(0,s.jsx)("div",{className:"p-8",children:"Work Sites Page 5"})},{pageNumber:44,component:(0,s.jsx)("div",{className:"p-8",children:"Work Sites Page 6"})}]},{id:"daily-schedule",title:"Daily Schedule",startPage:45,endPage:48,pages:[{pageNumber:45,component:(0,s.jsx)(ei,{})},{pageNumber:46,component:(0,s.jsx)("div",{className:"p-8",children:"Daily Schedule Page 2"})},{pageNumber:47,component:(0,s.jsx)("div",{className:"p-8",children:"Daily Schedule Page 3"})},{pageNumber:48,component:(0,s.jsx)("div",{className:"p-8",children:"Daily Schedule Page 4"})}]},{id:"maps",title:"Maps and Geographic Information",startPage:49,endPage:51,pages:[{pageNumber:49,component:(0,s.jsx)(eo,{})},{pageNumber:50,component:(0,s.jsx)("div",{className:"p-8",children:"Maps Page 2"})},{pageNumber:51,component:(0,s.jsx)("div",{className:"p-8",children:"Maps Page 3"})}]},{id:"appendices",title:"Appendices and References",startPage:52,endPage:53,pages:[{pageNumber:52,component:(0,s.jsx)(el,{})},{pageNumber:53,component:(0,s.jsx)("div",{className:"p-8",children:"Additional References"})}]}];return(0,s.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,s.jsxs)("div",{className:"".concat(n?"w-80":"w-12"," bg-white border-r border-gray-200 transition-all duration-300 flex flex-col shadow-lg"),children:[(0,s.jsx)("div",{className:"bg-red-600 text-white",children:(0,s.jsxs)("div",{className:"p-4 flex items-center justify-between ".concat(!n&&"px-2"),children:[n&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-lg",children:"IAP Document"}),(0,s.jsxs)("p",{className:"text-sm opacity-90",children:["Page ",t," of 53"]})]}),(0,s.jsx)("button",{onClick:()=>i(!n),className:"text-white hover:bg-red-700 p-2 rounded transition-colors",title:n?"Collapse navigation":"Expand navigation",children:n?"◁":"▷"})]})}),n&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"p-4 border-b bg-gray-50",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>a(1),className:"flex-1 px-2 py-1 bg-gray-200 rounded hover:bg-gray-300 text-sm",children:"Cover"}),(0,s.jsx)("button",{onClick:()=>a(9),className:"flex-1 px-2 py-1 bg-gray-200 rounded hover:bg-gray-300 text-sm",children:"Priorities"}),(0,s.jsx)("button",{onClick:()=>a(39),className:"flex-1 px-2 py-1 bg-gray-200 rounded hover:bg-gray-300 text-sm",children:"Sites"})]})}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto",children:h.map(e=>{let r=t>=e.startPage&&t<=e.endPage;return(0,s.jsxs)("div",{className:"border-b last:border-b-0",children:[(0,s.jsx)("button",{onClick:()=>a(e.startPage),className:"w-full text-left px-4 py-3 hover:bg-gray-50 transition-colors ".concat(r?"bg-blue-50 border-l-4 border-blue-600":""),children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm ".concat(r?"font-semibold text-blue-600":""),children:e.title}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:e.startPage===e.endPage?"p.".concat(e.startPage):"p.".concat(e.startPage,"-").concat(e.endPage)})]})}),r&&e.pages.length>1&&(0,s.jsx)("div",{className:"bg-gray-50 px-4 py-2 flex flex-wrap gap-1",children:e.pages.map(e=>(0,s.jsx)("button",{onClick:()=>a(e.pageNumber),className:"px-2 py-1 text-xs rounded ".concat(t===e.pageNumber?"bg-blue-600 text-white":"bg-white hover:bg-gray-100 border"),children:e.pageNumber},e.pageNumber))})]},e.id)})})]})]}),(0,s.jsxs)("div",{className:"flex-1 overflow-auto bg-gray-100",children:[(0,s.jsx)("div",{className:"sticky top-0 z-10 bg-white border-b shadow-sm px-4 py-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>a(Math.max(1,t-1)),disabled:1===t,className:"px-3 py-1 bg-gray-100 rounded hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"← Previous"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-sm",children:"Page"}),(0,s.jsx)("input",{type:"number",value:t,onChange:e=>{a(Math.min(53,Math.max(1,parseInt(e.target.value)||1)))},className:"w-16 px-2 py-1 border rounded text-center",min:"1",max:"53"}),(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"of 53"})]}),(0,s.jsx)("button",{onClick:()=>a(Math.min(53,t+1)),disabled:53===t,className:"px-3 py-1 bg-gray-100 rounded hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next →"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 border-l pl-4",children:[(0,s.jsx)("button",{onClick:()=>c(Math.max(50,l-25)),className:"px-2 py-1 bg-gray-100 rounded hover:bg-gray-200",children:"−"}),(0,s.jsxs)("span",{className:"text-sm w-12 text-center",children:[l,"%"]}),(0,s.jsx)("button",{onClick:()=>c(Math.min(200,l+25)),className:"px-2 py-1 bg-gray-100 rounded hover:bg-gray-200",children:"+"}),(0,s.jsx)("button",{onClick:()=>c(100),className:"px-2 py-1 bg-gray-100 rounded hover:bg-gray-200 text-sm",children:"Fit"})]}),(0,s.jsx)("div",{className:"border-l pl-4",children:(0,s.jsx)("span",{className:"text-sm text-gray-600",children:(null==(e=h.find(e=>t>=e.startPage&&t<=e.endPage))?void 0:e.title)||"Loading..."})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>{window.print()},className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center gap-2",children:"\uD83D\uDDA8️ Print"}),(0,s.jsx)(eg,{data:o})]})]})}),(0,s.jsx)("div",{className:"flex justify-center py-8 px-4",children:(0,s.jsxs)("div",{className:"bg-white shadow-2xl transition-transform",style:{width:"8.5in",minHeight:"11in",transform:"scale(".concat(l/100,")"),transformOrigin:"top center"},children:[(0,s.jsx)("div",{className:"border-b-2 border-gray-800 px-8 py-4 bg-gray-50",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-lg font-bold",children:"INCIDENT ACTION PLAN"}),(0,s.jsxs)("p",{className:"text-sm text-gray-700",children:[o.operation.drNumber," • ",o.operation.name]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"text-sm font-semibold",children:["Operational Period #",o.operation.operationalPeriod.number]}),(0,s.jsxs)("p",{className:"text-xs text-gray-600",children:[o.operation.operationalPeriod.start," - ",o.operation.operationalPeriod.end]})]})]})}),(0,s.jsx)("div",{className:"min-h-[9in] overflow-auto",children:(()=>{for(let e of h){let a=e.pages.find(e=>e.pageNumber===t);if(a)return a.component}return(0,s.jsxs)("div",{className:"p-8 text-center text-gray-500",children:["Page ",t," - Content Loading..."]})})()}),(0,s.jsx)("div",{className:"border-t-2 border-gray-800 px-8 py-3 bg-gray-50",children:(0,s.jsxs)("div",{className:"flex justify-between items-center text-xs text-gray-600",children:[(0,s.jsx)("span",{children:"For Official Use Only"}),(0,s.jsxs)("span",{className:"font-semibold",children:["Page ",t," of 53"]}),(0,s.jsxs)("span",{children:["Generated: ",new Date().toLocaleString()]})]})})]})})]})]})}function eA(e){let{operation:t,user:a}=e,[n,i]=(0,r.useState)("iap"),l=a||{id:"user-1",email:"user@redcross.org",name:"John Doe",role:"incident_commander",iapRole:"ip_group",permissions:[],homeChapter:"test-chapter",activeOperations:[t.id],lastActive:new Date,preferences:{theme:"light",notifications:{email:!0,push:!0,sms:!1},defaultView:"dashboard",timezone:"America/New_York"}};return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-2xl font-bold text-gray-900",children:[o.operation.name," - ",o.operation.events]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[o.operation.drNumber," • ",o.operation.type," • Operational Period #",o.operation.operationalPeriod.number]})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[l.name," • ",l.iapRole.replace("_"," ").toUpperCase()]})})]}),(0,s.jsxs)("div",{className:"mt-4 flex space-x-4 border-t pt-3",children:[(0,s.jsx)("button",{onClick:()=>i("iap"),className:"px-4 py-2 rounded-md font-medium ".concat("iap"===n?"bg-red-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"IAP Editor"}),(0,s.jsx)("button",{onClick:()=>i("iap-viewer"),className:"px-4 py-2 rounded-md font-medium ".concat("iap-viewer"===n?"bg-red-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"\uD83D\uDCC4 IAP Viewer"}),(0,s.jsx)("button",{onClick:()=>i("facility-manager"),className:"px-4 py-2 rounded-md font-medium ".concat("facility-manager"===n?"bg-red-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Facility Manager (Gaps & Assets)"}),(0,s.jsx)("button",{onClick:()=>i("tables-hub"),className:"px-4 py-2 rounded-md font-medium ".concat("tables-hub"===n?"bg-red-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"\uD83D\uDCCA Tables & Data Hub"}),(0,s.jsx)("button",{onClick:()=>i("facility-map"),className:"px-4 py-2 rounded-md font-medium ".concat("facility-map"===n?"bg-red-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"\uD83D\uDDFA️ Facility Map"})]})]})}),(0,s.jsxs)("div",{className:"tables-hub"===n||"facility-map"===n||"iap-viewer"===n?"":"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:["iap"===n&&(0,s.jsx)(ex,{}),"iap-viewer"===n&&(0,s.jsx)(eE,{}),"facility-manager"===n&&(0,s.jsx)(ew,{}),"tables-hub"===n&&(0,s.jsx)(eS,{}),"facility-map"===n&&(0,s.jsx)(eD,{})]})]})}function ek(){let e={id:"demo-op",operationNumber:"DEMO-001",operationName:"Demo Operation",disasterType:"hurricane",status:"active",activationLevel:"level_2",createdAt:new Date,createdBy:"demo-user",geography:{regions:[],states:[],counties:[],chapters:[]},metadata:{serviceLinesActivated:[]}};return(0,s.jsx)(eA,{operation:e})}}},e=>{e.O(0,[612,33,702,930,316,876,441,255,358],()=>e(e.s=7558)),_N_E=e.O()}]);